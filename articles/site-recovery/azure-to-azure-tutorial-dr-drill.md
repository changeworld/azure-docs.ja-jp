---
title: Azure Site Recovery を使用して Azure VM のディザスター リカバリー訓練を実行する
description: Azure Site Recovery サービスを使用して Azure VM のセカンダリ リージョンへのディザスター リカバリー訓練を実行する方法について説明します。
services: site-recovery
ms.topic: tutorial
ms.date: 01/16/2020
ms.custom: mvc
ms.openlocfilehash: b2ce157f0f192135ab0507e4aae4c0a282bda1ea
ms.sourcegitcommit: d29e7d0235dc9650ac2b6f2ff78a3625c491bbbf
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/17/2020
ms.locfileid: "76166190"
---
# <a name="run-a-disaster-recovery-drill-to-a-secondary-region-for-azure-vms"></a>Azure VM のセカンダリ リージョンへのディザスター リカバリー訓練を実行する

[Azure Site Recovery](site-recovery-overview.md) サービスは、計画された停止や計画外の停止の際にビジネス アプリを実行し続け、使用できるようにすることで、ビジネス継続性とディザスター リカバリー (BCDR) 戦略に貢献します。 Site Recovery は、レプリケーション、フェールオーバー、フェールバックなど、オンプレミスのマシンと Azure Virtual Machines (VM) のディザスター リカバリーを管理し、調整します。

このチュートリアルでは、テスト フェールオーバーを使用して、ある Azure リージョンから別のリージョンへの Azure VM のディザスター リカバリー訓練を実行する方法について説明します。 訓練ではデータ損失やダウンタイムなしでレプリケーション戦略を検証します。これは運用環境には影響しません。 このチュートリアルでは、以下の内容を学習します。

> [!div class="checklist"]
> * 前提条件を確認する
> * 1 台の VM のテスト フェールオーバーを実行する

> [!NOTE]
> このチュートリアルを使用すると、最小限の手順でディザスター リカバリーの訓練を行うことができます。 ディザスター リカバリーの訓練の実行に関連するさまざまな機能の詳細については、Azure VM の[レプリケーション](azure-to-azure-how-to-enable-replication.md)、[ネットワーク](azure-to-azure-about-networking.md)、[自動化](azure-to-azure-powershell.md)、[トラブルシューティング](azure-to-azure-troubleshoot-errors.md)に関するドキュメントを参照してください。

## <a name="prerequisites"></a>前提条件

このチュートリアルを実行する前に、次のアイテムを確認してください。

- テスト フェールオーバーを実行する前に、VM のプロパティをチェックして、ディザスター リカバリー用に構成されていることを確認することをお勧めします。 VM の **[操作]**  >  **[ディザスター リカバリー]**  >  **[プロパティ]** に移動し、レプリケーションとフェールオーバーのプロパティを表示します。
- レプリケーションを有効にしたときに設定された既定のネットワークではなく、**テスト フェールオーバー用の別個の Azure VM ネットワークを使用することをお勧めします**。
- ディザスター リカバリーの訓練を実行する前に、各 NIC のソース ネットワーク構成に応じて、 **[コンピューティングとネットワーク]** のテスト フェールオーバー設定で、各 NIC にアタッチするために **[サブネット]** 、 **[プライベート IP アドレス]** 、 **[パブリック IP]** 、 **[ネットワーク セキュリティ グループ]** 、または **[ロード バランサー]** を指定することができます。

## <a name="run-a-test-failover"></a>テスト フェールオーバーの実行

この例では、Recovery Services コンテナーを使用して VM のテスト フェールオーバーを実行する方法を示します。

1. コンテナーを選択し、 **[保護されたアイテム]**  >  **[レプリケートされたアイテム]** に移動して、VM を選択します。
1. **[テスト フェールオーバー]** で、フェールオーバーに使用する復旧ポイントを選択します。
   - **Latest**:Site Recovery のすべてのデータを処理し、最短の RTO (目標復旧時間) を提供します。
   - **最後に処理があった時点**:Site Recovery によって処理された最新の復旧ポイントに VM をフェールオーバーします。 タイム スタンプが表示されます。 このオプションを使用すると、データの処理に時間がかからないた.め、RTO が低くなります。
   - **最新のアプリ整合性**:このオプションでは、すべての VM が最新のアプリ整合性の復旧ポイントにフェールオーバーされます。 タイム スタンプが表示されます。
   - **Custom**:特定の復旧ポイントにフェールオーバーします。 カスタムは、1 つの VM をフェールオーバーする場合にのみ使用でき、復旧計画を使用したフェールオーバーでは使用できません。
1. フェールオーバー後に、セカンダリ リージョンの Azure VM の接続先となるターゲットの Azure 仮想ネットワークを選択します。

   > [!NOTE]
   > レプリケートされたアイテムに対してテスト フェールオーバー設定が事前構成されている場合、Azure 仮想ネットワークを選択するドロップダウン メニューは表示されません。

1. フェールオーバーを開始するには、 **[OK]** を選択します。 コンテナーから進行状況を追跡するには、 **[監視]**  >  **[Site Recovery ジョブ]** に移動し、 **[テスト フェールオーバー]** ジョブを選択します。
1. フェールオーバーの完了後、レプリカの Azure VM は、Azure portal の **[仮想マシン]** に表示されます。 VM が実行中で、適切なサイズであること、また、適切なネットワークに接続されていることを確認してください。
1. テスト フェールオーバー中に作成された VM を削除するには、レプリケートされたアイテムまたは復旧計画で **[テスト フェールオーバーのクリーンアップ]** を選択します。 **[メモ]** を使用して、テスト フェールオーバーに関連する観察結果をすべて記録し、保存します。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [運用環境のフェールオーバーを実行する](azure-to-azure-tutorial-failover-failback.md)
