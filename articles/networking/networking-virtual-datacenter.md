---
title: 'Microsoft Azure 仮想データセンター: ネットワークの観点 | Microsoft Docs'
description: Azure で仮想データ センターを構築する方法について説明します
services: networking
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/3/2018
ms.author: jonor
ms.openlocfilehash: 1aab466a06711a334df0584334e5229b33f57754
ms.sourcegitcommit: 59914a06e1f337399e4db3c6f3bc15c573079832
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/20/2018
---
# <a name="microsoft-azure-virtual-datacenter-a-network-perspective"></a>Microsoft Azure 仮想データセンター: ネットワークの観点
**Microsoft Azure**: 移行の高速化、コストの削減、オンプレミスのアプリとデータの統合

## <a name="overview"></a>概要
オンプレミスのアプリケーションを Azure に移行すると、重要な変更がない場合であっても ("リフト アンド シフト" と呼ばれるアプローチ)、組織にはセキュリティで保護されたコスト効率の高いインフラストラクチャが得られるというメリットがあります。 ただし、クラウド コンピューティングで可能な俊敏性を最大限に活用するには、Azure の機能を利用するように企業のアーキテクチャを進化させる必要があります。 Microsoft Azure では、ハイパースケールのサービスとインフラストラクチャ、エンタープライズ レベルの機能と信頼性、ハイブリッド接続のための多くの選択肢が提供されています。 お客様は、これらのクラウド サービスにインターネット経由でアクセスするか、プライベート ネットワーク接続を提供する Azure ExpressRoute を使ってアクセスするかを選ぶことができます。 Microsoft Azure Platform により、顧客は自身のインフラストラクチャをシームレスにクラウドに拡張し、多層アーキテクチャを構築できます。 さらに、Microsoft のパートナーからは、Azure での実行用に最適化されたセキュリティ サービスと仮想アプライアンスにより、強化された機能が提供されています。

この記事では、多くのお客様がクラウドへの一括移行を検討するときに直面するアーキテクチャのスケール、パフォーマンス、セキュリティに関する問題の解決に使うことができるパターンと設計の概要について説明します。 組織のさまざまな IT ロールをシステムの管理とガバナンスに適合させる方法の概要についても説明し、セキュリティ要件とコストの最適化に注目します。

## <a name="what-is-a-virtual-data-center"></a>仮想データ センターとは
当初、クラウド ソリューションは、パブリック領域において単一の比較的独立したアプリケーションをホストするために設計されていました。 この方法は、数年間はうまくいっていました。 しかし、クラウド ソリューションの利点が明らかになり、複数の大規模なワークロードがクラウドでホストされるようになると、1 つまたは複数のリージョンでのデプロイのセキュリティ、信頼性、パフォーマンス、コストの問題に対処することが、クラウド サービスのライフサイクル全体を通して重要になりました。

次のクラウド配置ダイアグラムは、セキュリティ ギャップ (赤いボックス) と、ワークロード間での最適化ネットワーク仮想アプライアンスの余地 (黄色のボックス) の例を示したものです。

[![0]][0]

仮想データ センター (vDC) は、エンタープライズ ワークロードをサポートするためのこのような拡張の必要性と、パブリック クラウドで大規模なアプリケーションをサポートするときに発生する問題に対処する必要性から生まれました。

vDC は、クラウドはワークロード内のアプリケーション ワークロードであるだけでなく、ネットワーク、セキュリティ、管理、およびインフラストラクチャ (たとえば、DNS やディレクトリ サービス) でもあります。 また、通常は、オンプレミスのネットワークまたはデータ センターへのプライベート接続も提供します。 Azure に移行するワークロードが多くなればなるほど、これらのワークロードが配置されるサポート インフラストラクチャおよびオブジェクトについて考えることが重要になります。 リソースの構成方法について慎重に考えることで、データ フロー、セキュリティ モデル、コンプライアンスに関する課題が異なり個別に管理する必要のある多数の "ワークロード アイランド" が増殖するのを防ぐことができます。

仮想データ センターは、基本的に、共通のサポート機能とインフラストラクチャを備えた、独立してはいても関連性のあるエンティティのコレクションです。 ワークロードを統合された vDC として見ることにより、スケールの経済性、コンポーネントとデータ フローの集中化により最適化されたセキュリティ、および簡単な運用、管理、コンプライアンス監査によって、コストの削減を実現できます。

> [!NOTE]
> vDC は Azure 単独の製品では**なく**、要件を正しく満たすためのさまざまな機能の組み合わせであることを理解しておくことが重要です。 vDC は、クラウドのリソースと能力を最大限にするための、ワークロードと Azure の使用方法についての考え方です。 したがって、仮想 DC では、組織のロールと責任範囲を考慮した Azure での IT サービスの構築方法について、モジュール方式が採用されています。

vDC は、企業が以下のシナリオでワークロードとアプリケーションを Azure に移行するのに役立ちます。

-   複数の関連するワークロードをホストする
-   オンプレミスの環境から Azure にワークロードを移行する
-   複数のワークロード間に共有または集中されたセキュリティとアクセスの要件を実装する
-   大企業向けに DevOps と一元的 IT を適切に組み合わせる

vDC の利点を実現するときにキーとなるのは、[Azure VNet][VNet]、[NSG][NSG]、[VNet ピアリング][VNetPeering]、[ユーザー定義のルート (UDR)][UDR]、および[ロール ベースのアクセス制御 (RBAC)][RBAC] を使う Azure Identity といった Azure の機能を組み合わせた集中型トポロジ (ハブとスポーク) です。

## <a name="who-needs-a-virtual-data-center"></a>仮想データ センターが必要なユーザー
3 つ以上のワークロードを Azure に移行する必要があるすべての Azure ユーザーは、共通リソースの使用について考えるとメリットがあります。 規模によっては、単一のアプリケーションであっても、vDC の構築に使われるパターンとコンポーネントを利用するとメリットがあります。

組織に一元的な IT、ネットワーク、セキュリティ、コンプライアンスのチーム/部門がある場合、vDC は、ポリシー ポイントの適用、責任の分離、基になる共通コンポーネントの一貫性の維持を実現しながら、要件に適した最大限の自由と制御をアプリケーション チームに提供するのに役立ちます。

DevOps を検討している組織では、vDC の概念を利用して、Azure リソースの承認されたポケットを提供し、そのグループ (サブスクリプションまたは共通サブスクリプション内のリソース グループ) 内での完全な制御を保証することができ、一方で、ネットワークとセキュリティの境界は、ハブの VNet とリソース グループの一元的ポリシーによる定義への準拠を維持します。

## <a name="considerations-on-implementing-a-virtual-data-center"></a>仮想データ センターの実装に関する考慮事項
vDC を設計するときは、考慮すべき非常に重要な問題がいくつかあります。

-   ID とディレクトリ サービス
-   セキュリティ インフラストラクチャ
-   クラウドへの接続
-   クラウド内の接続

##### <a name="identity-and-directory-service"></a>*ID とディレクトリ サービス*
ID とディレクトリ サービスは、オンプレミスとクラウド両方のすべてのデータ センターの重要な側面です。 ID は、vDC 内のサービスへのアクセスと承認のすべての側面に関連しています。 承認されたユーザーおよびプロセスのみが Azure アカウントとリソースにアクセスできるようにするため、Azure は複数の種類の資格情報を認証に使います。 これには、パスワード (Azure アカウントへのアクセス)、暗号化キー、デジタル署名、および証明書が含まれます。 [*Azure Multi-Factor Authentication* (MFA)][MFA] は、Azure サービスへのアクセスに対する追加セキュリティ レイヤーです。 Azure MFA は、電話、テキスト メッセージ、モバイル アプリ通知などの各種の簡単な確認オプションにより認証を強化し、顧客に最も合った方法を提供します。

大規模な企業では、vDC 内または vDC 間での個々の ID とその認証、承認、ロール、権限の管理について説明されている ID 管理プロセスを定義する必要があります。 このプロセスの目的は、コスト、ダウンタイム、および手作業の反復を減らしながら、セキュリティと生産性を向上させることです。

企業/組織ではさまざまな基幹業務 (LOB) に必要なサービスの組み合わせに対する要求が厳しい場合があり、従業員は異なるプロジェクトに異なるロールで関係することがよくあります。 vDC では、適切なガバナンスでシステムを実行するために、それぞれが特定のロール定義を持つ異なるチーム間の良好な協力が必要です。 責任、アクセス、権限のマトリックスは非常に複雑になることがあります。 vDC の ID 管理は、[*Azure Active Directory* (AAD)][AAD] とロールベースのアクセス制御によって実装されます。

ディレクトリ サービスは、日常的な項目とネットワーク リソースを検索、管理、および整理するための共有情報インフラストラクチャです。 これらのリソースには、ボリューム、フォルダー、ファイル、プリンター、ユーザー、グループ、デバイス、その他のオブジェクトが含まれます。 ネットワーク上の各リソースは、ディレクトリ サーバーによってオブジェクトと見なされます。 リソースに関する情報は、そのリソースまたはオブジェクトに関連付けられた属性のコレクションとして格納されます。

すべての Microsoft Online ビジネス サービスは、サインオンや他の ID のニーズに対応するために、Azure Active Directory (AAD) に依存しています。 Azure Active Directory は、統合的で可用性の高い ID とアクセス管理のクラウド ソリューションであり、コアのディレクトリ サービス、高度な ID ガバナンス、およびアプリケーション アクセス管理を組み合わせたものです。 AAD は、オンプレミスの Active Directory と統合して、すべてのクラウド ベースのアプリケーションとローカルにホストされた (オンプレミスの) アプリケーションに対してシングル サインオンを有効にすることができます。 オンプレミスの Active Directory のユーザー属性は、AAD に自動的に同期できます。

1 人のグローバル管理者が vDC のすべての権限の割り当てを行う必要はありません。 代わりに、特定の各部門 (または、ディレクトリ サービス内のユーザーやサービスのグループ) が、vDC 内の自分のリソースを管理するために必要なアクセス許可を持つことができます。 アクセス許可を構成するにはバランスが必要です。 アクセス許可が多すぎるとパフォーマンス効率が妨げられ、アクセス許可が少なすぎたり緩すぎたりするとセキュリティ リスクが高まります。 Azure のロールベースのアクセス制御 (RBAC) は、vDC リソースのきめ細かいアクセス管理を実現することで、この問題に対処できます。

##### <a name="security-infrastructure"></a>*セキュリティ インフラストラクチャ*
vDC のコンテキストでのセキュリティ インフラストラクチャは、主に、vDC 固有の仮想ネットワーク セグメントのトラフィックの分離と、vDC 全体の受信および送信フローの制御方法に関係します。 Azure の基になっているマルチ テナント アーキテクチャは、Virtual Network (VNet) の分離、アクセス制御リスト (ACL)、ロード バランサー、IP フィルター、トラフィック フロー ポリシーを使って、デプロイ間の許可されていない非意図的なトラフィックを防止します。 ネットワーク アドレス変換 (NAT) は、内部ネットワーク トラフィックを外部トラフィックから分離します。

Azure ファブリックは、テナントのワークロードにインフラストラクチャ リソースを割り当て、仮想マシン (VM) との間の通信を管理します。 Azure ハイパーバイザーは、VM 間のメモリおよびプロセスの分離を強制し、ネットワーク トラフィックをゲスト OS テナントに安全にルーティングします。

##### <a name="connectivity-to-the-cloud"></a>*クラウドへの接続*
vDC は、お客様、パートナー、社内ユーザーにサービスを提供するために、外部ネットワークとの接続が必要です。 これは通常、インターネットへの接続だけでなく、オンプレミスのネットワークとデータ センターへの接続も意味します。

お客様は、セキュリティ ポリシーを作成し、ネットワーク仮想アプライアンス (フィルター処理およびトラフィック検査)、カスタム ルーティング ポリシー、ネットワーク フィルタリング (ユーザー定義のルーティングとネットワーク セキュリティ グループ) を使って、インターネットと双方向にアクセスできる特定の vDC でホストされたサービスおよびアクセス方法を制御できます。

企業では、多くの場合、vDC をオンプレミスのデータ センターまたは他のリソースに接続する必要があります。 したがって、Azure とオンプレミスのネットワークの間の接続は、効果的なアーキテクチャを設計するときの不可欠な要素です。 Azure で vDC とオンプレミスの間の相互接続を作成するには、インターネット経由とプライベート直接接続の 2 つの方法があります。

[**Azure のサイト間 VPN**][VPN] は、セキュリティで保護された暗号化接続 (IPsec/IKE トンネル) によって確立される、オンプレミスのネットワークと vDC の間の、インターネットを介した相互接続サービスです。 Azure のサイト間接続は、すべての接続がインターネット経由で接続するため、柔軟で、すばやく作成でき、追加調達の必要がありません。

[**ExpressRoute**][ExR] は Azure の接続サービスであり、vDC とオンプレミスのネットワークの間にプライベート接続を作成できます。 ExpressRoute 接続はパブリック インターネットを使わず、高いセキュリティ、信頼性、速度 (最大 10 Gbps)、および一貫した待機時間を提供します。 ExpressRoute は vDC に非序に適しており、ExpressRoute ユーザーはプライベート接続に関連付けられたコンプライアンス規則の利点を得られます。

ExpressRoute 接続のデプロイでは、ExpressRoute サービス プロバイダーと連携する必要があります。 短時間で使い始める必要がある場合は、通常、最初にサイト間 VPN を使って vDC とオンプレミスのリソースの間の接続を確立した後、ExpressRoute 接続に移行します。

##### <a name="connectivity-within-the-cloud"></a>*クラウド内の接続*
[VNet][VNet] と [VNet ピアリング][VNetPeering] は、vDC 内の基本的なネットワーク接続サービスです。 VNet は vDC リソースの分離の自然な境界を保証し、VNet ピアリングは同じ Azure リージョン内あるいはリージョンをまたがる異なる VNet 間の相互通信を可能にします。 VNet 内および VNet 間のトラフィック制御では、アクセス制御リスト ([ネットワーク セキュリティ グループ][NSG])、[ネットワーク仮想アプライアンス][NVA]、およびカスタム ルーティング テーブル ([UDR][UDR]) によって指定されたセキュリティ ルールのセットを一致させる必要があります。

## <a name="virtual-data-center-overview"></a>仮想データ センターの概要

### <a name="topology"></a>トポロジ
ハブとスポークのモデルは、単一の Azure リージョン内の仮想データ センターを拡張しました。

[![1]][1]

ハブは、異なるゾーン (インターネット、オンプレミス、スポーク) の間の受信および送信トラフィックを制御および検査する中央ゾーンです。 ハブとスポークのトポロジにより、IT 部門は、セキュリティ ポリシーを集中的に効率よく適用し、構成の誤りと露出の可能性を最小限に抑えることができます。

ハブには、スポークによって消費される共通のサービス コンポーネントが含まれます。 共通中央サービスの典型的な例を次に示します。

-   スポークのワークロードにアクセスする前に信頼されていないネットワークからのサード パーティ アクセスのユーザー認証に必要な Windows Active Directory インフラストラクチャ (および関連する ADFS )
-   オンプレミスおよびインターネットのリソースにアクセスするための、スポーク内のワークロードの名前付けを解決する DNS サービス
-   ワークロードにシングル サインオンを実装するための PKI インフラストラクチャ
-   スポークとインターネット間のフロー制御 (TCP または UDP)
-   スポークとオンプレミス間のフロー制御
-   必要な場合、スポークとスポークの間のフロー制御

vDC は、複数のスポーク間で共有ハブ インフラストラクチャを使うことにより、全体的なコストを削減します。

各スポークのロールは、異なる種類のワークロードをホストできます。 スポークは、同じワークロードの反復可能なデプロイ (たとえば、開発とテスト、ユーザー受け入れテスト、運用前環境、運用環境) に対してモジュール方式のアプローチを提供することもできます。 スポークは、組織内で異なるグループを分離して有効にすることもできます (たとえば、DevOps グループ)。 スポーク内には、基本的なワークロードや、階層間のトラフィック制御を伴う複雑な多層ワークロードをデプロイできます。

##### <a name="subscription-limits-and-multiple-hubs"></a>サブスクリプションの制限と複数のハブ
Azure では、種類に関係なくすべてのコンポーネントが、Azure サブスクリプションにデプロイされます。 異なる Azure サブスクリプションに Azure コンポーネントを分離することで、差別化されたレベルのアクセスと承認の設定など、異なる LOB の要件を満たすことができます。

1 つの vDC のスポークの数を増やすことができますが、他の IT システムと同様に、プラットフォームの制限があります。 ハブのデプロイは特定の Azure サブスクリプションにバインドされ、サブスクリプションには制限事項と上限があります (たとえば、VNet ピアリングの最大数、詳しくは「[Azure サブスクリプションとサービスの制限、クォータ、制約][Limits]」を参照)。 制限が問題になる可能性がある場合は、単一のハブとスポークからハブとスポークのクラスターにモデルを拡張することによって、アーキテクチャをさらに拡張できます。 1 つまたは複数の Azure リージョン内の複数のハブを、VNet ピアリング、ExpressRoute またはサイト間 VPN を使って相互に接続できます。

[![2]][2]

複数のハブの導入は、システムのコストと管理作業の増加をもたらし、スケーラビリティ (例: システムの制限または冗長性) およびリージョンのレプリケーション (例: エンドユーザー パフォーマンスまたはディザスター リカバリー) によってのみ正当化されます。 複数のハブが必要なシナリオでは、運用を容易にするため、すべてのハブで同じサービスのセットを提供する必要があります。

##### <a name="interconnection-between-spokes"></a>スポーク間の相互接続
1 つのスポーク内に、複雑な多階層のワークロードを実装することができます。 多階層の構成は、同じ VNet 内のサブネット (すべての階層に対して 1 つ) を使い、NSG を使ってフローをフィルター処理することによって、実装できます。

一方、アーキテクトは、複数の VNet に多階層ワークロードをデプロイしたい場合があります。 VNet ピアリングを使うと、スポークは、同じハブまたは異なるハブの他のスポークに接続できます。 このシナリオの一般的な例は、アプリケーション処理サーバーが 1 つのスポーク (VNet) にあり、データベースが別のスポーク (VNet) にデプロイされている場合です。 この場合は、VNet ピアリングでスポークを相互接続することにより、ハブを通過しなくて済むようにすると簡単です。 アーキテクチャとセキュリティを注意深く検討し、ハブをバイパスしても、ハブにしか存在しない重要なセキュリティまたは監査ポイントがバイパスされないことを、確認する必要があります。

[![3]][3]

スポークは、ハブとして機能するスポークに相互接続することもできます。 この方法では 2 レベルの階層が作成され、上位レベル (レベル 0) のスポークが、階層の下位レベル (レベル 1) のスポークのハブになります。 vDC のスポークは、オンプレミスのネットワークまたはインターネットに到達するために、中央のハブにトラフィックを転送する必要があります。 2 レベルのハブのアーキテクチャでは複雑なルーティングが導入され、単純なハブ スポーク関係のメリットが失われます。

Azure では複雑なトポロジを構成できますが、vDC の概念の中核となる原則の 1 つは再現性と単純さです。 管理作業を最小限に抑えるため、単純なハブとスポークの設計が推奨される vDC 参照アーキテクチャです。

### <a name="components"></a>コンポーネント
仮想データ センターを構成する 4 種類の基本的なコンポーネントは、**インフラストラクチャ**、**境界ネットワーク**、**ワークロード**、**監視**です。

各コンポーネントの種類は、さまざまな Azure の機能とリソースで構成されます。 vDC は、複数のコンポーネントの種類のインスタンスと、同じコンポーネントの種類の複数のバリエーションで構成されます。 たとえば、異なるアプリケーションを表す多数の異なる論理的に分離されたワークロード インスタンスを使うことができます。 これらのさまざまなコンポーネントの種類とインスタンスを使って、最終的に vDC を構築します。

[![4]][4]

上の vDC の概要アーキテクチャでは、ハブ スポーク トポロジの異なるゾーンで使われる異なるコンポーネントの種類が示されています。 図では、アーキテクチャのさまざまな部分にインフラストラクチャ コンポーネントが示されています。

オンプレミスの DC または vDC の場合、アクセス権と権限をグループ ベースにするのがよい方法です。 個々のユーザーの代わりにグループとして扱うと、チーム間で一貫したアクセス ポリシーを維持でき、構成エラーを最小限に抑えるのに役立ちます。 適切なグループにユーザーを割り当てたり、グループからユーザーを削除することで、特定のユーザーの権限を最新に保つことができます。

各ロール グループの名前に固有のプレフィックスを付けることで、グループとワークロードの関連付けを識別しやすくなります。 たとえば、認証サービスをホストしているワークロードのグループには、*AuthServiceNetOps、AuthServiceSecOps、AuthServiceDevOps、AuthServiceInfraOps* といった名前を付けます。 同様に、集中化されたロールや、特定のサービスに関係のないロールの場合は、"Corp" というプレフィックスを付けます (例: *CorpNetOps*)。

多くの組織では、次のグループのバリエーションを使って、ロールが大きく分類されています。

-   "*中央 IT グループ (Corp)*" には、インフラストラクチャ (ネットワークやセキュリティなど) を制御するための所有者権限があり、そのため、サブスクリプションの共同作業者のロール (およびハブの制御) およびスポークのネットワーク共同作成者権限を持っている必要があります。 大きな組織では、これらの管理責任が、ネットワーク運用 (CorpNetOps) グループ (ネットワークだけを担当) やセキュリティ運用 (CorpSecOps) グループ (ファイアウォールとセキュリティ ポリシーを担当) などの複数のチームに分割されることがよくあります。 この場合、カスタム ロールの割り当て用に 2 つの異なるグループを作成する必要があります。
-   "*開発とテスト (AppDevOps) グループ*" には、ワークロード (アプリまたはサービス) をデプロイする責任があります。 このグループは、IaaS デプロイの仮想マシン共同作成者のロール、および 1 つ以上の PaaS 共同作成者のロールを持ちます (「[Azure のロールベースのアクセス制御のための組み込みロール][Roles]」を参照)。 場合によっては、開発とテスト チームは、ハブまたは特定のスポーク内のセキュリティ ポリシー (NSG) およびルーティング ポリシー (UDR) を見ることができる必要があります。 そのため、ワークロードの共同作成者のロールに加えて、このグループにはネットワーク リーダーのロールも必要です。
-   "*運用とメンテナンス グループ (CorpInfraOps または AppInfraOps)*" には、運用環境のワークロードを管理する責任があります。 このグループは、運用サブスクリプションのワークロードのサブスクリプション共同作成者である必要があります。 また、運用環境で潜在的な構成の問題を修正するために、運用環境のサブスクリプション共同作成者と中央ハブのサブスクリプション共同作成者のロールを持つ追加エスカレーション サポート チーム グループが必要かどうかを評価することもあります。

vDC は、ハブを管理する中央 IT グループ用に作成されたグループがワークロード レベルで対応するグループを持つように構成されます。 ハブ リソースを管理するだけでなくは、中央 IT グループのみが、サブスクリプションでの外部アクセスと最上位レベルのアクセス許可を制御することができます。 ただし、ワークロード グループは、中央 IT でそれぞれの VNet のリソースとアクセス許可を独立して制御できます。

vDC は、異なる基幹業務 (LOB) で複数のプロジェクトを安全にホストできるようにパーティション分割する必要があります。 すべてのプロジェクトには、異なる分離環境 (開発、UAT、運用) が必要です。 これらの環境ごとに Azure サブスクリプションを分けると、自然な分離が提供されます。

[![5]][5]

上の図は、Azure のコンポーネントがデプロイされている組織のプロジェクト、ユーザー、グループ、環境の間の関係を示しています。

通常、IT の環境 (または階層) は、複数のアプリケーションがデプロイされて実行されるシステムです。 大規模な企業では、開発環境 (変更が行われてテストされる場所) と運用環境 (エンドユーザーが使うもの) が使われます。 これらの環境は分離され、多くの場合、その間に複数のステージング環境があり、段階的にデプロイ (ロールアウト)、テスト、および問題が発生した場合のロールバックを行うことができます。 デプロイ アーキテクチャは大きく異なりますが、通常、開発 (DEV) で始まって運用 (PROD) で終わる基本的なプロセスは同じです。

この種の多階層環境の一般的なアーキテクチャは、DevOps (開発とテスト)、UAT (ステージング)、および運用環境で構成されます。 組織では、1 つまたは複数の Azure AD テナントを利用して、これらの環境に対するアクセスと権限を定義できます。 前の図では、DevOps および UAT 用と運用専用の 2 つ異なる Azure AD テナントが使われている場合が示されています。

異なる Azure AD テナントが存在すると、必然的に環境間が分離されます。 異なる AD テナントにアクセスするために異なる URI を使って認証する必要のある同じユーザー グループ (たとえば、中央 IT) は、プロジェクトの DevOps または運用環境のロールまたはアクセス許可を変更します。 異なる環境にアクセスするために異なるユーザー認証が存在すると、人的エラーによって起こりうる停止や他の問題が減ります。

#### <a name="component-type-infrastructure"></a>コンポーネントの種類: インフラストラクチャ
このコンポーネントの種類には、ほとんどのサポート インフラストラクチャが存在します。 また、中央 IT、セキュリティ、コンプライアンスのチームが最も多くの時間を費やす場所でもあります。

[![6]][6]

インフラストラクチャ コンポーネントは、vDC のさまざまなコンポーネント間の相互接続を提供し、ハブとスポークの両方に存在します。 インフラストラクチャ コンポーネントを管理および保守する責任は、通常、中央 IT およびセキュリティ チームに割り当てられます。

IT インフラストラクチャ チームの主要なタスクの 1 つは、企業全体にわたって一貫した IP アドレス スキーマを保証することです。 vDC に割り当てられたプライベート IP アドレス空間は、一貫性があり、オンプレミスのネットワークで割り当てられたプライベート IP アドレスと重複していない必要があります。

オンプレミスのエッジ ルーター上または Azure 環境内の NAT は、IP アドレスの競合を回避できますが、インフラストラクチャ コンポーネントが複雑になります。 管理の簡単さが vDC の主な目標の 1 つなので、NAT を使って IP の問題を処理することは推奨されるソリューションではありません。

インフラストラクチャ コンポーネントには次の機能が含まれています。

-   [**ID とディレクトリ サービス**][AAD]。 Azure のすべてのリソース種類へのアクセスは、ディレクトリ サービスに格納された ID によって制御されます。 ディレクトリ サービスは、ユーザーのリストだけでなく、特定の Azure サブスクリプション内のリソースへのアクセス権も格納しています。 これらのサービスは、クラウドのみに存在することも、Active Directory に格納されたオンプレミスの ID と同期することもできます。
-   [**Virtual Network**][VPN]。 Virtual Network は、vDC の主要なコンポーネントの 1 つであり、Azure プラットフォーム上にトラフィックの分離境界を作成できるようにします。 Virtual Network は、1 つまたは複数の仮想ネットワーク セグメントで構成され、それぞれが特定の IP ネットワーク プレフィックス (サブネット) を持ちます。 Virtual Network では、IaaS 仮想マシンと PaaS サービスがプライベート通信を確立できる、内部の境界領域が定義されています。 ある仮想ネットワーク内のVM (および PaaS サービス) と異なる仮想ネットワーク内の VM (および PaaS サービス) は、両方の仮想ネットワークが同じ顧客によって同じサブスクリプション下で作成された場合でも、直接通信することはできません。 分離は、顧客の VM と通信が仮想ネットワーク内でプライベートであることを保証する重要な特性です。
-   [**UDR**][UDR]。 Virtual Network 内のトラフィックは、システム ルーティング テーブルに基づいて既定でルーティングされます。 ユーザー定義ルートはカスタム ルーティング テーブルであり、ネットワーク管理者はそれを 1 つまたは複数のサブネットに関連付けることで、システム ルーティング テーブルの動作を上書きし、仮想ネットワーク内の通信パスを定義することができます。 UDR が存在すると、スポークからのエグレス トラフィックが特定のカスタム VM を通過し、ネットワーク仮想アプライアンスとロード バランサーがハブとスポークに存在することが保証されます。
-   [**NSG**][NSG]。 ネットワーク セキュリティ グループは、IP 送信元、IP 送信先、プロトコル、IP 送信元ポート、および IP 送信先ポートのフィルタリングとして動作するセキュリティ規則のリストです。 NSG は、サブネットと、Azure VM に関連付けられた仮想 NIC カードの、どちらか一方または両方に適用できます。 NSG は、ハブとスポークに正しいフロー制御を実装するうえで不可欠です。 NSG によって提供されるセキュリティのレベルは、どのポートをどのような目的で開くかによって決まります。 お客様は、IPtables や Windows ファイアウォールなどのホストベースのファイアウォールで、VM ごとの追加フィルターを適用する必要があります。
-   [**DNS**][DNS]。 vDC の VNet 内のリソースの名前解決は、DNS によって提供されます。 Azure は、 [パブリック][DNS]と[プライベート][PrivateDNS]の両方の名前解決に DNS サービスを提供します。 プライベート ゾーンは、仮想ネットワーク内での名前解決と仮想ネットワーク間での名前解決を両方提供します。 プライベート ゾーンは、同じリージョンの複数の仮想ネットワークをまたぐだけでなく、複数のリージョンおよびサブスクリプションをまたぐことができます。 パブリック解決の場合、Azure DNS は、DNS ドメインのホスティング サービスであり、Microsoft Azure インフラストラクチャを使用した名前解決を提供します。 Azure でドメインをホストすることで、その他の Azure サービスと同じ資格情報、API、ツール、課金情報を使用して DNS レコードを管理できます。
-   [**サブスクリプション][SubMgmt]と[リソース グループ管理][RGMgmt]**。 サブスクリプションでは、Azure にリソースの複数のグループを作成する自然な境界が定義されています。 サブスクリプション内のリソースは、リソース グループと呼ばれる論理コンテナーにまとめられています。 リソース グループは、vDC のリソースを整理するための論理グループを表します。
-   [**RBAC**][RBAC]。 RBAC を使うと、組織のロールと特定の Azure リソースにアクセスするための権限をマップすることができ、ユーザーをアクションの特定のサブセットのみに制限することができます。 RBAC では、関連するスコープ内のユーザー、グループ、アプリケーションに適切なロールを割り当てることで、アクセス権を付与できます。 ロール割り当てのスコープには、Azure サブスクリプション、リソース グループ、または単独のリソースを指定できます。 RBAC では、アクセス許可を継承できます。 親スコープでロールが割り当てられると、その親に含まれる子へのアクセス権も付与されます。 RBAC を使って、職務を分離し、職務に必要なアクセス許可のみをユーザーに付与することができます。 たとえば、RBAC を使って、ある従業員にはサブスクリプションで仮想マシンを管理できるようにし、他の従業員にも同じサブスクリプション内で SQL DB を管理できるようにします。
-   [**VNet ピアリング**][VNetPeering]。 vDC のインフラストラクチャの作成に使われる基本的な機能は、VNet ピアリングです。これは、Azure データ センターのネットワークを介して、あるいはリージョンをまたがる Azure の世界規模のバックボーンを使用して、同じリージョンの 2 つの仮想ネットワーク (VNet) を接続するメカニズムです。

#### <a name="component-type-perimeter-networks"></a>コンポーネントの種類: 境界ネットワーク
[境界ネットワーク][DMZ] コンポーネント (DMZ ネットワークとも呼ばれます) を使うと、オンプレミス ネットワークまたは物理データ センター ネットワークとのネットワーク接続、およびインターネットとの間の双方向の接続を提供できます。 このコンポーネントは、ネットワークおよびセキュリティ チームが最も多くの時間を費やす場所でもあります。

受信パケットは、スポークのバックエンド サーバーに到達するまでに、ハブのセキュリティ アプライアンス (ファイアウォール、IDS、IPS など) を通過する必要があります。 また、ワークロードからインターネットへのパケットも、ネットワークから送信される前に、ポリシーの適用、検査、監査を行うために境界ネットワーク内のセキュリティ アプライアンスを通過する必要があります。

境界ネットワーク コンポーネントは、次の機能を提供します。

-   [Virtual Network][VNet]、[UDR][UDR]、[NSG][NSG]
-   [ネットワーク仮想アプライアンス][NVA]
-   [ロード バランサー][ALB]
-   [Application Gateway][AppGW] / [WAF][WAF]
-   [パブリック IP][PIP]

通常、中央 IT チームとセキュリティ チームには、境界ネットワークの要件を定義して運用する責任があります。

[![7]][7]

上の図は、インターネットとオンプレミス ネットワークにアクセスする 2 つの境界の適用を示しており、どちらもハブに存在します。 単一のハブでは、Web アプリケーション ファイアウォール (WAF) およびファイアウォールの複数のファームを使って、多数の LOB をサポートするようにインターネットへの境界ネットワークを拡張できます。

[**Virtual Network**][VNet] 通常、ハブは、複数のサブネットを含む VNet 上に構築され、NVA、WAF、Azure Application Gateway を使ってインターネットとの間でやり取りされる トラフィックをフィルター処理および検査するさまざまな種類のサービスをホストします。

[**UDR**][UDR] UDR を使うと、ファイアウォール、IDS/IPS、その他の仮想アプライアンスをデプロイし、これらのセキュリティ アプライアンスを介してネットワーク トラフィックをルーティングすることで、セキュリティ境界ポリシーを適用、監査、検査することができます。 UDR はハブとスポークのどちらにでも作成でき、vDC によって使われる特定のカスタム VM、ネットワーク仮想アプライアンス、ロード バランサーをトラフィックが通過することを保証します。 スポーク内に存在する VM から生成されたトラフィックが正しい仮想アプライアンスに転送されることを保証するには、次ホップとして内部ロード バランサーのフロントエンド IP アドレスを設定することで、スポークのサブネットに UDR を設定する必要があります。 内部ロード バランサーは、内部トラフィックを仮想アプライアンス (ロード バランサーのバックエンド プール) に分散させます。

[![8]][8]

[**ネットワーク仮想アプライアンス**][NVA] ハブでは、インターネットにアクセスできる境界ネットワークは、ファイアウォールや Web アプリケーション ファイアウォール (WAF) のファームによって管理されるのが普通です。

異なる LOB は一般的に多くの Web アプリケーションを使い、これらのアプリケーションをさまざまな脆弱性および悪用の可能性によって損なわれる傾向があります。 Web アプリケーション ファイアウォールは、一般的なファイアウォールより詳しく Web アプリケーション (HTTP/HTTPS) に対する攻撃を検出するために使われる特殊な種類の製品です。 従来のファイアウォール テクノロジと比較すると、WAF は脅威から内部 Web サーバーを保護するための特定の機能セットを備えています。

ファイアウォール ファームは同じ共通管理下で連携して動作するファイアウォールのグループであり、スポークでホストされているワークロードを保護し、オンプレミス ネットワークへのアクセスを制御する一連のセキュリティ規則を持っています。 ファイアウォール ファームは WAF ほど特化したソフトウェアではありませんが、送信および受信のあらゆる種類のトラフィックをフィルター処理して検査する広範なアプリケーション スコープを備えています。 ファイアウォール ファームは、通常、Azure Marketplace で入手できるネットワーク仮想アプライアンス (NVA) によって Azure に実装されます。

インターネットから送信されるトラフィックとオンプレミスから送信されるトラフィックには異なる NVA のセットを使うことをお勧めします。 両方にただ 1 つの NVA セットを使うと、2 つのネットワーク トラフィック セットの間にセキュリティ境界が提供されないため、セキュリティ リスクになります。 異なる NVA を使うと、セキュリティ規則のチェックの複雑さが軽減され、規則と受信ネットワーク要求の対応が明確になります。

ほとんどの大企業は、複数のドメインを管理しています。 Azure DNS を使って、特定のドメインの DNS レコードをホストできます。 たとえば、Azure 外部ロード バランサー (または WAF) の仮想 IP アドレス (VIP) を、Azure DNS レコードの A レコードに登録できます。

[**Azure Load Balancer**][ALB] Azure Load Balancer が提供する高可用性レイヤー 4 (TCP、UDP) サービスは、負荷分散セットで定義されているサービス インスタンス間に受信トラフィックを分散できます。 フロントエンド エンドポイント (パブリック IP エンドポイントまたはプライベート IP エンドポイント) からロード バランサーに送信されたトラフィックは、アドレス変換をして、またはしないで、バックエンド IP アドレス プール (例: ネットワーク仮想アプライアンスまたは VM) のセットに再配信できます。

Azure Load Balancer は、さまざまなサーバー インスタンスの正常性をプローブすることもでき、プローブが応答に失敗した場合、ロード バランサーは異常なインスタンスへのトラフィック送信を停止します。 vDC では、外部ロード バランサーがハブ (たとえば、NVA へのトラフィックの分散) とスポーク (多階層アプリケーションの異なる VM 間へのトラフィックの分散などのタスクを実行するため) に存在します。

[**Application Gateway**][AppGW] Microsoft Azure Application Gateway は、アプリケーション配信コントローラー (ADC) をサービスとして提供する専用仮想アプライアンスで、さまざまなレイヤー 7 負荷分散機能をアプリケーションで利用できるようにします。 これにより、CPU を集中的に使用する SSL 終了を Application Gateway にオフロードし、Web ファームの生産性を最適化できます。 また、着信トラフィックのラウンド ロビン分散、Cookie ベースのセッション アフィニティ、URL パス ベースのルーティング、単一の Application Gateway の背後で複数の Web サイトをホストする機能など、その他のレイヤー 7 ルーティング機能も用意されています。 アプリケーション ゲートウェイの WAF SKU の一部として、Web アプリケーション ファイアウォール (WAF) も提供されます。 この SKU は、一般的な Web の脆弱性や悪用から Web アプリケーションを保護します。 Application Gateway は、インターネット接続ゲートウェイ、または内部的にのみ使用されるゲートウェイのいずれかとして構成できるほか、この両方を組み合わせて使用することも可能です。 

[**パブリック IP**][PIP] Azure の一部の機能を使うと、サービス エンドポイントをパブリック IP アドレスに関連付けて、インターネットからリソースにアクセスできるようにすることができます。 このエンドポイントでは、ネットワーク アドレス変換 (NAT) を使って、トラフィックを Azure 仮想ネットワークの内部アドレスとポートにルーティングします。 これは、外部トラフィックが仮想ネットワークに到達するための主な経路です。 パブリック IP アドレスは、仮想ネットワークに渡されるトラフィックと、そのトラフィックが仮想ネットワークのどこでどのように変換されるかを決定するために構成できます。

#### <a name="component-type-monitoring"></a>コンポーネントの種類: 監視
監視コンポーネントは、他のすべてのコンポーネントの種類からの可視性とアラートを提供します。 すべてのチームは、アクセスできるコンポーネントとサービスに対する監視にアクセスできる必要があります。 一元的なヘルプ デスクまたは運用チームは、これらのコンポーネントによって提供されるデータへの統合アクセスが必要です。

Azure では、Azure がホストするリソースの動作を追跡するために、さまざまな種類のログ サービスと監視サービスが提供されています。 Azure でのワークロードのガバナンスと制御は、ログ データの収集だけでなく、報告された特定のイベントに基づいてアクションをトリガーする機能も基になっています。

[**Azure Monitor**][Monitor] - Azure には、監視領域において特定の役割やタスクを個別に実行するサービスが複数用意されています。 また、これらのサービスが組み合わされた包括的なソリューションを使用すれば、アプリケーションやそれらのサービスを支える Azure リソースからテレメトリを収集、分析し、それに基づいて対処できます。 また、オンプレミスの重要なリソースを監視して、ハイブリッド監視環境を構築することもできます。 アプリケーションの包括的な監視戦略を策定するための最初のステップは、利用可能なツールとデータの把握です。

Azure の主要なログの種類は次の 2 つです。

-   [**アクティビティ ログ**][ActLog] ("操作ログ" とも呼ばれます) では、Azure サブスクリプションのリソースに対して実行された操作を調査できます。 これらのログは、サブスクリプションのコントロールプレーン イベントを報告します。 すべての Azure リソースで監査ログが生成されます。

-   [**Azure 診断ログ**][DiagLog]は、リソースによって生成されるログであり、そのリソースの操作に関する豊富なデータを提供します。 これらのログの内容は、リソースの種類によって異なります。

[![9]][9]

vDC では、NSG ログの特に次の情報を追跡することが非常に重要です。

-   [**イベント ログ**][NSGLog]: MAC アドレスに基づいて VM とインスタンス ロールに適用される NSG ルールについての情報が提供されます。
-   [**カウンター ログ**][NSGLog]: トラフィックを拒否または許可するために各 NSG ルールが実行された回数を追跡します。

監査、スタティック分析、またはバックアップのために、すべてのログを Azure Storage アカウントに格納できます。 Azure Storage アカウントにログが保存されていると、ユーザーはさまざまな種類のフレームワークを使ってこのデータを取得、準備、分析、視覚化し、クラウド リソースの状態と正常性を報告できます。

大規模な企業は、オンプレミス システムの監視用に標準的なフレームワークを既に利用しているはずであり、そのフレームワークを拡張してクラウドのデプロイによって生成されたログを統合することができます。 すべてのログ記録をクラウド内の保持したい場合は、[LogAnalytics] が最適です。 Log Analytics はクラウドベースのサービスとして実装されるため、インフラストラクチャ サービスに最小限の投資をするだけで、すぐに稼働させることができます。 Log Analytics は、System Center Operations Manager などの System Center のコンポーネントと統合して、管理のための既存の投資をクラウドに拡張することもできます。

Log Analytics は、オペレーティング システム、アプリケーション、インフラストラクチャ クラウド コンポーネントによって生成されたログおよびパフォーマンス データを収集、関連付け、検索、操作するための、Azure のサービスです。 統合された検索およびカスタム ダッシュ ボードを使って、vDC のすべてのワークロードのすべてのレコードを分析するためのリアルタイムの運用インサイトを提供します。

OMS 内の[ネットワーク パフォーマンス モニター (NPM)][NPM] ソリューションは、Azure ネットワークとオンプレミスのネットワークの 1 つのビューを含む、ネットワークの詳細情報をエンド ツー エンドで提供できます。 ExpressRoute および公開サービス用の特定のモニター。

#### <a name="component-type-workloads"></a>コンポーネントの種類: ワークロード
ワークロード コンポーネントは、実際のアプリケーションとサービスが存在する場所です。 アプリケーション開発チームはここで最も多くの時間を費やします。

ワークロードの可能性は本当に無限です。 次に示すのは可能なワークロードの種類のほんの一部です。

**内部 LOB アプリケーション**

基幹業務アプリケーションは、企業の現在の経営にとって重要なコンピューター アプリケーションです。 LOB アプリケーションには、いくつかの一般的な特性があります。

-   **対話型**。 LOB アプリケーションは本質的に対話型であり、データを入力すると、結果/レポートが返されます。
-   **データ駆動**。 LOB アプリケーションは、データベースまたは他の記憶域に頻繁にアクセスするデータ集中的なアプリケーションです。
-   **統合**。 LOB アプリケーションは組織の内外の他のシステムとの統合を提供します。

**顧客向け Web サイト (インターネットまたは内部接続)** インターネットと対話するほとんどのアプリケーションは Web サイトです。 Azure は、IaaS VM 上または [Azure Web Apps][WebApps] サイト (PaaS) から Web サイトを実行する機能を提供します。 Azure Web Apps は VNet との統合をサポートし、vDC のスポークに Web アプリをデプロイできます。 社内向け Web サイトの場合、VNet 統合では、アプリケーション用にインターネット エンドポイントを公開する必要はありませんが、代わりにプライベート VNet からリソースのプライベートなインターネットではないルーティング可能アドレス経由でリソースを使うことができます。

**ビッグ データ/分析** データを膨大な量に拡張する必要がある場合、データベースが正しくスケールアップしないことがあります。 Hadoop テクノロジは、多数のノードで分散クエリを並列に実行するシステムを提供します。 ユーザーは、データ ワークロードを IaaS VM または PaaS ([HDInsight][HDI]) で実行することを選択できます。 HDInsight は、場所ベースの VNet へのデプロイをサポートし、vDC のスポーク内のクラスターにデプロイできます。

**イベントとメッセージ**
 [Azure Event Hubs][EventHubs] は、ハイパースケールのテレメトリ インジェスト サービスで、数百万のイベントを収集、変換、保存します。 分散型のストリーミング プラットフォームとして、遅延時間が短く、保持時間を設定可能なため、膨大な量のテレメトリを Azure に送信し、複数のアプリケーションからデータを読み込むことができます。 Event Hubs では、1 つのストリームでリアルタイム パイプラインとバッチ ベースのパイプラインの両方をサポートできます。

クライアントとサーバー間の非同期のブローカー メッセージングと構造化された先入れ先出し (FIFO) メッセージングおよびパブリッシュ/サブスクライブ機能を提供する [Azure Service Bus][ServiceBus] により、アプリケーションとサービスの間に信頼性の高いクラウド メッセージング サービスを実装できます。

[![10]][10]

### <a name="multiple-vdc"></a>複数の vDC
ここまでこの記事では、単一の vDC に注目し、回復力のある vDC に寄与する基本的なコンポーネントとアーキテクチャについて説明してきました。 Azure には、Azure Load Balancer、NVA、可用性セット、スケール セット、そして運用サービスに確実な SLA レベルを構築できるシステムに寄与する他のメカニズムなどの機能があります。

ただし、単一の vDC は単一のリージョン内でホストされ、そのリージョン全体に影響を与える大きな停止に対して脆弱です。 高い SLA を望むユーザーは、2 つ (またはそれ以上) の vDC に同じプロジェクトをデプロイして異なるリージョンに配置することで、サービスを保護する必要があります。

SLA に関する問題だけでなく、複数の vDC をデプロイすることに意味がある一般的なシナリオがいくつかあります。

-   リージョン/グローバルへの配置
-   ディザスター リカバリー
-   DC 間でトラフィックを転送するメカニズム

#### <a name="regionalglobal-presence"></a>リージョン/グローバルへの配置
Azure データ センターは世界中の多数のリージョンに存在します。 複数の Azure データ センターを選択するとき、ユーザーは地理的な距離と待機時間という関連する 2 つの要因を考慮する必要があります。 ユーザーは、vDC 間の地理的な距離および vDC とエンド ユーザーの間の距離を評価して、最適なユーザー エクスペリエンスを提供する必要があります。

vDC がホストされている Azure リージョンは、組織が運営される法的管轄によって確立された規制の要件に準拠している必要もあります。

#### <a name="disaster-recovery"></a>ディザスター リカバリー
ディザスター リカバリー計画の実装は、関連するワークロードの種類と、異なる vDC 間でワークロードの状態を同期する機能に強く関係します。 ほとんどのユーザーは、2 つの異なる vDC で実行するデプロイ間でアプリケーション データを同期し、高速のフェールオーバー メカニズムを実装することを望みます。 ほとんどのアプリケーションは待機時間の影響を受けやすく、データ同期がタイムアウトしたり遅延する可能性があります。

異なる vDC 内のアプリケーションの同期またはハートビート監視には、それらの間での通信が必要です。 異なるリージョン内の 2 つの vDC は、次の方法で接続できます。

-   VNet ピアリング - VNet ピアリングはリージョンをまたいでハブを接続できます
-   vDC ハブが同じ ExpressRoute 回線に接続されている場合、ExpressRoute のプライベート ピアリング
-   企業バックボーン経由で接続されている複数の ExpressRoute 回線と、ExpressRoute 回線に接続された vDC メッシュ
-   各 Azure リージョン内の vDC ハブ間のサイト間 VPN 接続

Microsoft バックボーン経由の通過では、高い帯域幅と一貫性のある待ち時間のため、VNet ピアリングまたは ExpressRoute の接続が通常は好ましいメカニズムです。

異なるリージョンに存在する 2 つ (またはそれ以上) の異なる vDC 間に分散されたアプリケーションを検証する簡単な方法はありません。 ユーザーは、ネットワーク認定テストを実行し、接続の待機時間と帯域幅を検証して、同期または非同期どちらのデータ レプリケーションが適切か、およびワークロードに対して最適な目標復旧時間 (RTO) を決定する必要があります。

#### <a name="mechanism-to-divert-traffic-between-dc"></a>DC 間でトラフィックを転送するメカニズム
ある DC が受信したトラフィックを別の DC に転送する効果的な方法の 1 つは、DNS に基づくものです。 [Azure Traffic Manager][TM] は、ドメイン ネーム システム (DNS) のメカニズムを使って、エンド ユーザー トラフィックを特定の vDC 内で最も適切なパブリック エンドポイントに転送します。 Traffic Manager は、プローブを使って異なる vDC のパブリック エンドポイントのサービスの正常性を定期的にチェックし、それらのエンドポイントで障害が発生した場合は、セカンダリ vDC に自動的にルーティングします。

Traffic Manager は、Azure のパブリック エンドポイントで動作し、たとえばトラフィックを制御して適切な vDC の Azure VM と Web Apps に転送するために使うことができます。 Traffic Manager は、Azure リージョン全体で障害が発生した場合でも回復力があり、複数の条件 (たとえば、特定の vDC のサービスの障害や、クライアントへのネットワーク待機時間が最低の vDC の選択など) に基づいて、異なる vDC 内のサービス エンドポイントに対するユーザー トラフィックの分散を制御することができます。

### <a name="conclusion"></a>まとめ
仮想データ センターは、クラウド リソースの使用を最大化し、コストを削減し、システムのガバナンスを簡素化するスケーラブルなアーキテクチャを Azure で作成する機能の組み合わせを使用する、クラウドにデータ センターを移行するためのアプローチです。 vDC の概念はハブ スポーク トポロジが基になっており、ハブで共通の共有サービスを提供し、スポークで特定のアプリケーション/ワークロードを実行できます。 vDC は、それぞれが固有のロールと責任のリストを持つ異なる部門 (中央 IT、DevOps、運用、メンテナンス) が共同作業する会社のロール構造と一致します。 vDC は、"リフト アンド シフト" 移行の要件を満たしますが、ネイティブなクラウド デプロイに対しても多くの利点を提供します。

## <a name="references"></a>参照
このドキュメントでは以下の機能について説明しました。 詳しくはリンクをクリックしてください。

| | | |
|-|-|-|
|ネットワーク機能|負荷分散|接続|
|[Azure Virtual Network][VNet]</br>[ネットワーク セキュリティ グループ][NSG]</br>[NSG ログ][NSGLog]</br>[ユーザー定義ルーティング][UDR]</br>[ネットワーク仮想アプライアンス][NVA]</br>[Public IP Addresses][PIP]</br>[DNS]|[Azure Load Balancer (L3) ][ALB]</br>[Application Gateway (L7) ][AppGW]</br>[Web アプリケーション ファイアウォール][WAF]</br>[Azure Traffic Manager][TM] |[VNet ピアリング][VNetPeering]</br>[仮想プライベート ネットワーク][VPN]</br>[ExpressRoute][ExR]
|ID</br>|監視</br>|ベスト プラクティス</br>|
|[Azure Active Directory][AAD]</br>[Multi-Factor Authentication][MFA]</br>[ロールベースのアクセス制御][RBAC]</br>[既定の AAD ロール][Roles] |[Azure Monitor][Monitor]</br>[アクティビティ ログ][ActLog]</br>[診断ログ][DiagLog]</br>[Microsoft Operations Management Suite][OMS]</br>[Network Performance Monitor][NPM]|[境界ネットワークのベスト プラクティス][DMZ]</br>[サブスクリプション管理][SubMgmt]</br>[リソース グループの管理][RGMgmt]</br>[Azure サブスクリプションの制限][Limits] |
|その他の Azure サービス|
|[Azure Web Apps][WebApps]</br>[HDInsights (Hadoop) ][HDI]</br>[Event Hubs][EventHubs]</br>[Service Bus][ServiceBus]|



## <a name="next-steps"></a>次の手順
 - vDC のハブとスポーク設計の基礎となるテクノロジである [VNet ピアリング][VNetPeering]について理解します
 - [AAD][AAD] を実装して [RBAC][RBAC] の調査を始めます
 - 組織の構造、要件、ポリシーを満たすサブスクリプションとリソースの管理モデルおよび RBAC モデルを開発します。 最も重要なアクティビティは計画です。 再編成、合併、新製品ラインなどの場合は、可能な限り計画してください。

<!--Image References-->
[0]: ./media/networking-virtual-datacenter/redundant-equipment.png "コンポーネントのオーバーラップの例" 
[1]: ./media/networking-virtual-datacenter/vdc-high-level.png "ハブとスポークの vDC の高度な例"
[2]: ./media/networking-virtual-datacenter/hub-spokes-cluster.png "ハブとスポークのクラスター"
[3]: ./media/networking-virtual-datacenter/spoke-to-spoke.png "スポーク間"
[4]: ./media/networking-virtual-datacenter/vdc-block-level-diagram.png "vDC のブロック レベルの図"
[5]: ./media/networking-virtual-datacenter/users-groups-subsciptions.png "ユーザー、グループ、サブスクリプション、プロジェクト"
[6]: ./media/networking-virtual-datacenter/infrastructure-high-level.png "インフラストラクチャの概要図"
[7]: ./media/networking-virtual-datacenter/highlevel-perimeter-networks.png "インフラストラクチャの概要図"
[8]: ./media/networking-virtual-datacenter/vnet-peering-perimeter-neworks.png "VNet ピアリングと境界ネットワーク"
[9]: ./media/networking-virtual-datacenter/high-level-diagram-monitoring.png "監視の概要図"
[10]: ./media/networking-virtual-datacenter/high-level-workloads.png "ワークロードの概要図"

<!--Link References-->
[Limits]: https://docs.microsoft.com/azure/azure-subscription-service-limits
[Roles]: https://docs.microsoft.com/azure/role-based-access-control/built-in-roles
[VNet]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview
[NSG]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg
[DNS]: https://docs.microsoft.com/azure/dns/dns-overview
[PrivateDNS]: https://docs.microsoft.com/azure/dns/private-dns-overview
[VNetPeering]: https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview 
[UDR]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: https://docs.microsoft.com/azure/role-based-access-control/overview
[MFA]: https://docs.microsoft.com/azure/multi-factor-authentication/multi-factor-authentication
[AAD]: https://docs.microsoft.com/azure/active-directory/active-directory-whatis
[VPN]: https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: https://docs.microsoft.com/azure/expressroute/expressroute-introduction 
[NVA]: https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/nva-ha
[SubMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-subscription-governance 
[RGMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview
[DMZ]: https://docs.microsoft.com/azure/best-practices-network-security
[ALB]: https://docs.microsoft.com/azure/load-balancer/load-balancer-overview
[PIP]: https://docs.microsoft.com/azure/virtual-network/resource-groups-networking#public-ip-address
[AppGW]: https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction
[WAF]: https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview
[Monitor]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/
[ActLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview
[NPM]: https://docs.microsoft.com/azure/log-analytics/log-analytics-network-performance-monitor
[WebApps]: https://docs.microsoft.com/azure/app-service/
[HDI]: https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview
[TM]: https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview
