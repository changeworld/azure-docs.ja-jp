---
title: Microsoft Azure FXT Edge Filer クラスター構成 - ノードの追加
description: Azure FXT Edge Filer ストレージ キャッシュにノードを追加する方法
author: ekpgh
ms.service: fxt-edge-filer
ms.topic: tutorial
ms.date: 06/20/2019
ms.author: rohogue
ms.openlocfilehash: 85ab9aaa3e184af7aa71a31eb3d8de1a20639c2a
ms.sourcegitcommit: 1c2659ab26619658799442a6e7604f3c66307a89
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/10/2019
ms.locfileid: "72254929"
---
# <a name="tutorial-add-cluster-nodes"></a>チュートリアル:クラスター ノードの追加 

新しい Azure FXT Edge Filer クラスターは、ノードが 1 つだけの状態で作成されます。 他の構成を行う前に、少なくとも 2 つ以上のノードを追加して高可用性を有効にする必要があります。 

このチュートリアルでは、クラスター ノードを追加して高可用性 (HA) 機能を有効にする方法について説明します。 

このチュートリアルでは、次の事項について説明します。 

> [!div class="checklist"]
> * FXT クラスターにノードを追加する方法
> * HA を有効にする方法

このチュートリアルの手順は、完了まで約 45 分かかります。

このチュートリアルを開始する前に、追加するノードの電源をオンにし、ノードの[初期パスワードを設定](fxt-node-password.md)しておいてください。 

## <a name="1-load-the-cluster-nodes-page"></a>1.[Cluster Nodes] (クラスター ノード) ページを読み込む

Web ブラウザーで、クラスターのコントロール パネルを開き、管理者としてサインインします。 (詳細な手順は、概要記事の「[[設定] ページを開く](fxt-cluster-create.md#open-the-settings-pages)」にあります。)

コントロール パネルが開くと、 **[ダッシュボード]** タブが表示されます。 

![コントロール パネルのダッシュボード (最初のタブ)](media/fxt-cluster-config/dashboard-1-node.png)

この画像は、新しく作成されたクラスターのダッシュボードを示しており、ノードは 1 つです。

## <a name="2-locate-the-node-to-add"></a>2.追加するノードを特定する

ノードを追加するには、 **[設定]** タブをクリックし、 **[クラスター]** セクションで **[FXT Nodes]\(FXT ノード\)** ページを選択します。

![コントロール パネルの [設定] タブ (2 番目のタブ) で [クラスター] > [FXT Nodes] (FXT ノード) を読み込んだ状態](media/fxt-cluster-config/settings-fxt-nodes.png)

**[FXT Nodes - Unjoined]\(FXT ノード - 未参加\)** 一覧には、すべての未割り当てノードが一覧表示されます (ほとんどのデータ センターでは数件しかありません)。 クラスターに追加する FXT ノードを探します。

> [!Tip] 
> 目的のノードが **[未参加]** 一覧に見つからない場合、ノードが次の要件を満たしていることを確認してください。
> 
> * 電源がオンで、[root パスワードが設定](fxt-node-password.md)されている。
> * アクセスできるネットワークに接続されている。 VLAN を使用する場合、クラスターと同じ VLAN 上にある必要があります。
> * Bonjour プロトコルで検出できる。 
>
>   ファイアウォールの設定によっては、Bonjour が使用する TCP/UDP ポートがブロックされ、FXT オペレーティング システムが自動的にノードを検出できない場合があります。
> 
> 追加したいノードが一覧にない場合、次の解決策を試してください。 
> 
> * **[Manual Discover]\(手動検出\)** ボタンをクリックして、IP アドレスで探します。
> 
> * 一時的な IP アドレスを手動で割り当てます。 これはまれですが、タグが付けられた VLAN を使用していてノードが正しいネットワーク上にない場合や、自己割り当て IP アドレスがネットワークで許可されていない場合に必要になることがあります。 このドキュメントの旧版の指示に従って、[手動で静的 IP アドレスを設定](https://azure.github.io/Avere/legacy/create_cluster/4_8/html/static_ip.html)してください。

一覧にはノード名、IP アドレス、ソフトウェアのバージョン、および適格性状態が表示されます。 **[Status]\(状態\)** 列は通常、"Wants to join" (参加希望) と表示されているか、ノードがクラスターに参加できない原因であるシステムまたはハードウェアの問題の説明が表示されています。

**[Actions]\(操作\)** 列には、ノードをクラスターに追加したり、そのソフトウェアを更新したりするためのボタンがあります。 更新ボタンをクリックすると、クラスターに既に存在しているノードと一致するソフトウェアのバージョンが自動的にインストールされます。

クラスターのすべてのノードで同じバージョンの OS を使用する必要がありますが、ノードを追加する前にソフトウェアを更新する必要はありません。 **[Allow to Join]\(参加を許可\)** ボタンをクリックした後、クラスター参加プロセスによって、クラスター上のバージョンに一致する OS ソフトウェアが自動的に確認され、インストールされます。

このページのオプションの詳細については、クラスター構成ガイドの[**クラスター** > **FXT ノード**](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_fxt_nodes.html)に関する項目を参照してください。

## <a name="3-click-the-allow-to-join-button"></a>3.[Allow to Join] (参加を許可) ボタンをクリックする 

追加するノードの **[Actions]\(操作\)** 列にある **[Allow To Join]\(参加を許可\)** * ボタンをクリックします。

ボタンをクリックした後、クラスターへの追加に備えてソフトウェアが更新され、ノードの状態が変わる場合があります。 

次の画像は、クラスターへの参加処理中のノードを示しています (ほとんどの場合、追加される前に OS の更新プログラムを取得します)。 クラスターへの追加処理中のノードについては、 **[Actions]\(操作\)** 列にボタンが表示されません。

![ノード テーブルの 1 行。ノードの名前、IP アドレス、ソフトウェアのバージョン、"Allowed to join" (参加が許可されました) メッセージが表示され、最後の列は空白](media/fxt-cluster-config/node-join-in-process.png)

しばらくすると、 **[FXT Nodes]\(FXT ノード\)** 設定ページの上部にあるクラスター ノードの一覧に新しいノードが表示されます。 

このプロセスを繰り返して、他のノードをクラスターに追加します。 別のノードを開始する前に、あるノードがクラスターへの参加を終了するまで待つ必要はありません。

## <a name="enable-high-availability"></a>高可用性を有効化する

クラスターに 2 番目のノードを追加した後、高可用性機能が構成されていないという警告メッセージがコントロール パネルのダッシュボードに表示される場合があります。 

高可用性 (HA) を有効にすると、クラスター ノードの 1 つがダウンしても他のノードがそれを埋め合わせることができます。 HA は既定では有効化されません。

![[ダッシュボード] タブの [Conditions] (状況) テーブルに表示された "The cluster has more than one node, but HA is not enabled ..." (クラスターに複数のノードがありますが HA が有効ではありません...) というメッセージ](media/fxt-cluster-config/no-ha-2-nodes.png)

> [!Note] 
> クラスターのノードが 3 つ以上になるまでは HA を有効にしないでください。

HA を有効にするには、次の手順に従います。 

1. **[設定]** タブの **[クラスター]** セクションで **[高可用性]** ページを読み込みます。

   ![HA 構成ページ ([クラスター] > [高可用性])。 [Enable HA] (HA を有効にする) チェック ボックスが最上部に、送信ボタンが最下部にある。](media/fxt-cluster-config/enable-ha.png)

2. **[Enable HA]\(HA を有効にする\)** チェック ボックスをオンにして **[Submit]\(送信\)** ボタンをクリックします。 

HA が有効であることを確認するための警告が **[ダッシュボード]** に表示されます。

![ダッシュボードのテーブルに表示された "HA is now fully configured" (HA が完全に構成されました) というメッセージ](media/fxt-cluster-config/ha-configured-alert.png)


## <a name="next-steps"></a>次の手順

すべてのノードをクラスターに追加した後、セットアップの続きとして、クラスターの長期的な記憶域を構成します。

> [!div class="nextstepaction"]
> [Add back-end storage and set up the virtual namespace](fxt-add-storage.md) (バックエンド ストレージを追加して仮想名前空間を設定する)