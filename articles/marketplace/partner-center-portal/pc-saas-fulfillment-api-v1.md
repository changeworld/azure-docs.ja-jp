---
title: SaaS Fulfillment API v1 | Azure Marketplace
description: 関連付けられている Fulfillment v1 API を使用して Azure Marketplace で SaaS オファーを作成し、管理する方法について説明します。
author: dsindona
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: reference
ms.date: 05/23/2019
ms.author: dsindona
ROBOTS: NOINDEX
ms.openlocfilehash: 3ec8373288a2ea5809ee5d349c52c57051586035
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2020
ms.locfileid: "80288344"
---
# <a name="saas-fulfillment-apis-version-1-deprecated"></a>SaaS Fulfillment API バージョン 1 (非推奨)

この記事では、API を使用して SaaS オファーを作成する方法について説明します。 API は REST メソッドとエンドポイントで構成され、Azure を通じた販売を選択した場合に、SaaS オファーへのサブスクリプションを許可するために必要です。  

> [!WARNING]
> この最初のバージョンの SaaS Fulfillment API は非推奨になっています。代わりに [SaaS Fulfillment API V2](./pc-saas-fulfillment-api-v2.md) をご利用ください。  この最初のバージョンの API は、既存のパブリッシャーにサービスを提供するためにのみ、現在も維持されています。 

SaaS サービスと Azure の統合を支援するために、以下の API シリーズが用意されています。

-   解決
-   購入
-   Convert
-   サブスクライブ解除


## <a name="api-methods-and-endpoints"></a>API メソッドとエンドポイント

以降のセクションでは、SaaS オファーのサブスクリプションを有効にするために使用できる API メソッドとエンドポイントについて説明します。


### <a name="marketplace-api-endpoint-and-api-version"></a>Marketplace API エンドポイントと API バージョン

Azure Marketplace API のエンドポイントは、`https://marketplaceapi.microsoft.com` です。

現在の API バージョンは、`api-version=2017-04-15` です。


### <a name="resolve-subscription"></a>サブスクリプションの解決

解決エンドポイントでの POST アクションにより、ユーザーはマーケットプレース トークンを永続的なリソース ID に解決できます。  リソース ID は、SAAS サブスクリプションの一意の識別子です。 

ユーザーが ISV の Web サイトにリダイレクトされると、URL に、クエリ パラメーターのトークンが含まれます。 ISV は、このトークンを使用し、それを解決するための要求を行うことが期待されます。 応答には、リソースの一意の SAAS サブスクリプション ID、名前、オファーID、およびプランが含まれます。 このトークンは、1 時間だけ有効です。

*Request*

**POST**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/resolve?api-version=2017-04-15**

|  **パラメーター名** |     **説明**                                      |
|  ------------------ |     ---------------------------------------------------- |
|  api-version        |  この要求で使用する操作のバージョン。   |
|  |  |


*ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                                                                                                                                                  |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | いいえ           | クライアントからの要求を追跡するための一意の文字列値 (GUID を推奨)。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。  |
| x-ms-correlationid | いいえ           | クライアントでの操作に対する一意の文字列値。 このフィールドによって、クライアント操作からのすべてのイベントがサーバー側のイベントに関連付けられます。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| Content-type       | はい          | `application/json`                                        |
| authorization      | はい          | JSON Web トークン (JWT) ベアラー トークン。                    |
| x-ms-marketplace-token| はい| ユーザーが Azure から SaaS ISV の Web サイトにリダイレクトされるときの、URL のトークン クエリ パラメーター。 **注:** このトークンは 1 時間のみ有効です。 また、ブラウザーからのトークン値は、使用前に URL によってデコードされます。|
|  |  |  |
  

*応答本文*

``` json
{
    "id": "",
    "subscriptionName": "",
    "offerId": "",
    "planId": "",
}
```

| **パラメーター名** | **データの種類** | **説明**                       |
|--------------------|---------------|---------------------------------------|
| id                 | String        | SaaS サブスクリプションの ID。          |
| subscriptionName| String| SaaS サービスへのサブスクライブ中に、Azure でユーザーによって設定される SaaS サブスクリプションの名前。|
| OfferId            | String        | ユーザーがサブスクライブするオファー ID。 |
| planId             | String        | ユーザーがサブスクライブするプラン ID。  |
|  |  |  |


*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                                         |
|----------------------|--------------------| --------------------------------------------------------------------------------------- |
| 200                  | `OK`                 | トークンが正常に解決されました。                                                            |
| 400                  | `BadRequest`         | 必須のヘッダーがないか、無効な api-version が指定されています。 トークンが正しくない形式であるか期限切れになっているため、トークンの解決に失敗しました (トークンは生成後 1 時間のみ有効です)。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                                 |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                                |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。後で再試行してください。                                        |
|  |  |  |


*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、この値はサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 この ID は任意の調整に使用されます。 |
| Retry-After        | いいえ           | この値は、429 応答に対してのみ設定されます。                                                                   |
|  |  |  |


### <a name="subscribe"></a>購入

サブスクライブ エンドポイントを使用すると、ユーザーは指定したプランの SaaS サービスへのサブスクリプションを開始し、商取引システムで課金を有効にすることができます。

**PUT**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | Resolve API を使用してトークンを解決した後に取得される SaaS サブスクリプションの一意の ID。                              |
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

|  **ヘッダー キー**        | **必須** |  **説明**                                                  |
| ------------------     | ------------ | --------------------------------------------------------------------------------------- |
| x-ms-requestid         |   いいえ         | クライアントからの要求を追跡するための一意の文字列値 (GUID を推奨)。 これを指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| x-ms-correlationid     |   いいえ         | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 これを指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| If-Match/If-None-Match |   いいえ         |   強力な検証ツールの ETag 値。                                                          |
| content-type           |   はい        |    `application/json`                                                                   |
|  authorization         |   はい        |    JSON Web トークン (JWT) ベアラー トークン。                                               |
| x-ms-marketplace-session-mode| いいえ | SaaS オファーへのサブスクライブ中にドライ ラン モードを有効にするフラグ。 設定すると、サブスクリプションは課金されません。 これは、ISV テスト シナリオで役に立ちます。 **"dryrun"** に設定してください|
|  |  |  |

*本文*

``` json
{
    "lanId": "",
}
```

| **要素名** | **データの種類** | **説明**                      |
|------------------|---------------|--------------------------------------|
| planId           | (必須) 文字列        | ユーザーがサブスクライブする SaaS サービスのプラン ID。  |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 指定されたプランに対して受け取った SaaS サブスクリプションのアクティブ化。                   |
| 400                  | `BadRequest`         | 必要なヘッダーがないか、JSON の本体の形式が正しくありません。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                   |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません                                  |
| 409                  | `Conflict`           | サブスクリプションで別の操作が進行中です。                     |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                  |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。後で再試行してください。                          |
|  |  |  |

202 応答の場合は、"Operation-location" ヘッダーで要求操作の状態を追跡します。 認証は、他の Marketplace API と同じです。

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、この値はサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 この値は、任意の調整に使用されます。 |
| Retry-After        | はい          | クライアントが状態を確認できる間隔。                                                       |
| Operation-Location | はい          | 操作状態を取得するリソースへのリンク。                                                        |
|  |  |  |

### <a name="change-plan-endpoint"></a>変更プラン エンドポイント

変更エンドポイントを使用すると、ユーザーは現在サブスクライブしているプランを新しいプランに変換することができます。

**PATCH**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS サブスクリプションの ID。                              |
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

| **ヘッダー キー**          | **必須** | **説明**                                                                                                                                                                                                                  |
|-------------------------|--------------|---------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid          | いいえ           | クライアントからの要求を追跡するための一意の文字列値。 GUID をお勧めします。 これを指定しないと、値が生成され、応答ヘッダーに指定されます。   |
| x-ms-correlationid      | いいえ           | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 これを指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| If-Match /If-None-Match | いいえ           | 強力な検証ツールの ETag 値。                              |
| content-type            | はい          | `application/json`                                        |
| authorization           | はい          | JSON Web トークン (JWT) ベアラー トークン。                    |
|  |  |  |

*本文*

```json
{
    "planId": ""
}
```

|  **要素名** |  **データの種類**  | **説明**                              |
|  ---------------- | -------------   | --------------------------------------       |
|  planId           |  (必須) 文字列         | ユーザーがサブスクライブする SaaS サービスのプラン ID。          |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 指定されたプランに対して受け取った SaaS サブスクリプションのアクティブ化。                   |
| 400                  | `BadRequest`         | 必要なヘッダーがないか、JSON の本体の形式が正しくありません。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                   |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません                                  |
| 409                  | `Conflict`           | サブスクリプションで別の操作が進行中です。                     |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                  |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。後で再試行してください。                          |
|  |  |  |

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、この値はサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 この値は、任意の調整に使用されます。 |
| Retry-After        | はい          | クライアントが状態を確認できる間隔。                                                       |
| Operation-Location | はい          | 操作状態を取得するリソースへのリンク。                                                        |
|  |  |  |

### <a name="delete-subscription"></a>サブスクリプションを削除する

サブスクライブ エンドポイントでの DELETE アクションにより、ユーザーは特定の ID のサブスクリプションを削除することができます。

*Request*

**DELETE**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS サブスクリプションの ID。                              |
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                                                                                                                                                  |
|--------------------|--------------| ----------------------------------------------------------|
| x-ms-requestid     | いいえ           | クライアントからの要求を追跡するための一意の文字列値。 GUID をお勧めします。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。                                                           |
| x-ms-correlationid | いいえ           | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 これを指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| authorization      | はい          | JSON Web トークン (JWT) ベアラー トークン。                    |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                           |
|----------------------|--------------------|---------------------------------------------------------------------------|
| 202                  | `Accepted`           | 指定されたプランに対して受け取った SaaS サブスクリプションのアクティブ化。                   |
| 400                  | `BadRequest`         | 必要なヘッダーがないか、JSON の本体の形式が正しくありません。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                   |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません                                  |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                  |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。 後で再試行してください。                          |
|  |  |  |

202 応答の場合は、"Operation-location" ヘッダーで要求操作の状態を追跡します。 認証は、他の Marketplace API と同じです。

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、これはサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 これは、任意の調整に使用されます。 |
| Retry-After        | はい          | クライアントが状態を確認できる間隔。                                                       |
| Operation-Location | はい          | 操作状態を取得するリソースへのリンク。                                                        |
|   |  |  |

### <a name="get-operation-status"></a>操作状態の取得

このエンドポイントを使用すると、ユーザーはトリガーされた非同期操作 (プランのサブスクライブ、サブスクライブ解除、変更) の状態を追跡できます。

*Request*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/operations/ *{operationId}* ?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| operationId         | トリガーされた操作の一意の ID。                |
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                                                                                                                                                  |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | いいえ           | クライアントからの要求を追跡するための一意の文字列値。 GUID をお勧めします。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。   |
| x-ms-correlationid | いいえ           | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。  |
| authorization      | はい          | JSON Web トークン (JWT) ベアラー トークン。                    |
|  |  |  | 

*応答本文*

```json
{
    "id": "",
    "status": "",
    "resourceLocation": "",
    "created": "",
    "lastModified": ""
}
```

| **パラメーター名** | **データの種類** | **説明**                                                                                                                                               |
|--------------------|---------------|-------------------------------------------------------------------------------------------|
| id                 | String        | 操作の ID。                                                                      |
| status             | 列挙型          | 操作の状態。`In Progress`、`Succeeded`、`Failed` のいずれか。          |
| resourceLocation   | String        | 作成または変更されたサブスクリプションへのリンク。 これは、POST 操作の更新された状態をクライアントが取得するために役立ちます。 この値は、`Unsubscribe` 操作には設定されません。 |
| created            | DateTime      | 操作の作成時刻 (UTC)。                                                           |
| lastModified       | DateTime      | 操作に対する最終更新 (UTC)。                                                      |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | GET 要求が正常に解決され、本文に応答が含まれています。    |
| 400                  | `BadRequest`         | 必須のヘッダーがないか、無効な api-version が指定されました。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                      |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません。                                     |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                     |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。後で再試行してください。                             |
|  |  |  |

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、これはサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 これは、任意の調整に使用されます。 |
| Retry-After        | はい          | クライアントが状態を確認できる間隔。                                                       |
|  |  |  |

### <a name="get-subscription"></a>サブスクリプションの取得

サブスクライブ エンドポイントでの GET アクションにより、ユーザーは特定のリソース ID のサブスクリプションを取得することができます。

*Request*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions/ *{subscriptionId}* ?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| subscriptionId      | SaaS サブスクリプションの ID。                              |
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                           |
|--------------------|--------------|-----------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | いいえ           | クライアントからの要求を追跡するための一意の文字列値 (GUID を推奨)。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。                                                           |
| x-ms-correlationid | いいえ           | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| authorization      | はい          | JSON Web トークン (JWT) ベアラー トークン。                                                                    |
|  |  |  |

*応答本文*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **パラメーター名**     | **データの種類** | **説明**                               |
|------------------------|---------------|-----------------------------------------------|
| id                     | String        | Azure の SaaS サブスクリプション リソースの ID。    |
| offerId                | String        | ユーザーがサブスクライブするオファー ID。         |
| planId                 | String        | ユーザーがサブスクライブするプラン ID。          |
| saasSubscriptionName   | String        | SaaS サブスクリプションの名前。                |
| saasSubscriptionStatus | 列挙型          | 操作の状態。  次のいずれか:  <br/> - `Subscribed`: サブスクリプションがアクティブです。  <br/> - `Pending`: ユーザーがリソースを作成しますが、ISV によってアクティブ化されません。   <br/> - `Unsubscribed`: ユーザーがサブスクライブを解除しました。   <br/> - `Suspended`: ユーザーがサブスクリプションを中断しました。   <br/> - `Deactivated`: Azure サブスクリプションが中断されました。  |
| created                | DateTime      | サブスクリプション作成のタイムスタンプ値 (UTC)。 |
| lastModified           | DateTime      | サブスクリプション変更のタイムスタンプ値 (UTC)。 |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | GET 要求が正常に解決され、本文に応答が含まれています。    |
| 400                  | `BadRequest`         | 必須のヘッダーがないか、無効な api-version が指定されました。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                      |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません                                     |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                     |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。後で再試行してください。                             |
|  |  |  |

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、これはサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 これは、任意の調整に使用されます。 |
| Retry-After        | いいえ           | クライアントが状態を確認できる間隔。                                                       |
| eTag               | はい          | 操作状態を取得するリソースへのリンク。                                                        |
|  |  |  |

### <a name="get-subscriptions"></a>サブスクリプションの取得

サブスクリプション エンドポイントでの GET アクションにより、ユーザーはすべてのオファーに関するすべてのサブスクリプションを ISV から取得することができます。

*Request*

**GET**

**https://marketplaceapi.microsoft.com/api/saas/subscriptions?api-version=2017-04-15**

| **パラメーター名**  | **説明**                                       |
|---------------------|-------------------------------------------------------|
| api-version         | この要求で使用する操作のバージョン。 |
|  |  |

*ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                           |
|--------------------|--------------|-----------------------------------------------------------|
| x-ms-requestid     | いいえ           | クライアントからの要求を追跡するための一意の文字列値。 GUID をお勧めします。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。             |
| x-ms-correlationid | いいえ           | クライアントでの操作に対する一意の文字列値。 この値は、クライアント操作からのすべてのイベントをサーバー側のイベントに関連付けるためのものです。 この値を指定しないと、値が生成され、応答ヘッダーに指定されます。 |
| authorization      | はい          | JSON Web トークン (JWT) ベアラー トークン。                    |
|  |  |  |

*応答本文*

```json
{
    "id": "",
    "saasSubscriptionName": "",
    "offerId": "",
    "planId": "",
    "saasSubscriptionStatus": "",
    "created": "",
    "lastModified": ""
}
```

| **パラメーター名**     | **データの種類** | **説明**                               |
|------------------------|---------------|-----------------------------------------------|
| id                     | String        | Azure の SaaS サブスクリプション リソースの ID    |
| offerId                | String        | ユーザーがサブスクライブするオファー ID         |
| planId                 | String        | ユーザーがサブスクライブするプラン ID          |
| saasSubscriptionName   | String        | SaaS サブスクリプションの名前                |
| saasSubscriptionStatus | 列挙型          | 操作の状態。  次のいずれか:  <br/> - `Subscribed`: サブスクリプションがアクティブです。  <br/> - `Pending`: ユーザーがリソースを作成しますが、ISV によってアクティブ化されません。   <br/> - `Unsubscribed`: ユーザーがサブスクライブを解除しました。   <br/> - `Suspended`: ユーザーがサブスクリプションを中断しました。   <br/> - `Deactivated`: Azure サブスクリプションが中断されました。  |
| created                | DateTime      | サブスクリプション作成のタイムスタンプ値 (UTC) |
| lastModified           | DateTime      | サブスクリプション変更のタイムスタンプ値 (UTC) |
|  |  |  |

*応答コード*

| **HTTP 状態コード** | **エラー コード**     | **説明**                                                              |
|----------------------|--------------------|------------------------------------------------------------------------------|
| 200                  | `OK`                 | GET 要求が正常に解決され、本文に応答が含まれています。    |
| 400                  | `BadRequest`         | 必須のヘッダーがないか、無効な api-version が指定されました。 |
| 403                  | `Forbidden`          | 呼び出し元には、この操作の実行権限がありません。                      |
| 404                  | `NotFound`           | 指定された ID のサブスクリプションが見つかりません                                     |
| 429                  | `RequestThrottleId`  | サービスが要求の処理でビジー状態になっています。後で再試行してください。                     |
| 503                  | `ServiceUnavailable` | サービスが一時的にダウンしています。 後で再試行してください。                             |
|  |  |  |

*応答ヘッダー*

| **ヘッダー キー**     | **必須** | **説明**                                                                                        |
|--------------------|--------------|--------------------------------------------------------------------------------------------------------|
| x-ms-requestid     | はい          | クライアントから受け取った要求 ID。                                                                   |
| x-ms-correlationid | はい          | クライアントから渡される場合は、関連付け ID。そうでない場合は、これはサーバー関連付け ID。                   |
| x-ms-activityid    | はい          | サービスからの要求を追跡するための一意の文字列値。 これは、任意の調整に使用されます。 |
| Retry-After        | いいえ           | クライアントが状態を確認できる間隔。                                                       |
|  |  |  |

### <a name="saas-webhook"></a>SaaS Webhook

SaaS の webhook は、SaaS サービスに事前に変更を通知するために使用されます。 この POST API は未認証であることが期待され、Microsoft サービスによって呼び出されます。 SaaS サービスは、webhook 通知のアクションを実行する前に、検証および承認するために API を呼び出すことが期待されます。 

*本文*

``` json
  {
    "id": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "activityId": "be750acb-00aa-4a02-86bc-476cbe66d7fa",
    "subscriptionId":"cd9c6a3a-7576-49f2-b27e-1e5136e57f45",
    "action": "Subscribe", // Subscribe/Unsubscribe/ChangePlan
    "operationRequestSource":"Azure",
    "timeStamp":"2018-12-01T00:00:00"
  }
```

| **パラメーター名**     | **データの種類** | **説明**                               |
|------------------------|---------------|-----------------------------------------------|
| id  | String       | トリガーされた操作の一意の ID。                |
| activityId   | String        | サービスからの要求を追跡するための一意の文字列値。 これは、任意の調整に使用されます。               |
| subscriptionId                     | String        | Azure の SaaS サブスクリプション リソースの ID。    |
| offerId                | String        | ユーザーがサブスクライブするオファー ID。 「更新」アクションでのみ指定されます。        |
| publisherId                | String        | SaaS オファーのパブリッシャー ID         |
| planId                 | String        | ユーザーがサブスクライブするプラン ID。 「更新」アクションでのみ指定されます。          |
| action                 | String        | この通知をトリガーするアクション。 指定できる値 - Activate (アクティブ化)、Delete (削除)、Suspend (中断)、Reinstate (再開)、Update (更新)          |
| timeStamp                 | String        | この通知がトリガーされたときのタイムスタンプ値 (UTC)。          |
|  |  |  |


## <a name="next-steps"></a>次のステップ

開発者は、[Cloud パートナー ポータル REST API](https://docs.microsoft.com/azure/marketplace/cloud-partner-portal-orig/cloud-partner-portal-api-overview) を使用して、ワークロード、オファー、およびパブリッシャー プロファイルの操作をプログラムで取得することもできます。
