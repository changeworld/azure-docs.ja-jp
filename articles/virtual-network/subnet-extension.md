---
title: Azure でのサブネットの拡張 | Microsoft Docs
description: Azure でのサブネットの拡張について説明します。
services: virtual-network
documentationcenter: na
author: anupam-p
manager: narayan
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/31/2019
ms.author: anupand
ms.openlocfilehash: f718471c3f79e9a33b0e03b088f8c8d2ae0231d3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/27/2020
ms.locfileid: "73586848"
---
# <a name="subnet-extension"></a>サブネットの拡張
パブリック クラウドへのワークロードの移行には、慎重な計画と調整が必要です。 重要な考慮事項の 1 つは、IP アドレスを保持できるかどうかです。 これは特に、アプリケーションに IP アドレスの依存関係がある場合や、特定の IP アドレスを使用するためのコンプライアンス要件がある場合に重要になります。 Azure Virtual Network を使用すると、選択した IP アドレス範囲を使用して VNet とサブネットを作成できるため、この問題を解決できます。

上記の要件に、一部のアプリケーションをオンプレミスに維持するための要件が加わった場合、移行に少し手間がかかることがあります。 このような状況では、Azure とオンプレミスの間で、どちらの側でも IP アドレスの番号を再割り当てせずに、アプリケーションを分割する必要があります。 また、アプリケーションが同じネットワーク内にあるものとして通信できるようにする必要があります。

上記の問題の解決策の 1 つとして、サブネットの拡張があります。 ネットワークを拡張すると、アプリケーションは、物理的に異なる場所に存在する場合に同じブロードキャスト ドメインで通信できるようになり、ネットワーク トポロジを再設計する必要がなくなります。 

ネットワークを拡張することは一般的ではありませんが、以下のユースケースで必要になる場合があります。

- **段階的な移行**:最も一般的なシナリオは、移行を段階的に行うことです。 いくつかのアプリケーションを最初に導入し、時間の経過と共にアプリケーションの残りの部分を Azure に移行します。
- **待ち時間**:アプリケーションを確実にデータセンターにできるだけ近い場所に配置するために、一部のアプリケーションをオンプレミスに保持しておくもう 1 つの理由として、低待機時間の要件が考えられます。
- **コンプライアンス**:別のユースケースとして、アプリケーションの一部をオンプレミスに保持するためのコンプライアンス要件がある場合があります。
 
> [!NOTE] 
> 必要な場合を除き、サブネットを拡張しないでください。 サブネットを拡張する場合は、中間の手順として行うことをお勧めします。 経時的に、オンプレミス ネットワーク内でアプリケーションの番号を再割り当てし、Azure に移行することをお勧めします。

次のセクションでは、サブネットを Azure に拡張する方法について説明します。


## <a name="extend-your-subnet-to-azure"></a>サブネットを Azure に拡張する
 レイヤー 3 のオーバーレイ ネットワーク ベースのソリューションを使用して、オンプレミスのサブネットを Azure に拡張できます。 ほとんどのソリューションでは、VXLAN などのオーバーレイ テクノロジを使用して、レイヤー 3 のオーバーレイ ネットワークを使ってレイヤー 2 のネットワークを拡張します。 次の図は、一般化されたソリューションを示しています。 このソリューションでは、Azure とオンプレミスの両方の側に同じサブネットが存在します。 

![サブネットの拡張の例](./media/subnet-extension/subnet-extension.png)

サブネットの IP アドレスが Azure とオンプレミスの VM に割り当てられています。 Azure とオンプレミスのどちらでも、ネットワークに NVA が挿入されています。 Azure の VM によってオンプレミス ネットワーク内の VM との通信が試行されると、Azure NVA によってパケットがキャプチャされ、カプセル化されて、VPN/Express Route 経由でオンプレミス ネットワークに送信されます。 オンプレミスの NVA によってパケットが受信され、カプセル化解除されて、そのネットワーク内の目的の受信者に転送されます。 返されるトラフィックでは、同様のパスとロジックが使用されます。

上の例では、Azure NVA とオンプレミスの NVA との相互通信が行われ、それぞれの背後にある IP アドレスが確認されます。 さらに複雑なネットワークにもマッピング サービスがあり、これにより、NVA とその背後にある IP アドレスとの間のマッピングが維持されます。 NVA では、パケットが受信されると、マッピング サービスに対してクエリが行われ、背後に宛先 IP アドレスのある NVA のアドレスが確認されます。

次のセクションでは、Azure でテストしたサブネットの拡張ソリューションの詳細について説明します。

## <a name="next-steps"></a>次のステップ 
[ベンダー ソリューションを使用して、サブネットを Azure に拡張します。](https://github.com/microsoft/Azure-LISP)