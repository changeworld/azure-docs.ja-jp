---
title: Azure DMZ の例 – NSG を使用して単純な DMZ を構築する | Microsoft Docs
description: ネットワーク セキュリティ グループ (NSG) を使用して DMZ を構築する
services: virtual-network
documentationcenter: na
author: tracsman
manager: rossort
editor: ''
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/03/2017
ms.author: jonor
ms.openlocfilehash: 2f399b5084ab65736adfebb5cf0a77ccfbc972e8
ms.sourcegitcommit: 668b486f3d07562b614de91451e50296be3c2e1f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2018
ms.locfileid: "49457291"
---
# <a name="example-1--build-a-simple-dmz-using-nsgs-with-an-azure-resource-manager-template"></a>例 1 – NSG と Azure Resource Manager テンプレートを使用して簡単な DMZ を構築する
[セキュリティ境界のベスト プラクティス ページに戻る][HOME]

> [!div class="op_single_selector"]
> * [Resource Manager テンプレート](virtual-networks-dmz-nsg.md)
> * [クラシック - PowerShell](virtual-networks-dmz-nsg-asm.md)
> 
>

この例では、4 つの Windows サーバーおよびネットワーク セキュリティ グループで構成されるプリミティブな DMZ を作成します。 この例では、各手順の理解を深めるために、関連する各テンプレート セクションについて説明します。 さらに、トラフィックのシナリオに関するセクションでは、DMZ の防御層におけるトラフィックの進行過程を詳しく順を追って説明しています。 最後の「参照」セクションでは、さまざまなシナリオでテストおよび実験ができるように、この環境を構築するための完全なテンプレート コードと手順を紹介します。 

[!INCLUDE [azure-arm-classic-important-include](../../includes/azure-arm-classic-important-include.md)] 

![NSG での受信 DMZ][1]

## <a name="environment-description"></a>環境の説明
この例で使用するサブスクリプションには、以下のリソースが含まれています。

* 単一リソース グループ
* 仮想ネットワークと 2 つのサブネット (“FrontEnd” と “BackEnd”)
* 両方のサブネットに適用されるネットワーク セキュリティ グループ
* アプリケーション Web サーバーを表す Windows サーバー ("IIS01")
* アプリケーション バックエンド サーバーを表す 2 つの Windows サーバー ("AppVM01"、"AppVM02")
* DNS サーバーを表す Windows サーバー ("DNS01")
* アプリケーション Web サーバーに関連付けられているパブリック IP アドレス

「参照」セクションに、この例で説明されている環境を構築する Azure Resource Manager テンプレートへのリンクがあります。 VM と Virtual Network の構築については、テンプレート例には含まれていますが、このドキュメントでは詳細な説明を省略します。 

**この環境を構築するには** (詳細な手順については、このドキュメントの「参照」セクションをご覧ください)

1. [Azure クイックスタート テンプレート][Template]で Azure Resource Manager テンプレートをデプロイします
2. [サンプル アプリケーション スクリプト][SampleApp]でサンプル アプリケーションをインストールします

>[!NOTE]
>このインスタンスのバックエンド サーバーに RDP 接続をするために、IIS サーバーは "ジャンプ ボックス" として使用されています。 はじめに IIS サーバーに RDP 接続をして、次に IIS サーバーからバックエンド サーバーに RDP 接続をします。 または、パブリック IP を各サーバーに関連付けて、RDP 接続を簡略化することもできます。
> 
>

次のセクションでは、ネットワーク セキュリティ グループについて、また、この例でネットワーク セキュリティ グループがどのように機能しているのかを、Azure Resource Manager テンプレートの主要な行を追いながら詳しく説明します。

## <a name="network-security-groups-nsg"></a>ネットワーク セキュリティ グループ (NSG)
この例では、NSG グループを作成し、そこに 6 つのルールを設定します。 

>[!TIP]
>一般的には、具体的な "Allow" ルールを作成してから、包括的な "Deny" ルールを作成してください。 どのルールが先に評価されるかは、割り当てる優先度によって決まります。 具体的なルールが一度適用されたトラフィックに対しては、他のルールは評価されません。 NSG ルールは、(サブネットから見て) 受信方向または送信方向のどちらか一方に適用できます。
>
>

ここでは、受信トラフィックに対して次の内容のルールを作成しています。

1. 内部的な DNS トラフィック (ポート 53) を許可する。
2. インターネットから任意の VM への RDP トラフィック (ポート 3389) を許可する。
3. インターネットから Web サーバー (IIS01) への HTTP トラフィック (ポート 80) を許可する。
4. IIS01 から AppVM1 への任意のトラフィック (すべてのポート) を許可する。
5. インターネットから VNet 全体 (両方のサブネット) への任意のトラフィック (すべてのポート) を拒否する。
6. フロントエンド サブネットからバックエンド サブネットへの任意のトラフィック (すべてのポート) を拒否する。

これらのルールが各サブネットにバインドされている状態で、インターネットから Web サーバーへの HTTP 要求が受信された場合、ルール 3 (Allow) とルール 5 (Deny) の両方が該当しますが、ルール 3 の方が優先度が高いので、ルール 3 のみが適用され、ルール 5 は作用しません。 したがって、Web サーバーへの HTTP 要求は許可されます。 同じトラフィックが DNS01 サーバーに到達しようとしている場合は、ルール 5 (Deny) が最初に適用されるので、トラフィックはサーバーに到達できません。 フロントエンド サブネットからバックエンド サブネットへの通信は、ルール 6 (Deny) によってブロックされます (ルール 1 とルール 4 で許可されたトラフィックを除く)。このルール セットによって、フロントエンドにある Web アプリケーションのセキュリティが攻撃者によって侵害されたとしてもバックエンド ネットワークは保護されるため、バックエンドの "保護された" ネットワークに対する攻撃者のアクセスは (AppVM01 サーバー上で公開されているリソースに) 限定されます。

インターネットへ向かうトラフィックは、既定の送信ルールによって許可されています。 この例では、送信トラフィックを許可していますが、送信ルールに対する変更は一切行っていません。 セキュリティ ポリシーを双方向のトラフィックに適用するには、ユーザー定義ルーティングが必要です。この詳細については、[セキュリティ境界のベスト プラクティス][HOME]に関するページの例 3 を参照してください。

各ルールを、以下でさらに詳しく説明します。

1. これらのルールを保持するために、ネットワーク セキュリティ グループのリソースをインスタンス化する必要があります。

    ```JSON
    "resources": [
      {
        "apiVersion": "2015-05-01-preview",
        "type": "Microsoft.Network/networkSecurityGroups",
        "name": "[variables('NSGName')]",
        "location": "[resourceGroup().location]",
        "properties": { }
      }
    ]
    ``` 

2. この例の最初のルールは、すべての内部ネットワーク間で、バックエンド サブネット上の DNS サーバーへの DNS トラフィックを許可します。 ルールには、いくつかの重要なパラメーターがあります。
  * "destinationAddressPrefix" - DNS トラフィックがDNS サーバーに到達するのが許可されるように、宛先アドレスのプレフィックスは "10.0.2.4" に設定されます。
  * “Direction” は、このルールが適用されるトラフィック フローの方向を示します。 この方向は、サブネットまたは Virtual Machine の観点からのものです (この NSG がバインドされている方向で決まります)。 したがって、Direction が “Inbound” である場合、サブネットに入るトラフィックにはルールが適用され、サブネットを出るトラフィックにはルールが適用されません。
  * "Priority" では、トラフィック フローを評価する順序を設定します。 数値が低いほど、優先度は高くなります。 ルールが特定のトラフィック フローに適用されると、それ以降のルールの処理は行われなくなります。 したがって、優先度 1 のルールがトラフィックを許可し、優先度 2 のルールがトラフィックを拒否する場合、両方のルールをトラフィックに適用すると、トラフィックのフローは許可されます (ルール 1 の方が優先度が高く、これが有効になると、それ以降、ルールは適用されないからです)。
  * “Access” は、このルールの影響を受けるトラフィックがブロック ("Deny") されるか、それとも許可 ("Allow") されるかを示します。

    ```JSON
    "properties": {
    "securityRules": [
      {
        "name": "enable_dns_rule",
        "properties": {
          "description": "Enable Internal DNS",
          "protocol": "*",
          "sourcePortRange": "*",
          "destinationPortRange": "53",
          "sourceAddressPrefix": "VirtualNetwork",
          "destinationAddressPrefix": "10.0.2.4",
          "access": "Allow",
          "priority": 100,
          "direction": "Inbound"
        }
      },
    ```

3. このルールは、インターネットからの RDP トラフィックが、バインドされたサブネットにある任意のサーバー上の RDP ポートに流れるのを許可します。 

    ```JSON
    {
      "name": "enable_rdp_rule",
      "properties": {
        "description": "Allow RDP",
        "protocol": "Tcp",
        "sourcePortRange": "*",
        "destinationPortRange": "3389",
        "sourceAddressPrefix": "*",
        "destinationAddressPrefix": "*",
        "access": "Allow",
        "priority": 110,
        "direction": "Inbound"
      }
    },
    ```

4. このルールは、受信インターネット トラフィックが Web サーバーに到達するのを許可します。 このルールでは、ルーティングの動作は変更されません。 IIS01 宛てのトラフィックの通過を許可するだけです。 IIS01 宛てのトラフィックが通過するのを許可するだけです。 したがって、インターネットからのトラフィックの宛先が Web サーバーである場合、このルールによってそのトラフィックは許可され、その他のルールの処理は停止されます(優先度 140 のルールでは、他の受信インターネット トラフィックはすべてブロックされます)。 処理するのが HTTP トラフィックのみである場合は、宛先ポート 80 のみが許可されるように、このルールをさらに制限することが可能です。

    ```JSON
    {
      "name": "enable_web_rule",
      "properties": {
        "description": "Enable Internet to [variables('VM01Name')]",
        "protocol": "Tcp",
        "sourcePortRange": "*",
        "destinationPortRange": "80",
        "sourceAddressPrefix": "Internet",
        "destinationAddressPrefix": "10.0.1.5",
        "access": "Allow",
        "priority": 120,
        "direction": "Inbound"
        }
      },
    ```

5. このルールは IIS01 サーバーから AppVM01 サーバーに渡されるトラフィックを許可します。フロントエンドからバックエンドに向かう他のトラフィックはすべて、後のルールによってブロックされます。 このルールを改善するには、ポートがわかっている場合、それを追加します。 たとえば、IIS サーバーからのトラフィックが AppVM01 上の SQL Server のみに到達する場合は、宛先ポート範囲を "*"(任意) から 1433 (SQL ポート) に変更する必要があります。これにより、Web アプリケーションが侵害されても、AppVM01 に対する受信攻撃の可能性は低くなります。

    ```JSON
    {
      "name": "enable_app_rule",
      "properties": {
        "description": "Enable [variables('VM01Name')] to [variables('VM02Name')]",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "10.0.1.5",
        "destinationAddressPrefix": "10.0.2.5",
        "access": "Allow",
        "priority": 130,
        "direction": "Inbound"
      }
    },
     ```

6. ルールでは "既定のタグ" と呼ばれる特殊な種類のアドレス プレフィックスを使用できます。これらのタグはシステムから提供される識別子で、より大規模なカテゴリのアドレス プレフィックスへの対応が簡単になります。 このルールでは、既定のタグ "VirtualNetwork" を宛先アドレスのプレフィックスに使用して、VNet 内の任意のアドレスを表します。 その他のプレフィックス ラベルには、Internet および AzureLoadBalancer があります。 このルールは、インターネットから、ネットワーク上の任意のサーバーに向かうトラフィックを拒否します。 優先度 110 および 120 のルールには、サーバー上のファイアウォールおよび RDP ポートへの受信インターネット トラフィックのみを許可し、他はすべてブロックする効果があります。 このルールは、予期しないフローをすべてブロックする "フェールセーフ" ルールです。

    ```JSON
    {
      "name": "deny_internet_rule",
      "properties": {
        "description": "Isolate the [variables('VNetName')] VNet from the Internet",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "Internet",
        "destinationAddressPrefix": "VirtualNetwork",
        "access": "Deny",
        "priority": 140,
        "direction": "Inbound"
      }
    },
     ```

7. 最後のルールでは、フロントエンド サブネットからバックエンド サブネットへのトラフィックを拒否します。 このルールは受信専用のルールであるため、逆方向のトラフィック (バックエンドからフロントエンドへのトラフィック) は許可されます。

    ```JSON
    {
      "name": "deny_frontend_rule",
      "properties": {
        "description": "Isolate the [variables('Subnet1Name')] subnet from the [variables('Subnet2Name')] subnet",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "[variables('Subnet1Prefix')]",
        "destinationAddressPrefix": "[variables('Subnet2Prefix')]",
        "access": "Deny",
        "priority": 150,
        "direction": "Inbound"
      }
    }
    ```

## <a name="traffic-scenarios"></a>トラフィックのシナリオ
#### <a name="allowed-internet-to-web-server"></a>(*許可*) インターネットから Web サーバー
1. インターネット ユーザーが IIS01 NIC に関連付けられた NIC のパブリック IP アドレスから HTTP ページを要求します。
2. パブリック IP アドレスが IIS01 方向の VNet にトラフィックを渡します (Web サーバー)。
3. フロントエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. NSG ルール 1 (DNS) は該当しません。次のルールに進みます。
  2. NSG ルール 2 (RDP) は該当しません。次のルールに進みます。
  3. NSG ルール 3 (インターネットと IIS01 の間) は適用されません。トラフィックは許可されます。ルールの処理を停止します。
4. トラフィックは Web サーバー IIS01 の内部 IP アドレス (10.0.1.5) に到達します。
5. IIS01 は Web トラフィックをリッスンしています。この要求を受け取ると、要求の処理を開始します。
6. IIS01 が AppVM01 上の SQL Server に情報を求めます。
7. フロントエンド サブネットに送信ルールはないので、トラフィックは許可されます。
8. バックエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. NSG ルール 1 (DNS) は該当しません。次のルールに進みます。
  2. NSG ルール 2 (RDP) は該当しません。次のルールに進みます。
  3. NSG ルール 3 (インターネットからファイアウォール) は該当しません。次のルールに進みます。
  4. NSG ルール 4 (IIS01 と AppVM01 の間) は適用されません。トラフィックは許可されます。ルールの処理を停止します。
9. AppVM01 は SQL クエリを受信し、応答します。
10. バックエンド サブネットに送信ルールは存在しないので、応答は許可されます。
11. フロントエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. バックエンド サブネットからフロントエンド サブネットへの受信トラフィックに適用される NSG ルールは存在しません。つまり、該当する NSG ルールはありません。
  2. サブネット間のトラフィックを許可する既定のシステム ルールであれば、このトラフィックを許可するので、トラフィックは許可されます。
12. IIS サーバーは SQL 応答を受信すると、HTTP 応答を完了して要求元に送信します。
13. フロントエンド サブネットに対する送信ルールは存在しないので、応答は許可され、インターネット ユーザーは要求した Web ページを受信します。

#### <a name="allowed-rdp-to-iis-server"></a>(*許可*) IIS サーバーへの RDP 接続
1. インターネット上のサーバー管理者が、IIS01 NIC に関連付けられた NIC のパブリック IP アドレスで IIS01 への RDP セッションを要求します (このパブリック IP アドレスはポータルまたは PowerShell を使用して検索できます)。
2. パブリック IP アドレスが IIS01 方向の VNet にトラフィックを渡します (Web サーバー)。
3. フロントエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. NSG ルール 1 (DNS) は該当しません。次のルールに進みます。
  2. NSG ルール 2 (RDP) が該当し、トラフィックが許可され、ルールの処理はここで終了します。
4. 送信ルールがない場合は、既定のルールが適用され、戻りトラフィックが許可されます。
5. RDP セッションが可能な状態になります。
6. IIS01 からユーザー名とパスワードが求められます。

>[!NOTE]
>このインスタンスのバックエンド サーバーに RDP 接続をするために、IIS サーバーは "ジャンプ ボックス" として使用されています。 はじめに IIS サーバーに RDP 接続をして、次に IIS サーバーからバックエンド サーバーに RDP 接続をします。
>
>

#### <a name="allowed-web-server-dns-look-up-on-dns-server"></a>(*許可*) DNS サーバーに対する Web サーバーの DNS 参照
1. Web サーバーである IIS01 が、www.data.gov にあるデータ フィードを必要としています。そのためにはアドレスを解決する必要があります。
2. VNet 用のネットワーク構成にはプライマリ DNS サーバーとして、DNS01 (バックエンド サブネット上の 10.0.2.4) がリストされており、IIS01 は DNS 要求を DNS01 に送信します。
3. フロントエンド サブネットに送信ルールはないので、トラフィックは許可されます。
4. バックエンド サブネットが、以下に示す受信ルールの処理を開始します。
  * NSG ルール 1 (DNS) が該当し、トラフィックが許可され、ルールの処理はここで終了します。
5. DNS サーバーは要求を受信します。
6. DNS サーバーは、アドレスがキャッシュされていないことがわかると、インターネット上のルート DNS サーバーに要求します。
7. バックエンド サブネットに送信ルールはないので、トラフィックは許可されます。
8. インターネット DNS サーバーが応答します。このセッションは内部から開始されたため、応答は許可されます。
9. DNS サーバーは応答をキャッシュし、最初の要求に応答して IIS01 に返します。
10. バックエンド サブネットに送信ルールはないので、トラフィックは許可されます。
11. フロントエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. バックエンド サブネットからフロントエンド サブネットへの受信トラフィックに適用される NSG ルールは存在しません。つまり、該当する NSG ルールはありません。
  2. サブネット間のトラフィックを許可する既定のシステム ルールであれば、このトラフィックを許可するので、トラフィックは許可されます。
12. IIS01 が DNS01 から応答を受信します。

#### <a name="allowed-web-server-access-file-on-appvm01"></a>(*許可*) Web サーバーによる AppVM01 上のファイルへのアクセス
1. IIS01 が AppVM01 上のファイルを要求します。
2. フロントエンド サブネットに送信ルールはないので、トラフィックは許可されます。
3. バックエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. NSG ルール 1 (DNS) は該当しません。次のルールに進みます。
  2. NSG ルール 2 (RDP) は該当しません。次のルールに進みます。
  3. NSG ルール 3 (インターネットと IIS01 の間) は適用されません。次のルールに進みます。
  4. NSG ルール 4 (IIS01 と AppVM01 の間) は適用されません。トラフィックは許可されます。ルールの処理を停止します。
4. AppVM01 が要求を受信し、ファイルを返します (アクセスが許可されている場合)。
5. バックエンド サブネットに送信ルールは存在しないので、応答は許可されます。
6. フロントエンド サブネットが、以下に示す受信ルールの処理を開始します。
  1. バックエンド サブネットからフロントエンド サブネットへの受信トラフィックに適用される NSG ルールは存在しません。つまり、該当する NSG ルールはありません。
  2. サブネット間のトラフィックを許可する既定のシステム ルールであれば、このトラフィックを許可するので、トラフィックは許可されます。
7. IIS サーバーはファイルを受信します。

#### <a name="denied-rdp-to-backend"></a>(*拒否*) バックエンドへの RDP 接続
1. インターネット ユーザーが AppVM01 サーバーへの RDP 接続を試みます。
2. この NIC サーバーに関連付けられた パブリック IP アドレスがないので、このトラフィックが VNet 入ることはなく、サーバーに到達しません。
3. ただし、なんらかの理由でパブリック IP アドレスが有効な場合、このトラフィックは NSG ルール 2 (RDP) により許可されます。

>[!NOTE]
>このインスタンスのバックエンド サーバーに RDP 接続をするために、IIS サーバーは "ジャンプ ボックス" として使用されています。 はじめに IIS サーバーに RDP 接続をして、次に IIS サーバーからバックエンド サーバーに RDP 接続をします。
>
>

#### <a name="denied-web-to-backend-server"></a>(*拒否*) Web とバックエンド サーバーの間
1. インターネット ユーザーが、AppVM01 上のファイルへのアクセスを試みます。
2. この NIC サーバーに関連付けられた パブリック IP アドレスがないので、このトラフィックが VNet 入ることはなく、サーバーに到達しません。
3. なんらかの理由でパブリック IP アドレスが有効な場合、このトラフィックは NSG ルール 5 (インターネットと VNet 間) によって許可されます。

#### <a name="denied-web-dns-look-up-on-dns-server"></a>(*拒否*) DNS サーバー上での Web DNS の参照
1. インターネット ユーザーが、DNS01 上の内部 DNS レコードの検索を試みます。
2. この NIC サーバーに関連付けられた パブリック IP アドレスがないので、このトラフィックが VNet 入ることはなく、サーバーに到達しません。
3. なんらかの理由でパブリック IP アドレスが有効な場合でも、NSG ルール 5 (VNet とインターネットの間) によってこのトラフィックはブロックされます (注: 要求された発信元アドレスがインターネット上にあり、ルール 1 は発信元としてのみローカルの VNet のみに適用されるため、ルール 1 (DNS) は適用されません)。

#### <a name="denied-sql-access-on-the-web-server"></a>(*拒否*) Web サーバー上の SQL へのアクセス
1. インターネット ユーザーが、IIS01 にある SQL データを要求します。
2. この NIC サーバーに関連付けられた パブリック IP アドレスがないので、このトラフィックが VNet 入ることはなく、サーバーに到達しません。
3. 何らかの理由でパブリック IP アドレスが有効な場合、フロントエンド サブネットは、受信ルールの処理を開始します。
  1. NSG ルール 1 (DNS) は該当しません。次のルールに進みます。
  2. NSG ルール 2 (RDP) は該当しません。次のルールに進みます。
  3. NSG ルール 3 (インターネットと IIS01 の間) は適用されません。トラフィックは許可されます。ルールの処理を停止します。
4. トラフィックは IIS01 の内部 IP アドレス (10.0.1.5) に到達します。
5. IIS01 は、ポート 1433でリッスンしていないので、要求に対する応答はありません。

## <a name="conclusion"></a>まとめ
この例は、バックエンド サブネットを受信トラフィックから分離する方法としては比較的単純な部類に入ります。

その他の例およびネットワーク セキュリティ境界の概要については、[こちら][HOME]を参照してください。

## <a name="references"></a>参照
### <a name="azure-resource-manager-template"></a>Azure Resource Manager テンプレート
この例では、Microsoft によって管理され、コミュニティに公開されている GitHub リポジトリ上の定義済み Azure Resource Manager テンプレートを使用しています。 このテンプレートは、GitHub から直接デプロイすることもできるほか、ダウンロードしてニーズに合わせて変更することもできます。 

メイン テンプレートは "azuredeploy.json" という名前のファイル内にあります。 PowerShell または CLI を使用して (関連付けられた "azuredeploy.parameters.json" ファイルとともに) このテンプレートを送信して、デプロイすることができます。 最も簡単な方法は、GitHub の README.md ページにある [Deploy to Azure] (Azure にデプロイ) ボタンを使用することです。

この例を構築するテンプレートを GitHub と Azure Portal からデプロイするには、次の手順を実行します。

1. ブラウザーから、[テンプレート][Template]のページに移動します。
2. [Deploy to Azure] (Azure に配置する) ボタンをクリックします (または [Visualize] (視覚化) ボタンをクリックして、このテンプレートをグラフィカルに表示します)。
3. [パラメーター] ブレードにストレージ アカウント、ユーザー名、パスワードを入力して、**[OK]** をクリックします。
5. このデプロイ用にリソース グループを作成します (既存のリソース グループを使用することもできますが、最良の結果のために新しく作成することをお勧めします)。
6. 必要に応じて、VNet の [サブスクリプション] と [場所] の設定を変更します。
7. **[法律条項を確認してください]** をクリックして条件を読み、**[購入]** をクリックして同意します。
8. **[作成]** をクリックしてこのテンプレートのデプロイを開始します。
9. デプロイが正常に終了したら、このデプロイ用に作成したリソース グループに移動して、その中の構成されたリソースを確認します。

>[!NOTE]
>このテンプレートでは、IIIS01 サーバーへの RDP 接続のみ有効になります (ポータルで IIS01 のパブリック IP を検索してください)。 このインスタンスのバックエンド サーバーに RDP 接続をするために、IIS サーバーは "ジャンプ ボックス" として使用されています。 はじめに IIS サーバーに RDP 接続をして、次に IIS サーバーからバックエンド サーバーに RDP 接続をします。
>
>

このデプロイを削除するには、リソース グループを削除します。子リソースもすべて削除されます。

#### <a name="sample-application-scripts"></a>サンプル アプリケーション スクリプト
テンプレートが正常に実行されたら、簡単な Web アプリケーションで Web サーバーとアプリ サーバーをセットアップして、この DMZ 構成でのテストを行うことができます。 このためのサンプル アプリケーション、およびその他の DMZ の例をインストールするには、[サンプル アプリケーション スクリプト][SampleApp]をご利用ください。

## <a name="next-steps"></a>次の手順

* この例をデプロイする
* サンプル アプリケーションを構築する
* この DMZ を通じてさまざまなトラフィック フローをテストする

<!--Image References-->
[1]: ./media/virtual-networks-dmz-nsg-arm/example1design.png "NSG での受信 DMZ"

<!--Link References-->
[HOME]: ../best-practices-network-security.md
[Template]: https://github.com/Azure/azure-quickstart-templates/tree/master/301-dmz-nsg
[SampleApp]: ./virtual-networks-sample-app.md
