---
title: 高可用性とディザスター リカバリー - Azure Batch | Microsoft Docs
description: リージョン障害に対処できるように Batch アプリケーションを設計する方法を学習する
services: batch
documentationcenter: ''
author: laurenhughes
manager: gwallace
editor: ''
ms.assetid: ''
ms.service: batch
ms.workload: ''
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2019
ms.author: lahugh
ms.openlocfilehash: 3c76a5100e6ac1db067ccdbd582ddf9adba946c1
ms.sourcegitcommit: 4b431e86e47b6feb8ac6b61487f910c17a55d121
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/18/2019
ms.locfileid: "68322581"
---
# <a name="design-your-application-for-high-availability"></a>高可用性を実現するようにアプリケーションを設計する

Azure Batch はリージョン サービスです。 Batch はすべての Azure リージョンで使用できますが、Batch アカウントを作成したら、それをリージョンに関連付ける必要があります。 それにより、Batch アカウントのすべての操作がそのリージョンに適用されます。 たとえば、プールや関連付けられている仮想マシン (VM) は、Batch アカウントと同じリージョン内に作成されます。

Batch を使用するアプリケーションを設計するときは、Batch がリージョン内で使用できなくなっている可能性を考慮する必要があります。 まれな状況として、リージョン全体またはリージョン内の Batch サービス全体に関する問題、あるいは特定の Batch アカウントに関する問題が発生する場合があります。

Batch を使用するアプリケーションまたはソリューションが常に使用可能である必要がある場合は、別のリージョンにフェールオーバーするか、またはワークロードが常に 2 つ以上のリージョン間で分割されるように設計する必要があります。 どちらのアプローチにも、それぞれが異なるリージョンに配置された、少なくとも 2 つの Batch アカウントが必要です。

## <a name="multiple-batch-accounts-in-multiple-regions"></a>複数のリージョン内の複数の Batch アカウント

さまざまなリージョンで複数の Batch アカウントを使用すると、別のリージョン内の Batch アカウントが使用できなくなった場合でも、アプリケーションは動作を続行できるようになります。 複数のアカウントの使用は、アプリケーションを高可用性にする必要がある場合に特に重要です。

場合によっては、常に 2 つ以上のリージョンを使用するようにアプリケーションを設計できます。 たとえば、膨大な容量が必要な場合は、大規模なアプリケーションを処理するか、または将来の拡張要求に応えるために複数のリージョンの使用が必要になることがあります。

## <a name="design-considerations-for-providing-failover"></a>フェールオーバーを実現するための設計上の考慮事項

代替リージョンにフェールオーバーする機能を実現する場合に考慮すべき重要な点は、ソリューション内のすべてのコンポーネントを検討する必要があることです。2 つ目の Batch アカウントを作成するだけでは不十分です。 たとえば、ほとんどの Batch アプリケーションでは Azure ストレージ アカウントが必要であり、許容されるパフォーマンスを得るにはストレージ アカウントと Batch アカウントを同じリージョンに配置する必要があります。

フェールオーバー可能なソリューションを設計するときは、次の点を考慮してください。

- 各リージョン内に必要なすべてのアカウント (Batch アカウントやストレージ アカウントなど) を事前に作成します。 通常は、データが格納されているか、またはアカウントが使用されている場合にのみ、アカウントを作成しても料金は発生しません。
- Batch アカウントを使用して必要な数のコアを割り当てることができるように、事前にアカウントにクォータが設定されていることを確認してください。
- テンプレートまたはスクリプト、あるいはその両方を使用して、リージョンへのアプリケーションのデプロイを自動化します。
- すべてのリージョンでアプリケーション バイナリや参照データを最新の状態に維持します。 最新の状態に維持することにより、ファイルのアップロードやデプロイを待つことなく、リージョンをすばやくオンラインにできるようになります。 たとえば、プール ノードにインストールするカスタム アプリケーションが Batch アプリケーション パッケージを使用して格納および参照されている場合は、アプリケーションの新しいバージョンが生成されると、それを各 Batch アカウントにアップロードし、プール構成で参照する (または、新しいバージョンを既定のバージョンにする) 必要があります。
- Batch、ストレージ、またはその他のサービスを呼び出しているアプリケーションで、クライアントまたは負荷を別のリージョンに簡単に切り替えます。
- フェールオーバーを確実に成功させるためのベスト プラクティスとして、通常の操作の一部として頻繁に代替リージョンに切り替えます。 たとえば、個別のリージョンに 2 つのデプロイがある場合は、毎月代替リージョンに切り替えます。

## <a name="next-steps"></a>次の手順

- [Azure Portal](batch-account-create-portal.md)、[Azure CLI](cli-samples.md)、[Powershell](batch-powershell-cmdlets-get-started.md)、または [Batch Management API](batch-management-dotnet.md) を使用して Batch アカウントを作成する方法の詳細を学習します。
- 既定のクォータは Batch アカウントに関連付けられていまます。[この記事](batch-quota-limit.md)では、既定のクォータ値の詳細と、クォータを増やす方法について説明しています。
