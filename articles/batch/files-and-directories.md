---
title: Azure Batch 内のファイルおよびディレクトリ
description: Azure Batch のファイルとディレクトリについて、およびそれらがワークフローでどのように使用されるかについて、開発の観点から説明します。
ms.topic: conceptual
ms.date: 08/03/2020
ms.openlocfilehash: eafea6c234c3b261521f8a791b7a03e25388f02a
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/29/2021
ms.locfileid: "87552640"
---
# <a name="files-and-directories-in-azure-batch"></a>Azure Batch 内のファイルおよびディレクトリ

Azure Batch には、タスクごとに作業ディレクトリ があり、その下にはファイルやディレクトリを作成できます。 この作業ディレクトリは、タスクによって実行されるプログラム、処理されるデータ、実行される処理の出力を格納するために使用できます。 タスクのすべてのファイルとディレクトリは、タスクのユーザーが所有者になります。

Batch サービスは、ノード上のファイル システムの一部を " *ルート ディレクトリ*" として公開します。 このルート ディレクトリは、OS ドライブに直接配置されるのではなく、VM の一時ストレージ ドライブに配置されます。

このルート ディレクトリには、タスクから `AZ_BATCH_NODE_ROOT_DIR` 環境変数を参照することでアクセスできます。 環境変数の使用に関する詳細については、「 [タスクの環境設定](jobs-and-tasks.md#environment-settings-for-tasks)」を参照してください。

## <a name="root-directory-structure"></a>ルート ディレクトリの構造

ルート ディレクトリには、次のディレクトリ構造が含まれています。

![計算ノードのディレクトリ構造のスクリーンショット。](media\files-and-directories\node-folder-structure.png)

- **applications**: 計算ノード上にインストールされたアプリケーション パッケージの詳細に関する情報が含まれています。 このディレクトリには、タスクから `AZ_BATCH_APP_PACKAGE` 環境変数を参照することでアクセスできます。

- **fsmounts**: このディレクトリには、計算ノード上にマウントされたファイル システムが含まれます。 このディレクトリには、タスクから `AZ_BATCH_NODE_MOUNTS_DIR` 環境変数を参照することでアクセスできます。 詳細については、「[仮想ファイル システムを Batch プールにマウントする](virtual-file-mount.md)」を参照してください。

- **shared**:ノードで実行される "*すべて*" のタスクに、このディレクトリへの読み取り/書き込みアクセス権が与えられます。 ノード上で実行されるすべてのタスクは、このディレクトリのファイルを作成、読み取り、更新、削除することができます。 このディレクトリには、タスクから `AZ_BATCH_NODE_SHARED_DIR` 環境変数を参照することでアクセスできます。

- **startup**:この場所は、開始タスクの作業ディレクトリとして使用されます。 開始タスクによってノードにダウンロードされるすべてのファイルは、ここに格納されます。 開始タスクは、このディレクトリの下で、ファイルを作成、読み取り、更新、削除できます。 このディレクトリには、タスクから `AZ_BATCH_NODE_STARTUP_DIR` 環境変数を参照することでアクセスできます。

- **volatile**: このディレクトリは内部で使用するためのものです。 このディレクトリにファイルが存在すること、またはディレクトリ自体が今後も存在することは保証されません。

- **workitems**: このディレクトリには、ジョブ用のディレクトリと計算ノード上のタスクが含まれます。

    **workitems** ディレクトリ内には、ディレクトリが、そのノード上で実行される **タスク** ごとに作成されます。 このディレクトリには、`AZ_BATCH_TASK_DIR` 環境変数を参照してアクセスできます。

    各 **タスク** ディレクトリ内には、Batch サービスによって作業ディレクトリ (`wd`) が作成されます。その一意のパスは、`AZ_BATCH_TASK_WORKING_DIR` 環境変数によって指定されます。 このディレクトリは、タスクに読み取り/書き込みアクセスを提供します。 タスクは、このディレクトリの下で、ファイルを作成、読み取り、更新、および削除できます。 このディレクトリは、タスクに対して指定された *RetentionTime* 制約に基づいて保持されます。

    `stdout.txt` ファイルおよび `stderr.txt` ファイルは、タスクの実行中に **タスク** フォルダーに書き込まれます。

> [!IMPORTANT]
> ノードをプールから削除すると、ノードに格納されているすべてのファイルが削除されます。

## <a name="next-steps"></a>次のステップ

- Azure Batch での[エラー処理と検出](error-handling.md)について学習します。