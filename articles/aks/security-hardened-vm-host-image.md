---
title: AKS 仮想マシン ホストでのセキュリティ強化
description: AKS VM ホスト OS でのセキュリティの強化について説明します。
services: container-service
author: saudas
ms.topic: article
ms.date: 09/11/2019
ms.author: saudas
ms.custom: mvc
ms.openlocfilehash: d4105a9fba3c40c563198040afb811625727ead0
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2020
ms.locfileid: "77594382"
---
# <a name="security-hardening-in-aks-virtual-machine-hosts"></a>AKS 仮想マシン ホストでのセキュリティ強化 

Azure Kubernetes Service (AKS) は、SOC、ISO、PCI DSS、HIPAA の各標準に準拠する、セキュリティで保護されたサービスです。 この記事では、AKS 仮想マシン ホストに適用されるセキュリティ強化について説明します。 AKS のセキュリティについて詳しくは、「[Azure Kubernetes Service (AKS) でのアプリケーションとクラスターに対するセキュリティの概念](https://docs.microsoft.com/azure/aks/concepts-security)」をご覧ください。

AKS クラスターは、セキュリティが最適化された OS が実行されているホスト仮想マシンにデプロイされます。 現在、このホスト OS は、追加のセキュリティ強化手順が適用された Ubuntu 16.04 LTS イメージに基づいています (セキュリティ強化の詳細を参照してください)。   

セキュリティが強化されたホスト OS の目標は、攻撃の対象となる領域を減らし、安全な方法でコンテナーを展開できるようにすることです。 

> [!Important]
> セキュリティが強化された OS は、CIS でベンチマークされていません。 CIS ベンチマークとの重複はありますが、目標は CIS に準拠することではありません。 ホスト OS のセキュリティ強化の目標は、Microsoft 独自の内部ホスト セキュリティ標準と整合性のあるセキュリティ レベルに収束することです。 

## <a name="security-hardening-features"></a>セキュリティ強化の機能 

* AKS では、セキュリティが最適化されたホスト OS が既定で提供されます。 現在、代わりのオペレーティング システムを選択するオプションはありません。 

* Azure では、AKS 仮想マシン ホストに対して更新プログラム (セキュリティ更新プログラムを含む) が毎日適用されます。 これらの修正プログラムには、再起動が必要なものもあれば、そうでないものもあります。 お客様は、必要に応じて、AKS VM ホストの再起動をスケジュールする必要があります。 AKS への修正プログラムの適用を自動化する方法のガイダンスについては、[AKS ノードへの修正プログラムの適用](https://docs.microsoft.com/azure/aks/node-updates-kured)に関する記事をご覧ください。

以下では、セキュリティが最適化されたホスト OS を生成するために AKS-Engine で実装されているイメージのセキュリティ強化作業の概要を示します。 作業は、[この GitHub プロジェクト](https://github.com/Azure/aks-engine/projects/7)で実装されました。  

現在、AKS-Engine では、特定のセキュリティ標準は奨励も遵守もされていませんが、CIS (Center for Internet Security) 監査 ID は、必要に応じて便宜的に提供されています。 

## <a name="whats-configured"></a>構成されるもの

| CIS  | 監査の説明| 
|---|---|
| 1.1.1.1 |cramfs ファイル システムのマウントが無効になっていることを確認する|
| 1.1.1.2 |freevxfs ファイル システムのマウントが無効になっていることを確認する|
| 1.1.1.3 |jffs2 ファイル システムのマウントが無効になっていることを確認する|
| 1.1.1.4 |HFS ファイル システムのマウントが無効になっていることを確認する|
| 1.1.1.5 |HFS Plus ファイル システムのマウントが無効になっていることを確認する|
|1.4.3 |シングル ユーザー モードに対して必要な認証を確認する |
|1.7.1.2 |ローカル ログイン警告バナーが正しく構成されていることを確認する |
|1.7.1.3 |リモート ログイン警告バナーが正しく構成されていることを確認する |
|1.7.1.5 |/etc/issue に対するアクセス許可が構成されていることを確認する |
|1.7.1.6 |/etc/issue.net に対するアクセス許可が構成されていることを確認する |
|2.1.5 |--streaming-connection-idle-timeout が 0 に設定されていないことを確認する |
|3.1.2 |パケット リダイレクト送信が無効になっていることを確認する |
|3.2.1 |ソース ルーティング パッケージが受け付けられないことを確認する |
|3.2.2 |ICMP リダイレクトが受け付けられないことを確認する |
|3.2.3 |セキュリティで保護された ICMP リダイレクトが受け付けられないことを確認する |
|3.2.4 |疑わしいパケットがログに記録されることを確認する |
|3.3.1 |IPv6 ルーター アドバタイズが受け付けられないことを確認する |
|3.5.1 |DCCP が無効になっていることを確認する |
|3.5.2 |SCTP が無効になっていることを確認する |
|3.5.3 |RDS が無効になっていることを確認する |
|3.5.4 |TIPC が無効になっていることを確認する |
|4.2.1.2 |ログ記録が構成されていることを確認する |
|5.1.2 |/etc/crontab に対するアクセス許可が構成されていることを確認する |
|5.2.4 |SSH の X11 転送が無効になっていることを確認する |
|5.2.5 |SSH の MaxAuthTries が 4 以下に設定されていることを確認する |
|5.2.8 |SSH のルート ログインが無効になっていることを確認する |
|5.2.10 |SSH の PermitUserEnvironment が無効になっていることを確認する |
|5.2.11 |承認された MAX アルゴリズムのみが使用されていることを確認する |
|5.2.12 |SSH のアイドル タイムアウト間隔が構成されていることを確認する |
|5.2.13 |SSH の LoginGraceTime が 1 分以下に設定されていることを確認する |
|5.2.15 |SSH の警告バナーが構成されていることを確認する |
|5.3.1 |パスワード作成要件が構成されていることを確認する |
|5.4.1.1 |パスワードの有効期間が 90 日以下であることを確認する |
|5.4.1.4 |非アクティブなパスワードのロックが 30 日以下であることを確認する |
|5.4.4 |既定のユーザーの umask が 027 またはそれより厳しいことを確認する |
|5.6 |su コマンドへのアクセスが制限されていることを確認する|

## <a name="additional-notes"></a>その他のメモ
 
* 攻撃対象領域をさらに減らすため、OS では一部の不要なカーネル モジュール ドライバーが無効になっています。 

* セキュリティが強化された OS は、AKS プラットフォーム以外ではサポートされていません。 

## <a name="next-steps"></a>次のステップ  

AKS のセキュリティについて詳しくは、次の記事をご覧ください。 

[Azure Kubernetes Service (AKS)](https://docs.microsoft.com/azure/aks/intro-kubernetes)

[AKS のセキュリティに関する考慮事項](https://docs.microsoft.com/azure/aks/concepts-security)

[AKS のベスト プラクティス](https://docs.microsoft.com/azure/aks/best-practices)
