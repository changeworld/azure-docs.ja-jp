---
title: Azure Kubernetes Service (AKS) のサポート ポリシー
description: Azure Kubernetes Service (AKS) のサポート ポリシー、共同責任、およびプレビュー (アルファまたはベータ) 段階の機能について学習します。
services: container-service
author: jnoller
ms.service: container-service
ms.topic: article
ms.date: 04/01/2019
ms.author: jenoller
ms.openlocfilehash: c018e511bbeed41bc9caf721562349a37ad0e748
ms.sourcegitcommit: c69c8c5c783db26c19e885f10b94d77ad625d8b4
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/03/2019
ms.locfileid: "74707221"
---
# <a name="support-policies-for-azure-kubernetes-service"></a>Azure Kubernetes Service のサポート ポリシー

この記事では、Azure Kubernetes Service (AKS) のテクニカル サポート ポリシーおよび制限事項の詳細を示します。 また、ワーカー ノードの管理、マネージド コントロール プレーン コンポーネント、サード パーティ製オープン ソース コンポーネント、およびセキュリティまたは修正プログラムの管理についても説明します。

## <a name="service-updates-and-releases"></a>サービスの更新とリリース

* リリース情報については、[AKS のリリース ノート](https://github.com/Azure/AKS/releases)を参照してください。
* プレビュー段階の機能については、「[AKS Preview Features and Related Projects](https://github.com/Azure/AKS/blob/master/previews.md)」(AKS のプレビュー機能と関連プロジェクト) を参照してください。

## <a name="managed-features-in-aks"></a>AKS のマネージド機能

コンピューティング コンポーネントやネットワーク コンポーネントなどのサービス (IaaS) クラウド コンポーネントとしての基本インフラストラクチャでは、低レベルの制御とカスタマイズのオプションへのアクセス権がユーザーに付与されます。 これに対し、AKS では、必要な構成と機能の共通のセットをお客様に提供するターンキー Kubernetes のデプロイが提供されます。 AKS のお客様は、制限付きのカスタマイズ、デプロイ、およびその他のオプションを使用できます。 このお客様たちは、Kubernetes クラスターを心配したり、直接管理したりする必要はありません。

お客様は AKS を使用して、完全なマネージド *コントロール プレーン*を入手できます。 コントロール プレーンには、お客様が Kubernetes クラスターを操作してエンド ユーザーに提供するために必要なすべてのコンポーネントとサービスが含まれています。 Kubernetes のすべてのコンポーネントは Microsoft によって維持管理および運営されます。

Microsoft では、コントロール ウィンドウで次のコンポーネントを管理および監視します。

* Kubelet または Kubernetes API サーバー
* サービスの品質 (QoS)、スケーラビリティ、およびランタイムを提供する、etcd またはそれと互換性のあるキーと値ストア
* DNS サービス (kube-dns や CoreDNS など)
* Kubernetes プロキシまたはネットワーク

AKS は、完全なマネージド クラスター ソリューションではありません。 ワーカー ノードなどの一部のコンポーネントには*共同責任*があり、ユーザーが AKS クラスターの管理をサポートする必要があります。 たとえば、ワーカー ノードのオペレーティング システム (OS) のセキュリティ修正プログラムを適用するには、ユーザー入力が必要です。

*マネージド* サービスとは、Microsoft と AKS チームがデプロイと運用を行い、可用性と機能に対して責任を負うことを意味します。 これらのマネージド コンポーネントをお客様が変更することはできません。 Microsoft では、一貫したスケーラブルなユーザー エクスペリエンスを確保するためにカスタマイズを制限しています。 完全にカスタマイズ可能なソリューションについては、「[AKS-Engine](https://github.com/Azure/aks-engine)」(AKS エンジン) を参照してください。

> [!NOTE]
> AKS ワーカー ノードは、Azure portal で通常の Azure IaaS リソースとして表示されます。 しかし、これらの仮想マシンは、カスタムの Azure リソース グループ (先頭に MC\\* が付加されている) にデプロイされます。 AKS ワーカー ノードを変更することは可能です。 たとえば、Secure Shell (SSH) を使用して、通常の仮想マシンを変更する方法で AKS ワーカー ノードを変更したり (ただし、基本 OS イメージを変更することはできず、更新時または再起動時に変更が維持されるとは限りません)、AKS ワーカー ノードに他の Azure リソースを割り当てたりすることができます。 ただし、*帯域外の管理やカスタマイズ*を行うと、AKS クラスターがサポートできない状態になる場合あります。 Microsoft サポートが変更を指示しない限り、ワーカー ノードを変更しないでください。

## <a name="shared-responsibility"></a>Shared responsibility

クラスターが作成されると、お客様は AKS で作成する Kubernetes ワーカー ノードを定義します。 お客様のワークロードは、これらのノードで実行されます。 お客様はこれらのワーカー ノードを所有し、表示または変更できます。

お客様のクラスター ノードではプライベート コードが実行され、機密データが格納されるため、Microsoft サポートはこれらのノードへのアクセスを制限されています。 Microsoft サポートは、お客様による明確な許可または支援なしに、これらのノードにサインインしたり、これらのノードでコマンドを実行したり、これらのノードのログを表示することができません。

ワーカー ノードは機密性が高いため、Microsoft では、細心の注意を払ってバックグラウンド管理を制限しています。 Kubernetes マスター ノード、etcd、および Microsoft によって管理されている他のコンポーネントで障害が発生した場合でも、多くの場合、お客様のワークロードの実行は継続されます。 ワーカー ノードが不注意に変更された場合、データとワークロードの損失が発生し、クラスターがサポートできない状態になる可能性があります。

## <a name="aks-support-coverage"></a>AKS のサポート範囲

Microsoft は、以下に関するテクニカル サポートを提供します。

* API サーバーなど、Kubernetes Service によって提供およびサポートされるすべての Kubernetes コンポーネントへの接続。
* Kubernetes コントロール プレーン サービスの管理、アップタイム、QoS、操作 (Kubernetes マスター ノード、API サーバー、etcd、kube-dns など)。
* etcd。 サポートには、障害計画とクラスターの状態復元のために 30 分ごとに行われる etcd のすべてのデータの自動的で透過的なバックアップが含まれます。 これらのバックアップは、お客様やユーザーが直接使用することはできません。 これらにより、データの信頼性と一貫性が確保されます。
* Kubernetes 用の Azure クラウド プロバイダー ドライバー内のすべての統合ポイント。 これらには、ロード バランサー、永続ボリューム、ネットワーク (Kubernetes や Azure CNI) などの他の Azure サービスへの統合が含まれます。
* Kubernetes API サーバー、etcd、kube-dns などのコントロール プレーン コンポーネントのカスタマイズに関する質問または問題。
* Azure CNI、Kubenet、他のネットワーク アクセスなどのネットワークに関する問題、および機能の問題。 問題には、DNS 解決、パケット損失、ルーティングなどが含まれる可能性があります。 Microsoft では、次のさまざまなネットワーク シナリオをサポートしています。
  * クラスターおよび関連するコンポーネント内の Kubenet (基本) と高度なネットワーク (Azure CNI)
  * その他の Azure サービスおよびアプリケーションへの接続
  * イングレス コントローラーとイングレスまたはロード バランサーの構成
  * ネットワーク パフォーマンスと待機時間

Microsoft では、次に関するテクニカル サポートは提供していません。

* Kubernetes の使用方法に関する質問。 たとえば、Microsoft サポートでは、カスタムのイングレス コント ローラーの作成方法、アプリケーションのワークロードの使用方法、サード パーティまたはオープン ソースのソフトウェア パッケージやツールの適用方法に対するアドバイスは提供していません。
  > [!NOTE]
  > Microsoft サポートでは、AKS クラスターの機能、カスタマイズ、およびチューニング (Kubernetes 操作の問題や手順など) に対するアドバイスは提供できます。
* Kubernetes コントロール プレーンの一部として提供されない、または AKS クラスターと共にデプロイされない、サード パーティのオープン ソース プロジェクト。 これらのプロジェクトには、Istio、Helm、Envoy などが含まれる場合があります。
  > [!NOTE]
  > Microsoft では、Helm や Kured など、サード パーティのオープン ソース プロジェクトに対してベスト エフォートのサポートを提供できます。 サード パーティのオープン ソース ツールが Kubernetes の Azure クラウド プロバイダーまたは他の AKS 固有のバグと統合される場合、Microsoft では、Microsoft ドキュメントからの例やアプリケーションをサポートします。
* サード パーティのクローズド ソース ソフトウェア。 このソフトウェアには、セキュリティ スキャン ツール、およびネットワーク デバイスまたはソフトウェアが含まれる場合があります。
* マルチクラウドまたはマルチベンダーの構築に関する問題。 たとえば、Microsoft では、フェデレーション マルチパブリック クラウド ベンダーのソリューションの実行に関連する問題はサポートしていません。
* [AKS ドキュメント](https://docs.microsoft.com/azure/aks/)に記載されている以外のネットワークのカスタマイズ。
  > [!NOTE]
  > Microsoft では、ネットワーク セキュリティ グループ (NSG) に関連する問題およびバグをサポートしています。 Microsoft サポートでは、たとえば、NSG の更新の失敗や、NSG またはロード バランサーの予期しない動作に関する質問にはお答えできます。

## <a name="aks-support-coverage-for-worker-nodes"></a>ワーカー ノードに対する AKS のサポート範囲

### <a name="microsoft-responsibilities-for-aks-worker-nodes"></a>AKS ワーカー ノードに対する Microsoft の責任

Microsoft とお客様は、次の場合に、Kubernetes ワーカー ノードに対する責任を共有します。

* 基本 OS イメージに、必要な追加機能 (監視エージェントやネットワーク エージェントなど) がある。
* ワーカー ノードが OS 修正プログラムを自動的に受信する。
* ワーカー ノード上で実行される Kubernetes コントロール プレーン コンポーネントに関する問題が自動修復される。 次のようなコンポーネントがあります。
  * kube-proxy
  * Kubernetes マスター コンポーネントへの通信パスを提供するネットワーク トンネル
  * kubelet
  * Docker または Moby デーモン

> [!NOTE]
> ワーカー ノード上でコントロール プレーン コンポーネントが動作不能になった場合、AKS チームにより個々のコンポーネントまたはワーカー ノード全体を再起動する必要が生じることがあります。 こうした再起動操作は自動化されており、これにより一般的な問題の自動修復機能が提供されます。 こうした再起動は、緊急のメンテナンスや停止が生じない限り、クラスターではなく_ノード_ レベルでのみ行われます。

### <a name="customer-responsibilities-for-aks-worker-nodes"></a>AKS ワーカー ノードに対するお客様の責任

Microsoft では、OS レベルの修正プログラムを適用するため、ワーカー ノードが自動的に再起動されません。 OS 修正プログラムはワーカー ノードに配信されますが、変更を適用するためにワーカー ノードの再起動を*お客様*の責任で行う必要があります。 共有ライブラリ、ソリッド ステート ハイブリッド ドライブ (SSHD) などのデーモン、およびシステムや OS レベルのその他のコンポーネントには、修正プログラムが自動的に適用されます。

お客様は、Kubernetes のアップグレードを実行する責任があります。 アップグレードは、Azure コントロール パネルまたは Azure CLI を使用して実行できます。 このことは、Kubernetes に対するセキュリティまたは機能の強化を含む更新プログラムに該当します。

> [!NOTE]
> AKS は*マネージド サービス*なので、その最終目標には、サービス管理がより完全で手のかからないものになるよう、修正プログラム、更新プログラム、およびログ収集に対する責任を取り除くことが含まれます。 エンド ツー エンドの管理用のサービスの容量が増大するにつれ、今後のリリースでは、一部の機能 (ノードの再起動や修正プログラムの自動適用など) が除外される可能性があります。

### <a name="security-issues-and-patching"></a>セキュリティの問題と修正プログラムの適用

AKS の 1 つまたは複数のコンポーネントでセキュリティ上の欠陥が見つかった場合、AKS チームは、問題を軽減するために影響を受けるすべてのクラスターに修正プログラムを適用します。 または、チームがユーザーにアップグレード ガイダンスを示します。

セキュリティ上の欠陥の影響を受けるワーカー ノードについて、ダウンタイムが発生しない修正プログラムがある場合、AKS チームはその修正プログラムを適用し、変更をユーザーに通知します。

セキュリティ更新プログラムでワーカー ノードの再起動が必要な場合、Microsoft はこの要件をお客様に通知します。 お客様は、クラスターの更新プログラムを取得するために再起動または更新を行う責任があります。 ユーザーが AKS のガイダンスに従って修正プログラムを適用しない場合、クラスターはセキュリティ問題に対して脆弱なままになります。

### <a name="node-maintenance-and-access"></a>ノードのメンテナンスとアクセス

ワーカー ノードは共同責任を有し、お客様によって所有されます。 このため、お客様は、ワーカー ノードにサインインし、カーネルの更新やパッケージのインストールまたは削除など、問題を引き起こす可能性のある変更を加える可能性があります。

お客様が破壊的な変更を加えるか、またはお客様がコントロール プレーン コンポーネントをオフラインにしたり機能しない状態にしたりした場合、AKS によりこのエラーが検出され、ワーカー ノードが以前の稼働状態に自動的に復元されます。

お客様はワーカー ノードにサインインして変更を加えることができますが、変更によってクラスターがサポートできない状態になる可能性があるため、お勧めできません。

## <a name="network-ports-access-and-nsgs"></a>ネットワーク ポート、アクセス、NSG

マネージド サービスである AKS には、ネットワークと接続に関して固有の要件があります。 これらの要件は、通常の IaaS コンポーネントの要件ほど柔軟ではありません。 AKS では、NSG ルールのカスタマイズ、特定のポートのブロック (たとえば、送信ポート 443 をブロックするファイアウォール ルールの使用)、URL のホワイト リスト登録などの操作により、クラスターがサポートできない状態になる可能性があります。

> [!NOTE]
> 現在、AKS では、クラスターからのエグレス トラフィックを完全にロックダウンすることはできません。 クラスターで送信トラフィックに使用できる URL とポートの一覧を制御するには、[エグレス トラフィックの制限](limit-egress-traffic.md)に関する記事を参照してください。

## <a name="unsupported-alpha-and-beta-kubernetes-features"></a>非サポートのアルファとベータの Kubernetes 機能

AKS では、アップストリームの Kubernetes プロジェクト内の安定した機能のみがサポートされます。 文書化されていない限り、AKS では、アップストリームの Kubernetes プロジェクトで使用できるアルファとベータの機能がサポートされていません。

アルファまたはベータの機能は、次の 2 つのシナリオで、一般的に利用可能になる前にロール アウトされる場合があります。

* お客様が AKS の製品、サポート、またはエンジニアリング チームと会って、これらの新機能を試すことを要求した。
* これらの機能が[機能フラグによって有効になっており](https://github.com/Azure/AKS/blob/master/previews.md)、 お客様がこれらの機能を使用することを明示的に選択する必要がある。

## <a name="preview-features-or-feature-flags"></a>プレビュー機能または機能フラグ

拡張テストとユーザー フィードバックを必要とする機能の場合、Microsoft では、新しいプレビュー機能または機能フラグの背後にある機能をリリースします。 これらの機能は、プレリリースまたはベータ機能としてお考えください。

プレビュー機能または機能フラグは、運用環境向けではありません。 API と動作の継続的な変更、バグの修正、その他の変更により、クラスターが不安定になったり、ダウンタイムが生じたりする可能性があります。

パブリック プレビュー機能は、プレビュー段階にあり、運用環境向けではなく、AKS のテクニカル サポート チームによるサポートが営業時間内に限られるため、"ベスト エフォート" サポートに該当します。 追加情報については、次を参照してください。

* [Azure サポートに関する FAQ](https://azure.microsoft.com/support/faq/)

> [!NOTE]
> プレビュー機能は、Azure *サブスクリプション* レベルで有効になります。 運用サブスクリプションにはプレビュー機能をインストールしないでください。 運用サブスクリプションでは、プレビュー機能によって API の既定の動作が変更され、通常の操作が影響を受ける可能性があります。

## <a name="upstream-bugs-and-issues"></a>アップストリームのバグと問題

アップストリームの Kubernetes プロジェクトにおける開発速度では、バグが必ず発生します。 これらのバグの一部には、修正プログラムを適用できず、AKS システム内で回避できないものがあります。 代わりに、バグの修正では、アップストリームのプロジェクト (Kubernetes、ノードまたはワーカーのオペレーティング システム、カーネルなど) に対する大規模な修正プログラムが必要になります。 Microsoft が所有するコンポーネント (Azure クラウド プロバイダーなど) については、AKS と Azure の担当者がコミュニティのアップストリームで問題の修正に努めます。

テクニカル サポートの問題の根本原因が 1 つ以上のアップストリームのバグである場合、AKS のサポートおよびエンジニアリング チームは次のことを行います。

* アップストリームのバグを特定し、その問題がお客様のクラスターやワークロードに影響する理由を説明するのに役立つサポートの詳細にリンクします。 お客様は、問題を監視し、新しいリリースで修正プログラムがいつ提供されるかを確認できるよう、必要なリポジトリへのリンクを受け取ります。
* 潜在的な回避策または軽減策を提供します。 問題を軽減できる場合は、[既知の問題](https://github.com/Azure/AKS/issues?q=is%3Aissue+is%3Aopen+label%3Aknown-issue)が AKS リポジトリに記録されます。 既知の問題の記録には、次の内容が示されます。
  * アップストリームのバグへのリンクを含む問題
  * 回避策、および解決策のアップグレードやその他の永続化に関する詳細情報
  * アップストリームのリリース周期に基づく、問題の組み込みの大まかなタイムライン
