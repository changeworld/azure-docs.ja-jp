<properties 
	pageTitle="クラウド サービスの管理方法 - Azure" 
	description="Azure の管理ポータルでクラウド サービスを管理する方法について説明します。" 
	services="cloud-services" 
	documentationCenter="" 
	authors="Thraka" 
	manager="timlt" 
	editor=""/>

<tags 
	ms.service="cloud-services" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="03/02/2015" 
	ms.author="adegeo"/>





# クラウド サービスの管理方法

Azure の管理ポータルの **[クラウド サービス]** 領域では、サービス ロールまたは展開の更新、ステージングされた展開の運用環境への昇格、クラウド サービスに対するリソースのリンク (リソースの依存関係を把握してリソースの規模をまとめて設定するため)、およびクラウド サービスまたは展開の削除ができます。


## 方法: クラウド サービス ロールまたは展開の更新

クラウド サービスのアプリケーション コードを更新する必要がある場合は、ダッシュボード、**[クラウド サービス]** ページ、または **[インスタンス]** ページの **[更新]** を使用します。1 つのロールを更新することも、すべてのロールを更新することもできます。新しいサービス パッケージとサービス構成ファイルをアップロードする必要があります。

1. [Azure の管理ポータル](https://manage.windowsazure.com/)のダッシュボード、**[クラウド サービス]** ページ、または **[インスタンス]** ページで、**[更新]** をクリックします。

	![UpdateDeployment](./media/cloud-services-how-to-manage/CloudServices_UpdateDeployment.png)

2. **[デプロイ ラベル]** ボックスに、デプロイメントを識別する名前を入力します (たとえば、mycloudservice4)。デプロイ ラベルはダッシュボードの **[クイック スタート]** に表示されます。

3. **[パッケージ]** で、**[参照]** を使ってサービス パッケージ ファイル (.cspkg) をアップロードします。

4. **[構成]** で、**[参照]** を使ってサービス構成ファイル (.cscfg) をアップロードします。

5. **[ロール]** で、クラウド サービスのすべてのロールをアップグレードする場合は、**[すべて]** をクリックします。1 つのロールの更新を実行するには、更新するロールを選択します。特定のロールを選択して更新した場合でも、サービス構成ファイルの更新内容はすべてのロールに適用されます。

6. 更新によってロールの数またはロールのサイズが変わる場合は、**[ロールのサイズまたは数が変更された場合に更新を許可する]** チェック ボックスをオンにしないと更新を続行できません。

	ロールのサイズ (つまり、ロール インスタンスをホスティングする仮想マシンのサイズ) またはロールの数を変更した場合、各ロール インスタンス (仮想マシン) にイメージを再適用する必要があり、ローカル データがすべて失われることに注意してください。

7. ロール インスタンスが 1 つしかないサービス ロールがある場合は、**[1 つ以上のロールに単一のインスタンスが含まれている場合でも更新する]** チェック ボックスをオンにして、アップグレードを続行できるようにします。

	Azure でクラウド サービスの更新中に 99.95% の可用性を保証できるのは、各ロールに少なくとも 2 つのロール インスタンス (仮想マシン) がある場合だけです。この場合、1 台の仮想マシンでクライアントからの要求を処理し、もう 1 台で更新を行うことができます。

8. **[OK]** (チェックマーク) をクリックして、サービスの更新を開始します。



## 方法: 展開をスワップしてステージングされた展開を運用環境に昇格

**[スワップ]** を使用して、クラウド サービスのステージング展開を運用環境に昇格します。クラウド サービスの新しいリリースを展開するときは、顧客が運用環境で現在のリリースを使用しながら、クラウド サービスのステージング環境で新しいリリースをステージングしテストできます。新しいリリースを運用環境に昇格する準備ができたら、**[スワップ]** を使用して 2 つの展開のアドレスである URL を切り替えることができます。

展開のスワップは、**[クラウド サービス]** ページまたはダッシュボードから実行できます。

1. [管理ポータル](https://manage.windowsazure.com/)で、**[クラウド サービス]** をクリックします。

2. クラウド サービスの一覧で、クラウド サービスをクリックして選択します。

3. **[スワップ]** をクリックします。

	次のような確認ダイアログが表示されます。

	![クラウド サービスのスワップ](./media/cloud-services-how-to-manage/CloudServices_Swap.png)

4. 展開情報を確認した後、**[はい]** をクリックして展開をスワップします。

	変更されるのは展開の仮想 IP アドレス (VIP) だけであるため、展開のスワップは直ちに実行されます。

	コンピューティング費用を節約するために、新しい運用展開が予想どおりに動作することが確認できたら、ステージング環境の展開を削除することができます。

## 方法: クラウド サービスに対するリソースのリンク

使用しているクラウド サービスと他のリソースとの依存関係を示すために、Azure SQL データベース インスタンスまたはストレージ アカウントをクラウド サービスにリンクすることができます。リソースのリンクとリンク解除は **[リンク済みリソース]** ページで実行できます。利用状況はクラウド サービスのダッシュボードで監視します。リンクされているストレージ アカウントで監視が有効になっている場合は、クラウド サービスのダッシュボードで要求数合計を監視できます。

**[リンク]** を使用して、新規または既存の SQL データベース インスタンスまたはストレージ アカウントをクラウド サービスにリンクします。その後、**[スケール]** ページで、クラウド サービスのロールと共にデータベースの規模を変更できます(ストレージ アカウントは、使用量の変動に伴い自動的に規模が変更されます)。 詳細については、「[クラウド サービスおよびリンクされたリソースの規模の設定方法](cloud-services-how-to-scale.md)」を参照してください。

また、管理ポータルの **[データベース]** ノードでデータベースの監視、管理、および規模の設定ができます。

この意味でリソースの "リンク" を行ってもアプリケーションはリソースに接続されません。**[リンク]** を使用して新しいデータベースを作成した場合、アプリケーション コードに接続文字列を追加して、クラウド サービスをアップグレードする必要があります。また、リンクされたストレージ アカウントのリソースをアプリケーションで使用している場合も、接続文字列を追加する必要があります。

以下の手順では、新しい SQL データベース サーバーに展開された新しい SQL データベース インスタンスをクラウド サービスにリンクする方法を説明しています。

### クラウド サービスに SQL データベース インスタンスをリンクするには

1. [管理ポータル](http://manage.windowsazure.com/)で、**[クラウド サービス]** をクリックします。目的のクラウド サービスの名前をクリックして、ダッシュボードを開きます。

2. **[リンク済みリソース]** をクリックします。

	**[リンク済みリソース]** ページが開きます。

	![LinkedResourcesPage](./media/cloud-services-how-to-manage/CloudServices_LinkedResourcesPage.png)

3. **[リソースをリンクします]** または **[リンク]** をクリックします。

	**リソースのリンク** ウィザードが起動します。

	![リンク ページ 1](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkPage1.png)

4. **[新しいリソースを作成する]** または **[既存のリソースをリンクする]** をクリックします。

5. リンクするリソースの種類を選択します。[管理ポータル](http://manage.windowsazure.com/)で **[SQL データベース]** をクリックします(プレビュー管理ポータルは、ストレージ アカウントをクラウド サービスにリンクする機能をサポートしていません)。

6. データベースの構成を完了するには、管理ポータルの **[SQL データベース]** 領域のヘルプに記載された指示に従ってください。

	リンク操作の進捗状況はメッセージ領域で知ることができます。

	![リンクの進捗状況](./media/cloud-services-how-to-manage/CloudServices_LinkedResources_LinkProgress.png)

	リンク操作が完了すると、リンクされたリソースの状態をクラウド サービスのダッシュボードで監視できます。リンクされた SQL データベースの規模設定の詳細については、「[クラウド サービスおよびリンクされたリソースの規模の設定方法](cloud-services-how-to-scale.md)」を参照してください。

### リンク済みリソースのリンクを解除するには

1. [管理ポータル](http://manage.windowsazure.com/)で、**[クラウド サービス]** をクリックします。目的のクラウド サービスの名前をクリックして、ダッシュボードを開きます。

2. **[リンク済みリソース]** をクリックして、リソースを選択します。

3. **[リンクの解除]** をクリックします。次に、確認ダイアログで **[はい]** をクリックします。

	SQL データベースのリンクを解除しても、データベースまたはデータベースに対するアプリケーションの接続は影響を受けません。引き続き、管理ポータルの **[SQL データベース]** 領域でデータベースを管理できます。



## 方法: 展開とクラウド サービスの削除

クラウド サービスを削除する前に、既存の展開をそれぞれ削除する必要があります。

コンピューティング費用を節約するために、運用展開が予想どおりに動作することが確認できたら、ステージング環境の展開を削除することができます。クラウド サービスが実行中でない場合でも、ロール インスタンスのコンピューティング費用は請求されます。

以下の手順を使用して、展開またはクラウド サービスを削除します。

1. [管理ポータル](http://manage.windowsazure.com/)で、**[クラウド サービス]** をクリックします。

2. 目的のクラウド サービスを選択して、**[削除]** をクリックします(ダッシュボードを開かないでクラウド サービスを選択するには、クラウド サービスの名前以外の場所をクリックします)。

	ステージング環境または運用環境の展開がある場合、ウィンドウの下部に次のような選択肢のメニューが表示されます。クラウド サービスを削除する前に、既存の展開をすべて削除する必要があります。

	![削除メニュー](./media/cloud-services-how-to-manage/CloudServices_DeleteMenu.png)


3. 展開を削除するには、**[運用環境の展開を削除する]** または **[ステージング環境の展開を削除する]** をクリックします。次に、確認ダイアログで **[はい]** をクリックします。

4. クラウド サービスの削除を予定している場合は、必要に応じて手順 3. を繰り返して、その他のデプロイもすべて削除します。

5. クラウド サービスを削除するには、**[クラウド サービスの削除]** をクリックします。次に、確認ダイアログで **[はい]** をクリックします。

> [AZURE.NOTE]Azure でクラウド サービスに詳細監視が構成されている場合、クラウド サービスを削除しても、ストレージ アカウントから監視データは削除されません。データは手作業で削除する必要があります。メトリック テーブルのある場所については、「<a href="http://azure.microsoft.com/documentation/articles/cloud-services-how-to-monitor/">クラウド サービスの監視方法</a>」の「方法: 管理ポータル外で詳細監視データにアクセス」を参照してください。


<!--HONumber=54-->