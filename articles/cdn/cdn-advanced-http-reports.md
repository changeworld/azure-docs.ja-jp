---
title: Azure CDN の詳細な HTTP レポートを使用した利用統計の分析 | Microsoft Docs
description: Microsoft Azure CDN の詳細な HTTP レポートを作成する方法を説明します。 これらのレポートでは、CDN アクティビティの詳細情報が提供されます。
services: cdn
documentationcenter: ''
author: zhangmanling
manager: erikre
editor: ''
ms.assetid: ef90adc1-580e-4955-8ff1-bde3f3cafc5d
ms.service: azure-cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: 0b0eec2425f8a1663eb7a09c83a6bad037d1d79c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/27/2020
ms.locfileid: "67594105"
---
# <a name="analyze-usage-statistics-with-azure-cdn-advanced-http-reports"></a>Azure CDN の詳細な HTTP レポートを使用した利用統計の分析
## <a name="overview"></a>概要
このドキュメントでは、Microsoft Azure CDN の高度な HTTP レポート機能について説明します。 これらのレポートでは、CDN アクティビティの詳細情報が提供されます。

[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="accessing-advanced-http-reports"></a>詳細な HTTP レポートへのアクセス
1. CDN プロファイル ブレードで、 **[管理]** をクリックします。
   
    ![[CDN プロファイル] ブレードの [管理] ボタン](./media/cdn-advanced-http-reports/cdn-manage-btn.png)
   
    CDN 管理ポータルが開きます。
2. **[分析]** タブにマウス ポインターを合わせ、次に **[詳細な HTTP レポート]** フライアウトにポインターを合わせます。  **[HTTP ラージ プラットフォーム]** をクリックします。
   
    ![CDN management portal - Advanced Reports menu](./media/cdn-advanced-http-reports/cdn-advanced-reports.png)
   
    レポートのオプションが表示されます。

## <a name="geography-reports-map-based"></a>地理的レポート (地図ベース)
コンテンツの要求元である地域を示すために地図を利用するレポートは 5 つあります。 これらのレポートとは、世界、米国、カナダ、ヨーロッパ、アジア太平洋の各地図です。

各マップ ベースのレポートには、地理的なエンティティが順位付けされます (つまり、国/地域。マップは、コンテンツが要求された場所を視覚化します)。 視覚化できるようにするには、各地域で発生した要求の量に従ってその地域を色分けします。 地域の色が薄い場合はコンテンツの要求量が少ないことを表し、濃い場合は要求量がより多いことを表します。

各地域のトラフィックや帯域幅の詳細情報は、地図のすぐ下に示されます。 これにより、各地域のヒット総数、ヒットの割合、転送データの総量 (GB)、転送データの割合を確認できます。 これらの各メトリックについては、説明を参照してください。 最後に、地域 (国/地域、州、県) にマウス ポインターを合わせると、その地域の名前とその地域で発生したヒットの割合がヒントとして表示されます。

地図ベースの地理的レポートの各種類について、簡単な説明を以下に示します。

| レポート名 | 説明 |
| --- | --- |
| 世界地図 |このレポートでは、CDN コンテンツの世界全体での要求を表示できます。 世界地図上では、その地域で発生したヒットの割合を示すために各国/各地域が色分けされています。 |
| 米国地図 |このレポートでは、米国における CDN コンテンツの要求を表示できます。 この地図上では、その地域で発生したヒットの割合を示すために各州が色分けされています。 |
| カナダ地図 |このレポートでは、カナダにおける CDN コンテンツの要求を表示できます。 この地図上では、その地域で発生したヒットの割合を示すために各州が色分けされています。 |
| ヨーロッパ地図 |このレポートでは、ヨーロッパにおける CDN コンテンツの要求を表示できます。 この地図上では、その地域で発生したヒットの割合を示すために各国/各地域が色分けされています。 |
| アジア太平洋地図 |このレポートでは、アジアにおける CDN コンテンツの要求を表示できます。 この地図上では、その地域で発生したヒットの割合を示すために各国/各地域が色分けされています。 |

## <a name="geography-reports-bar-charts"></a>地理的レポート (棒グラフ)
地理に従って統計情報を提供するその他のレポートとして、上位都市と上位国の 2 つがあります。 これらのレポートでは、都市と国/地域を、それらの国/地域で発生したヒット数に従って、それぞれ順位付けしています。 このようなレポートを生成すると、特定のプラットフォームを介してコンテンツを要求した都市または国/地域の上位 10 件が棒グラフで示されます。 この棒グラフを使用すると、コンテンツの要求が最も多く生成される地域をすばやく評価できます。

グラフの左側 (Y 軸) は、指定した地域で発生したヒット数を示します。 グラフのすぐ下 (X 軸) には、上位 10 件の各地域のラベルが表示されます。

### <a name="using-the-bar-charts"></a>棒グラフの使用
* 棒の上にマウス ポインターを合わせると、名前と、その地域で発生したヒット総数がヒントとして表示されます。
* 上位都市のレポートのヒントでは、都市がその名前、州、および国/地域の略名で示されます。
* 要求の発生元である都市や地域 (州) を特定できない場合は、不明であることが示されます。 国/地域が不明な場合は、2 つの疑問符 ("??") が表示されます。
* レポートには、"ヨーロッパ" や "アジア/太平洋地域" のメトリックが含まれる場合があります。 これらの項目は、その地域内のすべての IP アドレスに関する統計情報を提供するものではありません。 むしろ、特定の都市や国/地域ではなく、ヨーロッパやアジア/太平洋地域に分散している IP アドレスから送信される要求のみに適用されます。

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、上位 250 件の地域について、ヒット総数、ヒットの割合、転送データの量 (GB)、転送データの割合を確認できます。 これらの各メトリックについては、説明を参照してください。

この 2 種類のレポートの簡単な説明を以下に示します。

| レポート名 | 説明 |
| --- | --- |
| 上位都市 |このレポートでは、各地域で発生したヒット数に従って都市を順位付けします。 |
| 上位国 |このレポートでは、各国/各地域で発生したヒット数に従って国/地域を順位付けします。 |

## <a name="daily-summary"></a>概要 (日単位)
"概要 (日単位)" レポートでは、特定のプラットフォーム経由のヒット総数と転送されたデータを 1 日単位で表示できます。 この情報を使用すると、CDN アクティビティのパターンをすばやく識別できます。 たとえば、予想されたトラフィックを上回るか下回る日を検出する場合にこのレポートが役立ちます。

この種類のレポートを生成すると、レポート対象期間の 1 日ごとに発生したプラットフォーム固有の要求量について棒グラフで視覚的に示すことができます。 それには、1 日ごとに 1 つの棒がレポートに表示されます。 たとえば、"先週" という期間を選択すると、7 つの棒を含む棒グラフが生成されます。 各棒は、その日に発生したヒットの総数を示します。

グラフの左側 (Y 軸) は、指定した日に発生したヒット数を示します。 グラフのすぐ下 (X 軸) には、レポートに含まれる各日付を示すラベル (YYYY-MM-DD 形式) が表示されます。

> [!TIP]
> 棒の上にマウス ポインターを合わせると、その日に発生したヒット総数がヒントとして表示されます。
> 
> 

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、レポート対象期間の 1 日ごとのヒット総数と転送データの量 (GB) を確認できます。

## <a name="by-hour"></a>時間別
"時間別" レポートでは、特定のプラットフォーム経由のヒット総数と転送データを 1 時間単位で表示できます。 この情報を使用すると、CDN アクティビティのパターンをすばやく識別できます。 たとえば、予想されるトラフィックを上回るか下回る時間帯を検出する場合にこのレポートが役立ちます。

この種類のレポートを生成すると、レポート対象期間の 1 時間ごとに発生したプラットフォーム固有の要求量について棒グラフで視覚的に示すことができます。 それには、レポートの対象となる 1 時間ごとに 1 つの棒が表示されます。 たとえば、期間として 24 時間を選択すると、24 個の棒を含む棒グラフが生成されます。 各棒は、その時間に発生したヒットの総数を示します。

グラフの左側 (Y 軸) は、指定した時間に発生したヒット数を示します。 グラフのすぐ下 (X 軸) には、レポートに含まれる各時間の日時を示すラベル (YYYY-MM-DD hh:mm 形式) が表示されます。 時間の報告には 24 時間形式が使用され、時間は UTC/GMT タイム ゾーンを使用して指定されます。

> [!TIP]
> 棒の上にマウス ポインターを合わせると、その時間に発生したヒット総数がヒントとして表示されます。
> 
> 

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、レポート対象期間の 1 時間ごとのヒット総数と転送データの量 (GB 単位) を確認できます。

## <a name="by-file"></a>ファイル別
"ファイル別" レポートでは、最も要求の多かった資産について特定のプラットフォーム経由で発生した要求とトラフィックの量を確認できます。 この種類のレポートを生成すると、指定した期間に最も多く要求された資産の上位 10 件について棒グラフが生成されます。

> [!NOTE]
> このレポートの目的として、エッジ CNAME URL は同等の CDN URL に変換されます。 これにより、資産の要求に使用されるのが CDN URL とエッジ CNAME URL のどちらであるかに関係なく、その資産に関連付けられたヒット総数を正確に把握できます。
> 
> 

グラフの左側 (Y 軸) は、指定した期間内の各資産に対する要求の数を示します。 グラフのすぐ下 (X 軸) には、要求された資産の上位 10 件それぞれのファイル名を示すラベルが表示されます。

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、要求された資産の上位 250 件それぞれについて、相対パス、ヒット総数、ヒットの割合、転送データの量 (GB)、転送データの割合を確認できます。

## <a name="by-file-detail"></a>ファイルの詳細別
"ファイルの詳細別" レポートでは、特定の資産の特定のプラットフォーム経由で発生した要求とトラフィックの量を確認できます。 このレポートの最上部には、[ファイルの詳細] オプションがあります。 このオプションを使用すると、選択したプラットフォームで最も多く要求された資産の一覧が示されます。 "ファイルの詳細別" レポートを生成するには、[ファイルの詳細] から目的の資産を選択する必要があります。 選択すると、指定した期間に生成された日々の要求量を示す棒グラフが表示されます。

グラフの左側 (Y 軸) は、特定の日に発生した資産に対する要求の総数を示します。 グラフのすぐ下 (X 軸) には、資産に対する CDN 要求が報告された日付を示すラベル (YYYY-MM-DD 形式) が表示されます。

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、レポート対象期間の 1 日ごとのヒット総数と転送データの量 (GB) を確認できます。

## <a name="by-file-type"></a>ファイルの種類別
"ファイルの種類別" レポートでは、ファイルの種類別に発生した要求とトラフィックの量を確認できます。 この種類のレポートを生成すると、上位 10 件のファイルの種類で生成されたヒットの割合がドーナツ グラフで示されます。

> [!TIP]
> ドーナツ グラフのスライスにマウス ポインターを合わせると、そのファイルの種類のインターネット メディアの種類がヒントとして表示されます。
> 
> 

ドーナツ グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、上位 250 件のファイルの種類それぞれについて、ファイル名拡張子/インターネット メディアの種類、ヒット総数、ヒットの割合、転送データの量 (GB)、転送データの割合を確認できます。

## <a name="by-directory"></a>ディレクトリ別
"ディレクトリ別" レポートでは、特定のディレクトリのコンテンツに関して、特定のプラットフォーム経由で発生した要求とトラフィックの量を表示できます。 この種類のレポートを生成すると、上位 10 個のディレクトリのコンテンツで生成されたヒット総数が棒グラフに示されます。

### <a name="using-the-bar-chart"></a>棒グラフの使用
* 棒の上にマウス ポインターを合わせると、対応するディレクトリへの相対パスが表示されます。
* ディレクトリのサブフォルダーに格納されているコンテンツは、ディレクトリ別の要求の計算時にはカウントされません。 この計算には、実際のディレクトリに格納されているコンテンツに対して生成された要求の数のみが使用されます。
* このレポートの目的として、エッジ CNAME URL は同等の CDN URL に変換されます。 これにより、資産の要求に使用されるのが CDN URL とエッジ CNAME URL のどちらであるかに関係なく、その資産に関連付けられたすべての統計情報を正確に把握できます。

グラフの左側 (Y 軸) は、上位 10 個のディレクトリに格納されているコンテンツに対する要求の総数を示します。 グラフの棒はそれぞれ、1 つのディレクトリを表します。 色分け手法を使用して、上位 250 個の全ディレクトリ セクションに表示されている 1 つのディレクトリに 1 つの棒を対応させます。

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、上位 250 個のディレクトリそれぞれについて、相対パス、ヒット総数、ヒットの割合、転送データの量 (GB)、転送データの割合を確認できます。

## <a name="by-browser"></a>ブラウザー別
"ブラウザー別" レポートでは、コンテンツの要求に使用されたブラウザーを表示できます。 この種類のレポートを生成すると、上位 10 件のブラウザーで処理された要求の割合が円グラフに示されます。

### <a name="using-the-pie-chart"></a>円グラフの使用
* 円グラフのスライスにマウス ポインターを合わせると、ブラウザーの名前とバージョンが表示されます。
* このレポートでは、一意のブラウザーとバージョンの組み合わせはそれぞれ、別のブラウザーと見なされます。
* "その他" というスライスは、その他すべてのブラウザーとバージョンで処理された要求の割合を示します。

円グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、上位 250 件のブラウザーそれぞれについて、ブラウザーの種類/バージョン番号、ヒット総数、ヒットの割合を確認できます。

## <a name="by-referrer"></a>参照元別
"参照元別" レポートでは、選択したプラットフォーム上のコンテンツに対する上位の参照元を表示できます。 参照元は、要求が生成されたホスト名を示します。 この種類のレポートを生成すると、上位 10 件の参照元によって生成された要求 (ヒット) の量が棒グラフに示されます。

グラフの左側 (Y 軸) は、各参照元で発生した資産に対する要求の総数を示します。 グラフの棒はそれぞれ、1 つの参照元を表します。 色分け手法を使用して、上位 250 件の参照元セクションに表示されている 1 つの参照元に 1 つの棒を対応させます。

棒グラフの生成に使用されたデータはグラフの下に表示されます。 そこでは、上位 250 件の参照元それぞれについて、URL、生成されたヒット総数、ヒットの割合を確認できます。

## <a name="by-download"></a>ダウンロード別
"ダウンロード別" レポートでは、最も多く要求されたコンテンツのダウンロード パターンを分析できます。 レポートの上部には、要求された資産の上位 10 件について、ダウンロードの試行回数と完了数を比較した棒グラフが含まれます。 各棒は、ダウンロードが完了したかどうかによって色分けされます。試行されたダウンロードは青、完了したダウンロードは緑になります。

> [!NOTE]
> このレポートの目的として、エッジ CNAME URL は同等の CDN URL に変換されます。 これにより、資産の要求に使用されるのが CDN URL とエッジ CNAME URL のどちらであるかに関係なく、その資産に関連付けられたすべての統計情報を正確に把握できます。
> 
> 

グラフの左側 (Y 軸) は、要求された資産の上位 10 件それぞれのファイル名を示します。 グラフのすぐ下 (X 軸) には、ダウンロードの試行/完了回数の総数を示すラベルが表示されます。

棒グラフのすぐ下には、要求された資産の上位 250 件について、相対パス (ファイル名を含む)、ダウンロードが完了した回数、要求された回数、ダウンロードが完了した要求の割合という情報が表示されます。

> [!TIP]
> 資産のダウンロードが完了した際、HTTP クライアント (ブラウザー) から CDN には通知されません。 そのため、資産のダウンロードが完了したかどうかを状態コードとバイト範囲要求に従って計算する必要があります。 この計算を行う場合、最初に、要求が状態コード "200 OK" になっているかどうかを確認します。 状態コードが "200 OK" の場合は、バイト範囲要求を参照して、資産全体が対象になっていることを確認します。 最後に、転送されたデータの量と要求された資産のサイズを比較します。 転送されたデータの量がファイルのサイズ以上で、バイト範囲要求がその資産に対して適切である場合、ヒットは完了したダウンロードとしてカウントされます。
> 
> このレポートは説明的であるため、レポートの一貫性や正確性を変える可能性がある以下の点に留意する必要があります。
> 
> * ユーザー エージェントの動作が異なる場合は、トラフィック パターンを正確に予測することはできません。 このため、完了したダウンロードの結果が 100% を超える可能性があります。
> * HTTP プログレッシブ ダウンロードを利用する資産は、このレポートで正確に示されない可能性があります。 これは、ユーザーがビデオの別の場所をシークするためです。
> 
> 

## <a name="by-404-errors"></a>404 エラー別
"404 エラー別" レポートでは、状態コード "404 未検出" が最も多く生成されるコンテンツの種類を識別できます。 レポートの上部には、状態コード "404 未検出" が返された上位 10 件の資産を示す棒グラフが含まれます。 この棒グラフは、これらの資産に対する要求の総数と、結果として状態コード "404 未検出" になった要求の数を比較しています。 各棒は色分けされています。 黄色の棒は、結果として状態コード "404 未検出" になった要求を示します。 赤色の棒は、資産に対する要求の総数を示します。

> [!NOTE]
> このレポートでは、以下の点に注意してください。
> 
> * ヒットは、状態コードに関係なく、資産に対するすべての要求を表します。
> * エッジ CNAME URL は同等の CDN URL に変換されます。 これにより、資産の要求に使用されるのが CDN URL とエッジ CNAME URL のどちらであるかに関係なく、その資産に関連付けられたすべての統計情報を正確に把握できます。
> 
> 

グラフの左側 (Y 軸) は、結果として状態コード "404 未検出" になった、要求された資産の上位 10 件それぞれのファイル名を示します。 グラフのすぐ下 (X 軸) には、要求の総数と、状態コード "404 未検出" になった要求の数を示すラベルが表示されます。

棒グラフのすぐ下には、要求された資産の上位 250 件について、相対パス (ファイル名を含む)、状態コード "404 未検出" になった要求の数、資産が要求された合計回数、状態コード "404 未検出" になった要求の割合という情報が表示されます。

## <a name="see-also"></a>参照
* [Azure CDN の概要](cdn-overview.md)
* [Microsoft Azure CDN でのリアルタイム統計情報](cdn-real-time-stats.md)
* [規則エンジンを使用した既定の HTTP 動作のオーバーライド](cdn-rules-engine.md)
* [Microsoft Edge のパフォーマンスの分析](cdn-edge-performance.md)

