---
title: Azure Monitor の Log Analytics の概要
description: Log Analytics について説明します。これは、Azure portal のツールであり、Azure Monitor ログのデータを分析するためのログ クエリの編集と実行に使用します。
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 10/04/2020
ms.openlocfilehash: d83cc4045f09ed0f704a0d61c6b303406835eb44
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2021
ms.locfileid: "102052298"
---
# <a name="overview-of-log-analytics-in-azure-monitor"></a>Azure Monitor の Log Analytics の概要
Log Analytics は、Azure portal のツールであり、Azure Monitor ログのデータでのログ クエリの編集と実行に使用します。 一連のレコードを返す単純なクエリを作成後、Log Analytics の機能を使用して、それらのレコードを並べ替え、フィルター、および分析できます。 また、より高度なクエリを作成して統計分析を実行し、結果をグラフで視覚化して特定の傾向を識別することもできます。 クエリの結果を対話的に操作する場合でも、ログ クエリ アラートやブックなどの他の Azure Monitor の機能で使用する場合でも、クエリ結果の書き込みとテストのためのツールとして Log Analytics を使用します。 


> [!TIP]
> この記事では、Log Analytics とその各機能について説明します。 チュートリアルに直接進む場合は、「[Log Analytics のチュートリアル](./log-analytics-tutorial.md)」を参照してください。



## <a name="starting-log-analytics"></a>Log Analytics の起動
Azure portal の **[Azure Monitor]** メニューの **[ログ]** から Log Analytics を起動します。 このオプションは、ほとんどの Azure リソースのメニューにも表示されます。 どこから起動しても、同じ Log Analytics ツールが起動します。 Log Analytics を起動するために使用するメニューによって、使用可能なデータが決まります。 **[Azure Monitor]** メニューまたは **[Log Analytics ワークスペース]** メニューから起動した場合、ワークスペース内のすべてのレコードにアクセスできます。 別の種類のリソースから **[ログ]** を選択した場合、データはそのリソースのログ データに制限されます。 詳細については、「[Azure Monitor Log Analytics のログ クエリのスコープと時間範囲](./scope.md)」を参照してください。

[![Log Analytics の起動](media/log-analytics-overview/start-log-analytics.png)](media/log-analytics-overview/start-log-analytics.png#lightbox)

Log Analytics を起動すると、最初に表示されるのは、[クエリの例](../logs/example-queries.md)を含むダイアログ ボックスです。 これらはソリューション別に分類されており、特定の要件に一致するクエリを参照または検索できます。 まさに必要としている処理を行うものを見つけたり、エディターに読み込んだり、必要に応じて変更したりできます。 クエリの例を参照することは実際、独自のクエリを記述する方法を学ぶのに最適です。 もちろん、空のスクリプトからクエリを自分で作成する場合は、クエリの例は閉じてかまいません。 画面上部にある **[クエリ]** をクリックするだけで、クエリの例を元に戻すことができます。

## <a name="log-analytics-interface"></a>Log Analytics のインターフェイス
次の図は、Log Analytics のさまざまなコンポーネントを示しています。

[![Log Analytics](media/log-analytics-overview/log-analytics.png)](media/log-analytics-overview/log-analytics.png#lightbox)

### <a name="1-top-action-bar"></a>1.上部アクション バー
クエリ ウィンドウでクエリを操作するためのコントロール。

| オプション | 説明 |
|:---|:---|
| Scope | クエリに使用するデータのスコープを指定します。 Log Analytics ワークスペース内のすべてのデータでも、複数のワークスペースにわたる特定のリソースのデータでもかまいません。 「[クエリ スコープ](./scope.md)」を参照してください。 |
| [実行] ボタン | クリックすると、選択したクエリがクエリ ウィンドウで実行されます。 Shift + Enter キーを押してクエリを実行することもできます。 |
| 時刻の選択ツール | クエリで使用できるデータの時間範囲を選択します。 これは、クエリに時間フィルターを含めるとオーバーライドされます。 「[Azure Monitor Log Analytics のログ クエリのスコープと時間範囲](./scope.md)」を参照してください。 |
| [保存] ボタン | クエリをこのワークスペースのクエリ エクスプローラーに保存します。 |
 コピー ボタン | クエリへのリンク、クエリ テキスト、またはクエリ結果をクリップボードにコピーします。 |
| [新しいアラート ルール] ボタン | 空のクエリを含む新しいタブを作成します。 |
| [エクスポート] ボタン | クエリの結果を CSV ファイルにエクスポートします。または、クエリを Power BI で使用するための Power Query Formula Language 形式にエクスポートします。 |
| [ダッシュボードにピン留めする] ボタン | クエリの結果を Azure ダッシュボードに追加します。 |
| [Format query]\(クエリの形式設定\) ボタン | 選択したテキストを読みやすく配置します。 |
| [クエリの例] ボタン | 最初に Log Analytics を開いたときに表示される [クエリの例] ダイアログ ボックスを開きます。 |
| [クエリ エクスプローラー] ボタン | ワークスペースに保存されたクエリにアクセスできる **クエリ エクスプローラー** を開きます。 |


### <a name="2-sidebar"></a>2.サイドバー
ワークスペース内のテーブルの一覧、クエリの例、および現在のクエリのフィルター オプション。

| タブ | 説明 |
|:---|:---|
| テーブル | 選択したスコープに含まれるテーブルが一覧表示されます。 テーブルのグループを変更するには、 **[グループ化]** を選択します。 テーブル名をポイントすると、そのテーブルの説明、そのドキュメントを表示するためのオプション、そのデータをプレビューするためのオプションのあるダイアログ ボックスが表示されます。 テーブルを展開すると、その列が表示されます。 テーブルまたは列の名前をダブルクリックすると、そのテーブルまたは列がクエリに追加されます。 |
| クエリ | クエリ ウィンドウで開くことができるクエリの例の一覧。 これは、Log Analytics を開いたときに表示される一覧と同じです。 クエリのグループを変更するには、 **[グループ化]** を選択します。 クエリをダブルクリックすると、そのクエリがクエリ ウィンドウに追加されます。クエリをポイントすると、他のオプションが表示されます。 |
| Assert | クエリの結果に基づいてフィルター オプションを作成します。 クエリを実行すると、結果とは異なる値を含む列が表示されます。 1 つ以上の値を選択し、 **[適用して実行]** をクリックして **where** コマンドをクエリに追加し、そのクエリを再度実行します。 |

### <a name="3-query-window"></a>3.クエリ ウィンドウ
クエリ ウィンドウは、クエリを編集する場所です。 KQL コマンドの IntelliSense、読みやすくするためのカラー コーディングが組み込まれています。 ウィンドウの上部にある **+** をクリックすると、別のタブが開きます。

1 つのウィンドウに複数のクエリを含めることができます。 クエリに空白行を含めることはできません。そのため、ウィンドウで 1 つ以上の空白行を使用して複数のクエリを区切ることができます。 カーソルが置かれているのが現在のクエリです。

現在のクエリを実行するには、 **[実行]** ボタンをクリックするか、Shift + Enter キーを押します。

### <a name="4-results-window"></a>4.[結果] ウィンドウ
[結果] ウィンドウには、クエリの結果が表示されます。 既定では、結果はテーブルとして表示されます。 グラフとして表示するには、[結果] ウィンドウで **[グラフ]** を選択するか、クエリに **render** コマンドを追加します。

#### <a name="results-view"></a>結果ビュー
クエリの結果を、列と行で編成されたテーブルに表示します。 行の左側をクリックすると、その値が展開されます。 **[列]** ドロップダウンをクリックすると、列の一覧が変更されます。 列名をクリックすると、結果が並べ替えられます。 列名の横にあるじょうごをクリックすると、結果がフィルターされます。 クエリを再実行すると、フィルターがクリアされ、並べ替えがリセットされます。

**[列のグループ化]** を選択すると、クエリ結果の上にグループ化バーが表示されます。 列をこのバーにドラッグすることで、結果を列でグループ化します。 結果で入れ子になったグループを作成するには、列をさらに追加します。 

#### <a name="chart-view"></a>グラフ ビュー
使用可能な複数のグラフの種類のいずれかで結果を表示します。 グラフの種類は、クエリの **render** コマンドで指定できます。また **[視覚化の種類]** ドロップダウンから選択することもできます。

| オプション | 説明 |
|:---|:---|
| **視覚化の種類** | 表示するグラフの種類。 |
| **X 軸** | X 軸に使用する結果の列。 
| **Y 軸** | Y 軸に使用する結果の列。 通常、これは数値列です。 |
| **分割基準** | グラフ内の系列を定義する結果の列。 列の値ごとに系列が作成されます。 |
| **集計** | Y 軸の数値に対して実行する集計の種類。 |

## <a name="relationship-to-azure-data-explorer"></a>Azure Data Explorer とのリレーションシップ
Azure Data Explorer Web UI に慣れている場合は、Log Analytics の外観に見覚えがあるでしょう。 これは、Log Analytics が Azure Data Explorer を基に構築されており、同じ Kusto クエリ言語 (KQL) を使用するためです。 Log Analytics には、時間範囲によるフィルターや、クエリからのアラート ルールの作成機能など、Azure Monitor 固有の機能が追加されています。 どちらのツールにも、使用可能なテーブルの構造をスキャンできるできるエクスプローラーが含まれますが、Azure Data Explorer Web UI は主に Azure Data Explorer データベース内のテーブルを処理し、一方 Log Analytics は Log Analytics ワークスペース内のテーブルを処理します。 

## <a name="next-steps"></a>次のステップ
- [Azure portal 内での Log Analytics の使用に関するチュートリアル](./log-analytics-tutorial.md)を進めます。
- [クエリの作成に関するチュートリアル](./get-started-queries.md)を進めます。