---
title: Microsoft Azure と Azure Monitor でのクラシック アラートの概要
description: クラシック アラートは非推奨になります。 アラートを使用すると、Azure リソースのメトリック、イベント、またはログを監視し、指定した条件が満たされたときに通知を受けることができます。
author: rboucher
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 09/24/2018
ms.author: robb
ms.openlocfilehash: f0765e010cb40a89f3f57d143c51bdfba72a4ba0
ms.sourcegitcommit: edacc2024b78d9c7450aaf7c50095807acf25fb6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/13/2018
ms.locfileid: "53341935"
---
# <a name="what-are-classic-alerts-in-microsoft-azure"></a>Microsoft Azure のクラシック アラートの概要

> [!NOTE]
> この記事では、古いクラシック メトリック アラートの作成方法について説明します。 Azure Monitor では、[新しいほぼリアルタイムのメトリック アラートとアラート エクスペリエンス](../../azure-monitor/platform/alerts-overview.md)がサポートされています。 
>

アラートを使用してデータに対する条件を構成し、その条件が最新の監視データと一致したときに通知を受け取ることができます。

## <a name="old-and-new-alerting-capabilities"></a>新旧のアラート機能

Azure Monitor、Application Insights、Log Analytics および Service Health のアラート機能は以前は別々でした。 Azure では、ユーザー インターフェイスとさまざまなアラート方法が時間と共に統合され、改善されました。 この統合は現在も継続中です。 アラート

クラシック アラートは、Azure Portal のクラシック アラート ユーザー画面でのみ参照できます。 この画面は、アラート画面の **[クラシック アラートの表示]** ボタンで表示できます。 

 ![Azure portal でのアラートの選択肢](media/alerts-classic.overview/monitor-alert-screen2.png)

新しいアラート ユーザー エクスペリエンスは、クラシック アラート エクスペリエンスに対して次の利点があります。
-   **より優れた通知システム** - 新しいアラートはすべて、複数のアラートで再利用できる、通知とアクションの名前付きグループであるアクション グループを使用します。 従来のメトリック アラートと古い Log Analytics のアラートでは、アクション グループを使用しません。
-   **統合された作成エクスペリエンス** - Azure Monitor、Log Analytics、Application Insights のメトリック、ログ、アクティビティ ログのアラートは、すべて 1 か所で作成できます。
-   **発生した Log Analytics アラートを Azure Portal で表示** - サブスクリプションで発生した Log Analytics アラートも表示できるようになりました。 以前はこれらは別のポータルにありました。
-   **発生したアラートとアラート ルールの分離** - アラート ルール (アラートをトリガーする条件の定義) と発生したアラート (実行されているアラート ルールのインスタンス) が区別されているので、操作ビューと構成ビューが分離されています。
-   **より良いワークフロー** - 新しいアラート作成エクスペリエンスでは、アラート ルールを構成するプロセスに沿ってユーザーに手順が示されるため、アラートを有効にするために必要なものを簡単に見つけることができます。
-   **スマート通知の統合**と**アラート状態の設定** - 新しいアラートには自動グループ化機能があります。これでは、ユーザー インターフェイスのオーバーロードを減らすために、類似するアラートが一緒に表示されます。 

新しいメトリック アラートは、クラシック メトリック アラートに比べて次の利点があります。
-   **待ち時間の短縮**:新しいメトリック アラートは 1 分ごとに実行できます。 古いメトリック アラートは常に、5 分の頻度で実行されます。 新しいアラートでは、問題の発生から通知またはアクション (3 - 5 分) までの遅延がかなり少なくなっています。 古いメトリックでは、種類に応じて 5 分から 15 分です。  ログ アラートは、ログの取り込みのために通常 10 分から 15 分の遅延がありますが、新しい処理方法によってその時間は減っています。 
-   **多次元メトリックのサポート**:各次元のメトリックに関するアラートを生成して、関心のあるメトリックのセグメントを監視できます。
-   **メトリックの条件に対するより詳細な制御**:より詳細なアラート ルールを定義できます。 この新しいアラートでは、メトリックの最大値、最小値、平均値、および合計値の監視がサポートされています。
-   **複数のメトリックの監視の組み合わせ**:複数のメトリック (現時点では最大 2 つ) を 1 つのルールで監視できます。 両方のメトリックが、指定された期間にわたってしきい値を超えた場合、アラートがトリガーされます。
-   **より優れた通知システム**:新しいアラートはすべて、複数のアラートで再利用できる、通知とアクションの名前付きグループである[アクション グループ](../../azure-monitor/platform/action-groups.md)を使用します。  従来のメトリック アラートと古い Log Analytics のアラートでは、アクション グループを使用しません。 
-   **ログからのメトリック**(パブリック プレビュー):Log Analytics に移動するログ データを抽出して、Azure Monitor メトリックに変換し、その後、他のメトリックと同様にアラートの対象にできるようになりました。 クラシック アラートに固有の用語については、「[Alerts (classic)](alerts-classic.overview.md)」 (アラート (クラシック)) を参照してください。 


## <a name="classic-alerts-on-azure-monitor-data"></a>Azure Monitor データのクラシック アラート
メトリック アラートとアクティビティ ログ アラートの 2 つの種類のクラシック アラートが使用可能です。

* **クラシック メトリック アラート** - このアラートは、指定したメトリックの値が、割り当てたしきい値を超えたときにトリガーされます。 アラートでは、"アクティブ化済み" になったとき (しきい値を超えて、アラートの条件に一致したとき) に通知が生成されます。 "解決済み" になったとき (もう一度しきい値を超えて、条件が一致しなくなったとき)、別のアラートが生成されます。

* **クラシック アクティビティ ログ アラート** - 割り当てたフィルター条件と一致するアクティビティ ログ イベントが生成されたときにトリガーされるストリーミング ログ アラート。 すべての新規イベントには、アラート エンジンによってフィルター条件が適用されるだけなので、これらのアラートの状態は "アクティブ化済み" のみです。 これらのアラートを使用して、新しいサービス正常性インシデントが発生したとき、またはユーザーまたはアプリケーションがサブスクリプションで操作 (仮想マシンの削除など) を実行したときに通知を受け取ることができます。

Azure Monitor で使用できる診断ログ データの場合、データを Log Analytics (旧称 OMS) に転送し、Log Analytics クエリ アラートを使用します。 Log Analytics では、[新しいアラート メソッド](../../azure-monitor/platform/alerts-overview.md)を使用しています。 

次の図は、Azure Monitor のデータのソースと、そのデータからアラートを生成する方法をまとめたものです。

![アラートについて説明します。](media/alerts-classic.overview/Alerts_Overview_Resource_v5.png)

## <a name="taxonomy-of-alerts-classic"></a>アラート (クラシック) の分類
Azure では、クラシック アラートとその機能を説明するときに次の用語を使用します。
* **アラート** - 一致したときにアクティブになる条件 (1 つまたは複数の規則または条件) の定義。
* **アクティブ** - クラシック アラートによって定義されている条件と一致したときの状態。
* **解決済み** - クラシック アラートによって定義されている条件と以前は一致していたが、一致しなくなった状態。
* **通知** - クラシック アラートがアクティブになったことに基づいて実行されるアクション。
* **アクション** - 通知の受信側に送信される特定の呼び出し (たとえば、アドレスへの電子メール送信や webhook URL への投稿など)。 通常、通知によって複数のアクションがトリガーされる可能性があります。

## <a name="how-do-i-receive-a-notification-from-an-azure-monitor-classic-alert"></a>Azure Monitor クラシック アラートから通知を受け取る方法
これまで、各サービスの Azure アラートは、それぞれ独自の組み込み通知方法を使用していました。 

Azure Monitor に、*アクション グループ*という再利用可能な通知グループが作成されました。 アクション グループには、通知の受信者セットを指定します。アクション グループを参照するアラートがアクティブになると、すべての受信者がその通知を受け取ります。 アクション グループでは、多数のアラート オブジェクト全体で受信者のグループ (たとえば、オン コール エンジニア一覧など) を再利用できます。 アクション グループでは、電子メール アドレスや SMS 番号、その他の多数のアクションに加え、Webhook URL への投稿による通知をサポートしています。  詳細については、「[action groups](../../azure-monitor/platform/action-groups.md)」 (アクション グループ) を参照してください。 

従来のクラシック アクティビティ ログ アラートでは、アクション グループを使用しています。

ただし、従来のメトリック アラートでは、アクション グループを使用していません。 代わりに、次のアクションを構成できます。 
- メール通知をサービス管理者、共同管理者、または指定した追加のメール アドレスに送信する。
- webhook を呼び出す。これにより、追加のオートメーション アクションを実行できます。

たとえば、Webhook では、以下を使用して自動化や修復を可能にします。
    - Azure Automation Runbook
    - Azure 関数
    - Azure Logic App
    - サードパーティのサービス

## <a name="next-steps"></a>次の手順
アラート ルールとその構成方法については、以下をご覧ください。

* [メトリック](../../azure-monitor/platform/data-collection.md)の詳細
* [Azure Portal からの従来のメトリック アラート](alerts-classic-portal.md)を構成する
* [従来のメトリック アラートの PowerShell](alerts-classic-portal.md) を構成する
* [従来のメトリック アラートのコマンド ライン インターフェイス (CLI)](alerts-classic-portal.md) を構成する
* [従来のメトリック アラートの Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931945.aspx) を構成する
* [アクティビティ ログ](../../monitoring-and-diagnostics/monitoring-overview-activity-logs.md) の詳細
* [Azure Portal からのアクティビティ ログ アラート](../../azure-monitor/platform/activity-log-alerts.md)の構成
* [Resource Manager からのアクティビティ ログ アラート](alerts-activity-log.md)の構成
* [アクティビティ ログ アラート webhook スキーマ](../../azure-monitor/platform/activity-log-alerts-webhook.md) の確認
* [アクション グループ](../../azure-monitor/platform/action-groups.md)の詳細をご覧ください。
* [新しいアラート](../../azure-monitor/platform/alerts-metric.md)を構成する
