---
title: Azure Migrate を使用して Azure への移行について GCP VM インスタンスを評価する
description: Azure Migrate を使用して Azure への移行について GCP VM インスタンスを評価する方法について説明します。
author: rashi-ms
ms.author: rajosh
ms.manager: abhemraj
ms.topic: tutorial
ms.date: 09/14/2020
ms.custom: MVC
ms.openlocfilehash: 6a59400ca0d8f2e4ced899166fe6e67b5ac1d2d9
ms.sourcegitcommit: f611b3f57027a21f7b229edf8a5b4f4c75f76331
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2021
ms.locfileid: "104780686"
---
# <a name="tutorial-assess-google-cloud-platform-gcp-vm-instances-for-migration-to-azure"></a>チュートリアル:Azure への移行のために Google Cloud Platform (GCP) VM インスタンスを評価する

Azure への移行に取り組む過程では、オンプレミスのワークロードを評価し、クラウドへの対応性を判断し、リスクを明らかにして、コストと複雑さを見積もります。

この記事では、Azure Migrate: 検出および評価のツールを使用して、Azure への移行について Google Cloud Platform (GCP) VM インスタンスを評価する方法について説明します。

このチュートリアルでは、以下の内容を学習します。
> [!div class="checklist"]
- サーバーのメタデータと構成情報に基づいて評価を実行する。
- パフォーマンス データに基づいて評価を実行する。

> [!NOTE]
> チュートリアルでは、シナリオを試すための最も簡単な方法を説明し、可能な限り既定のオプションを使用します。 

Azure サブスクリプションをお持ちでない場合は、開始する前に [無料アカウント](https://azure.microsoft.com/pricing/free-trial/) を作成してください。


## <a name="prerequisites"></a>前提条件

- このチュートリアルの手順に従う前に、このシリーズの最初のチュートリアルに取り組んで、[オンプレミス インベントリを検出](tutorial-discover-gcp.md)しておいてください。 


## <a name="decide-which-assessment-to-run"></a>実行する評価を決定する

評価を実行する際に使用するサイズ設定基準のベースを、現状のオンプレミスで収集されたサーバー構成データおよびメタデータにするか、パフォーマンス データにするかを決定します。

**評価** | **詳細** | **推奨**
--- | --- | ---
**現状のオンプレミス** | サーバー構成データおよびメタデータに基づいて評価します。  | 推奨される Azure VM サイズは、オンプレミスの VM サイズに基づきます。<br/><br> 推奨される Azure ディスクの種類は、評価の [ストレージの種類] 設定で選択した内容に基づきます。
**パフォーマンスベース** | 収集されたパフォーマンス データに基づいて評価します。 | 推奨される Azure VM サイズは、CPU とメモリ使用率のデータに基づきます。<br/><br/> 推奨されるディスクの種類は、オンプレミス ディスクの IOPS とスループットに基づきます。

## <a name="run-an-assessment"></a>評価を実行する

評価を実行するには次のようにします。

1. **[概要]** ページの **[Windows, Linux and SQL Server]\(Windows、Linux、SQL Server\)** で、 **[サーバーの評価と移行]** をクリックします。

   ![[サーバーの評価と移行] ボタンの場所](./media/tutorial-assess-vmware-azure-vm/assess.png)

2. **[Azure Migrate: Discovery and assessment]\(Azure Migrate: 検出および評価\)** で、 **[Assess]\(評価\)** をクリックします。

    ![[評価] ボタンの場所](./media/tutorial-assess-vmware-azure-vm/assess-servers.png)

3. **[サーバーの評価]**  >  **[評価の種類]** で、 **[Azure VM]** を選択します。
4. **[検出ソース]** で次の操作を行います。

    - アプライアンスを使用してサーバーを検出した場合、 **[Azure Migrate アプライアンスから検出されたサーバー]** を選択します。
    - インポートした CSV ファイルを使用してサーバーを検出した場合、 **[Imported servers]\(インポートされたサーバー\)** を選択します。 
    
1. **[編集]** をクリックして、評価のプロパティを確認します。

    :::image type="content" source="./media/tutorial-assess-vmware-azure-vm/assessment-name.png" alt-text="評価のプロパティを確認するための [編集] ボタンの場所":::

1. **[評価のプロパティ]**  >  **[ターゲット プロパティ]** で:
    - 移行先となる Azure リージョンを **[ターゲットの場所]** で指定します。
        - サイズとコストは、指定した場所に基づいて推奨されます。 ターゲットの場所を既定値から変更した場合、**予約インスタンス** と **VM シリーズ** を指定するように求められます。
        - Azure Government では、[こちらのリージョン](migrate-support-matrix.md#supported-geographies-azure-government)から評価の対象を選択できます。
    - **[ストレージの種類]** では、
        - パフォーマンスベースのデータを評価に使用したい場合、 **[自動]** を選択すると、ディスクの IOPS とスループットに基づいて、ストレージの種類がAzure Migrate によって推奨されます。
        - または、VM に使用したいストレージの種類を移行時に選択します。
    - VM の移行時に予約インスタンスを使用するかどうかを **[予約済みインスタンス]** で指定します。
        - 予約インスタンスを使用するように選択した場合は、 **[割引 (%)]** や **[VM のアップタイム]** は指定できません。 
        - [詳細については、こちらを参照してください](https://aka.ms/azurereservedinstances)。
 1. **[VM サイズ]** では:
     - **[サイズ変更の設定基準]** で、評価の基準を、サーバー構成データおよびメタデータにするか、パフォーマンスベースのデータにするか選択します。 パフォーマンス データを使用する場合:
        - 評価の基準とするデータ期間を **[パフォーマンス履歴]** で指定します。
        - パフォーマンス サンプルに使用するパーセンタイル値を **[百分位の使用率]** で指定します。 
    - 検討したい Azure VM シリーズを **[VM シリーズ]** で指定します。
        - パフォーマンスベースの評価を使用する場合、Azure Migrate によって自動的に値が提示されます。
        - 必要に応じて設定を調整します。 たとえば、Azure 内に A シリーズの VM を必要とする運用環境がない場合、シリーズの一覧から A シリーズを除外することができます。
    - 評価中に使用したいバッファーを **[快適性係数]** で指定します。 ここでは、季節ごとの使用量、短期間のパフォーマンス履歴、将来に使用量が増える可能性などの問題が考慮されます。 たとえば、快適性係数を 2 とした場合、
    
        **コンポーネント** | **有効使用率** | **快適性係数の追加 (2.0)**
        --- | --- | ---
        コア | 2  | 4
        メモリ | 8 GB | 16 GB
   
1. **[価格]** では:
    - [Azure プラン](https://azure.microsoft.com/support/legal/offer-details/)に登録している場合、 **[プラン]** にそれを指定します。 評価では、そのプランのコストが見積もられます。
    - 自分のアカウントの請求通貨を **[通貨]** で選択します。
    - Azure プランとは別に適用されるサブスクリプション固有の割引を **[割引 (%)]** に追加します。 既定の設定は 0% です。
    - **[VM のアップタイム]** に、VM が実行される期間 (1 か月あたりの日数、1 日あたりの時間数など) を指定します。
        - これは、継続的には実行されない Azure VM に便利です。
        - コストの見積もりは、指定した期間に基づいて算出されます。
        - 既定値は、1 か月あたり 31 日、1 日あたり 24 時間です。
    - Enterprise Agreement (EA) サブスクリプションの割引をコスト見積もりの計算に含めるかどうかを **[EA サブスクリプション]** で指定します。 
    - Windows Server ライセンスを既に所有しているかどうかを **[Azure ハイブリッド特典]** で指定します。 ライセンスを所有しており、アクティブな Windows Server サブスクリプションのソフトウェア アシュアランスの対象となっている場合は、ライセンスを Azure に持ち込む際に [Azure ハイブリッド特典](https://azure.microsoft.com/pricing/hybrid-use-benefit/)を申請することができます。

1. 変更内容を確定する場合は **[保存]** をクリックします。

    ![評価のプロパティ](./media/tutorial-assess-vmware-azure-vm/assessment-properties.png)

1. **[サーバーの評価]** で **[次へ]** をクリックします。

1. **[評価するサーバーの選択]**  >  **[評価名]** で、評価の名前を指定します。 

1. **[グループの選択または作成]** で **[新規作成]** を選択し、グループ名を指定します。 
    

1. アプライアンスを選択し、グループに追加したい VM を選択します。 続けて、 **[次へ]** をクリックします。


1. **[評価の確認と作成]** で評価の詳細を確認したら、 **[評価の作成]** をクリックしてグループを作成し、評価を実行します。

1. 評価が作成されたら、 **[サーバー]**  >  **[Azure Migrate: Discovery and assessment]\(Azure Migrate: 検出および評価\)**  >  **[評価]** でそれを表示します。

1. **[評価のエクスポート]** をクリックし、Excel ファイルとしてダウンロードします。
    > [!NOTE]
    > パフォーマンスベースの評価の場合は、検出の開始後、少なくとも 1 日経ってから評価を作成することをお勧めします。 これにより、パフォーマンス データを収集する時間が確保され、信頼度が上がります。 高い信頼度レーティングを得るためには、検出の開始後、指定したパフォーマンス期間 (日、週、月) を置くのが理想です。

## <a name="review-an-assessment"></a>評価を確認する

評価には以下が記述されています。

- **Azure 対応性**: VM が Azure への移行に適しているかどうか。
- **月間コスト見積もり**: Azure で VM を実行するためのコンピューティングとストレージの月間推定コスト。
- **月間ストレージ コスト見積もり**: 移行後のディスク ストレージの推定コスト。

評価を表示するには:

1. **[Windows, Linux and SQL Server]\(Windows、Linux、SQL Server\)**  >  **[Azure Migrate: Discovery and assessment]\(Azure Migrate: 検出および評価\)** で、 **[評価]** の横にある数字をクリックします。
2. **[評価]** で、評価を選択して開きます。 以下はその例です (見積もりとコストはあくまで例です)。 

    ![評価の概要](./media/tutorial-assess-gcp/assessment-summary.png)

3. 評価の概要を確認します。 評価のプロパティを編集して、評価を再計算することもできます。
 
 
### <a name="review-readiness"></a>対応性を確認する

1. **[Azure 対応性]** をクリックします。
2. **[Azure 対応性]** で、VM の状態を確認します。
    - **[Azure に対応]** : 評価の対象となった VM について、VM のサイズとコストの見積もりが Azure Migrate によって推奨される場合に使用されます。
    - **[条件付きで対応]** : 問題と推奨される修復方法が示されます。
    - **[Azure に未対応]** : 問題と推奨される修復方法が示されます。
    - **[Readiness 不明]** : データの可用性の問題により、Azure Migrate が対応性を評価できない場合に使用されます。

3. **[Azure 対応性]** の状態を選択します。 VM の対応性の詳細を確認できます。 また、ドリルダウンして、コンピューティング、ストレージ、ネットワークの設定など、VM の詳細を確認することもできます。

### <a name="review-cost-estimates"></a>コスト見積もりを確認する

評価の概要には、Azure で実行されている VM のコンピューティングとストレージのコストの見積りが表示されます。 

1. 月間合計コストを確認します。 コストは、評価されるグループ内のすべての VM について集計されます。

    - コストの見積もりは、サーバーの推奨サイズ、およびそのディスクとプロパティに基づいています。
    - コンピューティングとストレージの月間推定コストが表示されます。
    - このコストは、オンプレミスの VM を Azure VM で実行した場合の見積もりです。 PaaS や SaaS のコストは見積もりに含まれません。

2. 月間ストレージ コストを確認します。 このビューには、評価されたグループの集計されたストレージ コストが、ストレージ ディスクの種類ごとに分けて表示されます。 
3. ドリルダウンして、特定の VM のコストの詳細を見ることができます。

### <a name="review-confidence-rating"></a>信頼度レーティングを確認する

Azure Migrate により、パフォーマンスベースの評価に信頼度の評価が割り当てられます。 レーティングの範囲は、星 1 つ (最も低い) から星 5 つ (最も高い) までです。

![信頼度レーティング](./media/tutorial-assess-gcp/confidence-rating.png)

信頼度レーティングは、評価の推奨サイズの信頼性を見積もるのに役立ちます。 このレーティングは、評価の計算に必要なデータ ポイントの有効性に基づいています。

> [!NOTE]
> CSV ファイルに基づいて評価を作成した場合、信頼度レーティングは割り当てられません。


信頼度レーティングは次のとおりです。

**データ ポイントの可用性** | **信頼度レーティング**
--- | ---
0% - 20% | 1 つ星
21% - 40% | 2 つ星
41% - 60% | 3 つ星
61% - 80% | 4 つ星
81% - 100% | 5 つ星

信頼度レーティングについての[詳しい情報](concepts-assessment-calculation.md#confidence-ratings-performance-based)をご覧ください。

## <a name="next-steps"></a>次の手順

- [依存関係マッピング](concepts-dependency-visualization.md)を使用してサーバーの依存関係を明らかにします。
- [エージェントベース](how-to-create-group-machine-dependencies.md)の依存関係マッピングを設定します。
