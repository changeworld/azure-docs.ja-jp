---
title: Azure AD アプリを一連のユーザーに制限する | Azure
titleSuffix: Microsoft identity platform
description: Azure AD に登録されたアプリへのアクセスを選択したユーザーのセットに制限する方法について説明します。
services: active-directory
author: kalyankrishna1
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.workload: identity
ms.topic: conceptual
ms.date: 09/24/2018
ms.author: kkrishna
ms.reviewer: jmprieur
ms.custom: aaddev
ms.openlocfilehash: cccd2df334828c0b8103e4da2ffcd8549673b69c
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/27/2020
ms.locfileid: "76696998"
---
# <a name="how-to-restrict-your-azure-ad-app-to-a-set-of-users"></a>方法:Azure AD アプリを一連のユーザーに制限する

Azure Active Directory (Azure AD) テナントに登録されたアプリケーションは、既定ではテナントの正常に認証されたすべてのユーザーが利用できます。

同様に、[マルチテナント](howto-convert-app-to-be-multi-tenant.md) アプリの場合、このアプリがプロビジョニングされている Azure AD テナントのすべてのユーザーは、それぞれのテナントで正常に認証されると、このアプリケーションにアクセスできるようになります。

テナントの管理者と開発者には、多くの場合、アプリを特定のユーザーのセットに制限しなければならない要件があります。 開発者はロール ベースのアクセス制御 (RBAC) のような一般的な承認パターンを使用して同じことを実現できますが、この方法では開発者に相当の負担がかかります。

Azure AD により、テナントの管理者と開発者が、テナントのユーザーまたはセキュリティ グループの特定のセットにアプリを制限できるようになります。

## <a name="supported-app-configurations"></a>サポートされているアプリの構成

テナントのユーザーまたはセキュリティ グループの特定のセットにアプリを制限するオプションは、次の種類のアプリケーションで動作します。

- SAML ベースの認証を使用したフェデレーション シングル サインオン用に構成されたアプリケーション
- Azure AD 事前認証を使用するアプリケーション プロキシのアプリケーション
- ユーザーまたは管理者がそのアプリケーションに同意した後に OAuth 2.0/OpenID Connect 認証を使用する Azure AD アプリケーション プラットフォームに直接構築されたアプリケーション。

     > [!NOTE]
     > この機能は、Web アプリ/Web API およびエンタープライズ アプリケーションでのみ使用できます。 [ネイティブ](quickstart-v1-integrate-apps-with-azure-ad.md)として登録されているアプリは、テナント内のユーザーまたはセキュリティ グループのセットに制限することができません。

## <a name="update-the-app-to-enable-user-assignment"></a>アプリを更新してユーザーの割り当てを有効にする

ユーザーの割り当てが有効なアプリケーションを作成するには、2 つの方法があります。 1 つ目には**グローバル管理者**ロールが必要ですが、2 つ目には必要ありません。

### <a name="enterprise-applications-requires-the-global-administrator-role"></a>エンタープライズ アプリケーション (グローバル管理者ロールが必要)

1. [**Azure portal**](https://portal.azure.com/) に移動し、**グローバル管理者**としてサインインします。
1. 上部のバーで、サインインしているアカウントを選択します。 
1. **[ディレクトリ]** で、アプリを登録する Azure AD テナントを選択します。
1. 左側のナビゲーションで、 **[Azure Active Directory]** を選択します。 Azure Active Directory がナビゲーション ウィンドウに表示されない場合は、以下の手順のようにします。

    1. 左側のメイン ナビゲーション メニューの上部にある **[すべてのサービス]** を選択します。
    1. フィルター検索ボックスに「**Azure Active Directory**」と入力し、結果から **[Azure Active Directory]** 項目を選択します。

1. **[Azure Active Directory]** ウィンドウで、 **[Azure Active Directory]** の左側のナビゲーション メニューから **[エンタープライズ アプリケーション]** を選択します。
1. **[すべてのアプリケーション]** を選択して、すべてのアプリケーションの一覧を表示します。

     必要なアプリケーションが表示されていない場合は、 **[すべてのアプリケーション]** リストの一番上にあるさまざまなフィルターを使用して表示内容を制限するか、一覧表示の下までスクロールしてアプリケーションを探します。

1. ユーザーまたはセキュリティ グループを割り当てるアプリケーションを一覧から選びます。
1. アプリケーションの **[概要]** ページで、アプリケーションの左側のナビゲーション メニューから **[プロパティ]** を選択します。
1. **[ユーザーの割り当てが必要ですか?]** の設定を探し、 **[はい]** に設定します。 このオプションを **[はい]** に設定すると、ユーザーはこのアプリケーションに割り当てられるまでアプリケーションにアクセスできません。
1. **[保存]** を選択してこの構成の変更を保存します。

### <a name="app-registration"></a>アプリの登録

1. [**Azure portal**](https://portal.azure.com/) にアクセスします。
1. 上部のバーで、サインインしているアカウントを選択します。 
1. **[ディレクトリ]** で、アプリを登録する Azure AD テナントを選択します。
1. 左側のナビゲーションで、 **[Azure Active Directory]** を選択します。
1. **[Azure Active Directory]** ウィンドウで、 **[Azure Active Directory]** の左側のナビゲーション メニューから **[アプリの登録]** を選択します。
1. 管理するアプリを作成または選択します。 ご自分がこのアプリの登録の**所有者**である必要があります。
1. アプリケーションの **[概要]** ページで、ページ上部の [要点] の下にある **[ローカル ディレクトリでのマネージド アプリケーション]** リンクを選択します。 これにより、アプリの登録の "_マネージド エンタープライズ アプリケーション_" に移動します。
1. 左側のナビゲーション ブレードで、 **[プロパティ]** を選択します。
1. **[ユーザーの割り当てが必要ですか?]** の設定を探し、 **[はい]** に設定します。 このオプションを **[はい]** に設定すると、ユーザーはこのアプリケーションに割り当てられるまでアプリケーションにアクセスできません。
1. **[保存]** を選択してこの構成の変更を保存します。

## <a name="assign-users-and-groups-to-the-app"></a>アプリにユーザーとグループを割り当てる

ユーザーの割り当てを有効にするようにアプリを構成したら、次はユーザーとグループをそのアプリに割り当てることができます。

1. アプリケーションの左側のナビゲーション メニューで、 **[ユーザーとグループ]** ウィンドウを選択します。
1. **[ユーザーとグループ]** 一覧の上部にある **[ユーザーの追加]** ボタンをクリックして、 **[割り当ての追加]** ウィンドウを開きます。
1. **[割り当ての追加]** ウィンドウから **[ユーザー]** セレクターを選択します。 

     ユーザーとセキュリティ グループの一覧と一緒に、特定のユーザーまたはグループを検索して探すためのテキスト ボックスが表示されます。 この画面では、一度に複数のユーザーとグループを選択できます。

1. ユーザーとグループの選択が終了したら、一番下の **[選択]** ボタンをクリックして次の段階に進みます。
1. 一番下の **[割り当て]** ボタンをクリックすると、ユーザーとグループのアプリへの割り当てが完了します。 
1. 追加したユーザーとグループが、更新された **[ユーザーとグループ]** のリストに表示されていることを確認します。

