---
title: Azure Active Directory でのエンタープライズ アプリのユーザー プロビジョニング管理 | Microsoft Docs
description: Azure Active Directory を使用してエンタープライズ アプリのユーザー アカウント プロビジョニングを管理する方法について説明します
services: active-directory
documentationcenter: ''
author: msmimart
manager: CelesteDG
ms.service: active-directory
ms.subservice: app-mgmt
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/01/2019
ms.author: mimart
ms.reviewer: arvinh
ms.collection: M365-identity-device-management
ms.openlocfilehash: b994078350aec5657659f8835d228eb907606bb8
ms.sourcegitcommit: 47ce9ac1eb1561810b8e4242c45127f7b4a4aa1a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/11/2019
ms.locfileid: "67807630"
---
# <a name="managing-user-account-provisioning-for-enterprise-apps-in-the-azure-portal"></a>Azure Portal でエンタープライズ アプリのユーザー アカウント プロビジョニングを管理する

この記事では、[Azure portal](https://portal.azure.com) を使用して、サポートされているアプリケーションの自動ユーザー アカウントのプロビジョニングとプロビジョニング解除を管理する方法について説明します。 自動ユーザー アカウント プロビジョニングの詳細とそのしくみについては、「 [Azure Active Directory による SaaS アプリへのユーザー プロビジョニングとプロビジョニング解除の自動化](user-provisioning.md)」を参照してください。

## <a name="finding-your-apps-in-the-portal"></a>ポータルでアプリを検索する

Azure Active Directory ポータルを使用して、ディレクトリでのシングル サインオン用に構成されているすべてのアプリケーションを表示して管理します。 エンタープライズ アプリとは、組織内で使用されるデプロイ済みのアプリです。 エンタープライズ アプリを表示して管理するには、次の手順に従います。

1. [Azure Active Directory ポータル](https://aad.portal.azure.com)を開きます。
1. 左側のウィンドウで、 **[エンタープライズ アプリケーション]** を選択します。 ギャラリーから追加されたアプリを含む、構成済みのすべてのアプリの一覧が表示されます。
1. 任意のアプリを選択し、そのリソース ウィンドウを読み込み、そこでレポートを表示したり、アプリの設定を管理したりできます。
1. 選択したアプリのユーザー アカウントのプロビジョニング設定を管理するには、 **[プロビジョニング]** を選択します。

   ![ユーザー アカウントでのプロビジョニング設定を管理する [プロビジョニング] 画面](./media/configure-automatic-user-provisioning-portal/enterprise-apps-provisioning.png)

## <a name="provisioning-modes"></a>プロビジョニング モード

**[プロビジョニング]** ウィンドウの先頭には **[モード]** メニューがあり、エンタープライズ アプリケーションでサポートされているプロビジョニング モードが表示され、プロビジョニング モードを構成できます。 利用可能なオプションは、次のとおりです。

* **[自動]** - Azure AD でこのアプリケーションに対する API ベースの自動ユーザー アカウント プロビジョニングやプロビジョニング解除がサポートされている場合、このオプションが表示されます。 このモードを選択すると、管理者に役立つインターフェイスが表示されます。

  * アプリケーションのユーザー管理 API に接続するように Azure AD を構成する
  * Azure AD とアプリの間でのユーザー アカウント データのフロー方法を定義するアカウント マッピングとワークフローを作成する
  * Azure AD プロビジョニング サービスを管理する

* **[手動]** - Azure AD でこのアプリケーションに対するユーザー アカウントの自動プロビジョニングがサポートされていない場合、このオプションが表示されます。 この場合は、アプリケーションが提供するユーザーの管理とプロビジョニング機能 (SAML のジャストインタイム プロビジョニングなど) に基づき、外部プロセスを使用して、そのアプリケーションに格納されているユーザー アカウント レコードを管理する必要があることを意味します。

## <a name="configuring-automatic-user-account-provisioning"></a>自動ユーザー アカウント プロビジョニングを構成する

**[自動]** オプションを選択し、管理者の資格情報、マッピング、開始と停止、および同期の設定を指定します。

### <a name="admin-credentials"></a>[Admin Credentials (管理者の資格情報)]

**[管理者資格情報]** を展開し、Azure AD をアプリケーションのユーザー管理 API に接続するために必要な資格情報を入力します。 必要な入力は、アプリケーションによって異なります。 資格情報の種類と特定のアプリケーションの要件の詳細については、 [その特定のアプリケーションの構成に関するチュートリアル](user-provisioning.md)を参照してください。

**[接続テスト]** を選択して、資格情報をテストします (Azure AD が、指定された資格情報を使用してアプリのプロビジョニング アプリへの接続を試みます)。

### <a name="mappings"></a>マッピング

**[マッピング]** を展開し、ユーザー アカウントをプロビジョニングまたは更新する場合に、Azure AD とターゲット アプリケーションの間でフローするユーザー属性を表示および編集します。

Azure AD ユーザー オブジェクトと各 SaaS アプリのユーザー オブジェクトの間には、構成済みの一連のマッピングが存在します。 アプリによっては、グループや連絡先といった他のタイプのオブジェクトを管理するものもあります。 テーブルでマッピングを選択すると右側にマッピング エディターが開き、それらを表示してカスタマイズできます。

![[属性マッピング] 画面を表示します](./media/configure-automatic-user-provisioning-portal/enterprise-apps-provisioning-mapping.png)

サポートされるカスタマイズは次のとおりです。

* Azure AD ユーザー オブジェクトと SaaS アプリのユーザー オブジェクトなど、特定のオブジェクトのマッピングを有効および無効にする。
* Azure AD ユーザー オブジェクトからアプリのユーザー オブジェクトにフローする属性を編集する。 属性マッピングの詳細については、「 [属性マッピングの種類について](customize-application-attributes.md#understanding-attribute-mapping-types)」を参照してください。
* Azure AD がターゲット アプリケーションに対して実行するプロビジョニング操作をフィルター処理する。 Azure AD でオブジェクトを完全に同期するのではなく、実行される操作を制限することができます。

  たとえば、 **[更新]** のみを選択すると、Azure AD はアプリケーションの既存のユーザー アカウントの更新のみを行い、新しいユーザー アカウントは作成しません。 **[作成]** のみを選択すると、Azure は新しいユーザー アカウントの作成のみを行い、既存のユーザー アカウントは更新しません。 この機能により、アカウントの作成ワークフローと更新ワークフローで異なるマッピングを作成できます。

* 新しい属性マッピングを追加する。 **[属性マッピング]** ウィンドウの下部にある **[新しいマッピングの追加]** を選択します。 **[属性の編集]** フォームに記入し、 **[OK]** を選択してリストに新しいマッピングを追加します。

### <a name="settings"></a>設定

**[プロビジョニング]** 画面の **[設定]** 領域で、選択したアプリケーションの Azure AD プロビジョニング サービスを開始したり停止したりできます。 また、プロビジョニング キャッシュをクリアしたり、サービスを再起動したりすることもできます。

アプリケーションに対して初めてプロビジョニングを有効にする場合は、 **[プロビジョニング状態]** を **[オン]** に変更して、サービスを有効にします。 この変更により、Azure AD プロビジョニング サービスで初期同期が実行されます。これにより、 **[ユーザーとグループ]** セクションで割り当てられたユーザーが読み取られ、そのユーザーのターゲット アプリケーションが照会され、Azure AD の **[マッピング]** セクションで定義されているプロビジョニング操作が実行されます。 このプロセス中に、プロビジョニング サービスは管理対象のユーザー アカウントに関するキャッシュ データを格納します。そのため、割り当てのスコープに存在しない、ターゲット アプリケーション内の管理対象外のアカウントはプロビジョニング解除操作の影響を受けません。 初期同期の後、プロビジョニング サービスは 10 分間隔で自動的にユーザーとグループ オブジェクトを同期します。

**[プロビジョニング状態]** を **[オフ]** に変更すると、プロビジョニング サービスが一時停止します。 この状態では、アプリのユーザーやグループ オブジェクトの作成、更新、削除が行われることはありません。 状態を **[オン]** に戻すと、サービスは中断したところから再開します。

**[現在の状態を消去して、同期を再開します]** チェック ボックスをオンにし、 **[保存]** を選択して次の操作を実行します。

* プロビジョニング サービスを停止する
* Azure AD が管理しているアカウントに関するキャッシュ データをダンプする
* サービスを再起動し、初期同期を再度実行する

このオプションを使用すると、プロビジョニング デプロイ プロセスを繰り返し開始できます。

### <a name="synchronization-details"></a>[Synchronization Details (同期の詳細)]

このセクションには、アプリケーションに対してプロビジョニング サービスを最初に実行した時間と最後に実行した時間や、管理しているユーザーとグループ オブジェクトの数など、プロビジョニング サービスの操作の詳細が表示されます。

**プロビジョニング アクティビティ レポート**へのリンクが提供されます。これにより、Azure AD とターゲット アプリケーションの間で作成、更新、削除されたすべてのユーザーとグループのログを確認できます。 また、**プロビジョニング エラー レポート**へのリンクも提供されます。これにより、読み取り、作成、または削除に失敗したユーザー オブジェクトとグループ オブジェクトの詳細なエラー メッセージを確認できます。
