---
title: ギャラリー以外のアプリケーションのパスワード SSO を構成する場合の問題 | Microsoft Docs
description: Azure AD アプリケーション ギャラリーに含まれていないカスタム アプリのパスワード シングル サインオン (SSO) を構成するときに発生する一般的な問題です。
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
ms.assetid: ''
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 07/11/2017
ms.author: celested
ms.collection: M365-identity-device-management
ms.openlocfilehash: 24330dc874173ba1c6f15abb7b4caf9f23e2e00c
ms.sourcegitcommit: f56b267b11f23ac8f6284bb662b38c7a8336e99b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/28/2019
ms.locfileid: "67440349"
---
# <a name="problems-configuring-password-single-sign-on-for-a-non-gallery-application"></a>ギャラリー以外のアプリケーションのパスワード シングル サインオンを構成する場合の問題

この記事では、ギャラリー以外のアプリの*パスワード シングル サインオン* (SSO) を構成するときに発生する可能性がある一般的な問題について説明します。

## <a name="capture-sign-in-fields-for-an-app"></a>アプリのサインイン フィールドをキャプチャする

サインイン フィールドのキャプチャは、HTML 対応のサインイン ページでのみサポートされます。 Adobe Flash やその他の HTML 非対応テクノロジを使用するページなどの非標準サインイン ページではサポートされていません。

ご自分のカスタム アプリのサインイン フィールドをキャプチャするには、2 つの方法があります。

- **自動サインイン フィールド キャプチャ**は、ほとんどの HTML 対応サインイン ページでうまく機能します (*ユーザー名とパスワードのフィールドで、よく知られた DIV ID* が使用されている場合)。 ページの HTML が取得され、特定の条件に一致する DIV ID が検索されます。 そのメタデータは、後でアプリに対して再生できるように、保存されます。

- **手動サインイン フィールド キャプチャ**は、アプリ ベンダーが*サインイン入力フィールドにラベルを付けていない*場合に使用します。 手動キャプチャは、*自動検出することができない複数のフィールドをベンダーが表示*する場合にも使用します。 Azure Active Directory (Azure AD) は、ページ上のどこにフィールドがあるかが指定されれば、サインイン ページ上にあるすべてのフィールドのデータを格納できます。

一般に、自動サインイン フィールド キャプチャが機能しない場合は、手動オプションを試してください。

### <a name="automatically-capture-sign-in-fields-for-an-app"></a>アプリのサインイン フィールドを自動的にキャプチャする

自動サインイン フィールド キャプチャを使用して、パスワードベースの SSO を構成するには、これらの手順に従います。

1. [Azure Portal](https://portal.azure.com/)を開きます。 グローバル管理者または共同管理者としてサインインします。

2. 左側のナビゲーション ウィンドウで、 **[すべてのサービス]** を選択して、Azure AD 拡張機能を開きます。

3. フィルター検索ボックスに「**Azure Active Directory**」と入力し、 **[Azure Active Directory]** を選択します。

4. Azure AD ナビゲーション ウィンドウで、 **[エンタープライズ アプリケーション]** を選択します。

5. **[すべてのアプリケーション]** を選択して、ご自分のアプリの一覧を表示します。

   > [!NOTE]
   > 目的のアプリが表示されない場合、 **[すべてのアプリケーション]** の一覧の上部にある **[フィルター]** コントロールを使用します。 **[表示]** オプションを [すべてのアプリケーション] に設定します。

6. SSO を構成するアプリを選択します。

7. アプリが読み込まれたら、左側のナビゲーション ウィンドウで、 **[シングル サインオン]** を選択します。

8. **[パスワード ベースのサインオン]** モードを選択します。

9. **サインオン URL** を入力します。これは、ユーザーがサインインするために自分のユーザー名とパスワードを入力するページの URL です。 *指定する URL のページ上にサインイン フィールドが表示されていることを確認してください*。

10. **[保存]** を選択します。

    このページは、ユーザー名とパスワードの入力ボックス用に自動的に取得されます。 これで、Azure AD を使用し、アクセス パネルのブラウザー拡張機能を利用してそのアプリにパスワードを安全に送信できます。

### <a name="manually-capture-sign-in-fields-for-an-app"></a>アプリのサインイン フィールドを手動でキャプチャする

サインイン フィールドを手動でキャプチャするには、アクセス パネルのブラウザー拡張機能がインストールされている必要があります。 また、お使いのブラウザーを *inPrivate*、*incognito*、および *private* モードで実行することはできません。

この拡張機能をインストールするには、この記事の「[アクセス パネルのブラウザー拡張機能をインストールする](#install-the-access-panel-browser-extension)」セクションを参照してください。

手動サインイン フィールド キャプチャを使用して、アプリに対してパスワードベースの SSO を構成するには、これらの手順に従います。

1. [Azure Portal](https://portal.azure.com/)を開きます。 グローバル管理者または共同管理者としてサインインします。

2. 左側のナビゲーション ウィンドウで、 **[すべてのサービス]** を選択して、Azure AD 拡張機能を開きます。

3. フィルター検索ボックスに「**Azure Active Directory**」と入力し、 **[Azure Active Directory]** を選択します。

4. Azure AD ナビゲーション ウィンドウで、 **[エンタープライズ アプリケーション]** を選択します。

5. **[すべてのアプリケーション]** を選択して、ご自分のアプリの一覧を表示します。

   > [!NOTE] 
   > 目的のアプリが表示されない場合、 **[すべてのアプリケーション]** の一覧の上部にある **[フィルター]** コントロールを使用します。 **[表示]** オプションを [すべてのアプリケーション] に設定します。

6. SSO を構成するアプリを選択します。

7. アプリが読み込まれたら、左側のナビゲーション ウィンドウで、 **[シングル サインオン]** を選択します。

8. **[パスワード ベースのサインオン]** モードを選択します。

9. **サインオン URL** を入力します。これは、ユーザーがサインインするために自分のユーザー名とパスワードを入力するページです。 *指定する URL のページ上にサインイン フィールドが表示されていることを確認してください*。

10. **[ *&lt;appname&gt;* パスワード シングル サインオン設定の構成]** を選択します。

11. **[サインイン フィールドの手動検出]** を選択します。

14. **[OK]** を選びます。

15. **[保存]** を選択します。

16. 手順に従って、アクセス パネルを使用します。

## <a name="troubleshoot-problems"></a>問題のトラブルシューティング

### <a name="i-get-a-we-couldnt-find-any-sign-in-fields-at-that-url-error"></a>"その URL でサインイン フィールドが見つかりませんでした" というエラーが表示される

サインイン フィールドの自動検出が失敗した場合に、このエラー メッセージが表示されます。 この問題を解決するには、手動サインイン フィールド検出を試します。 この記事の「[アプリのサインイン フィールドを手動でキャプチャする](#manually-capture-sign-in-fields-for-an-app)」セクションを参照してください。

### <a name="i-get-an-unable-to-save-single-sign-on-configuration-error"></a>"シングル サインオンの構成を保存できません" というエラーが表示される

まれに SSO 構成の更新に失敗することがあります。 この問題を解決するには、構成をもう一度保存してみます。

引き続きエラーが表示される場合は、サポート ケースを開きます。 この記事の「[ポータル通知の詳細を表示する](#view-portal-notification-details)」と「[支援を受けるためにサポート エンジニアに通知の詳細を送信する](#send-notification-details-to-a-support-engineer-to-get-help)」セクション内で説明されている情報を含めてください。

### <a name="i-cant-manually-detect-sign-in-fields-for-my-app"></a>自分のアプリのサインイン フィールドを手動で検出できない

手動検出が機能しない場合は、次の動作が見られる場合があります。

- 手動キャプチャ プロセスは機能しているように見えるが、キャプチャされたフィールドが正しくない。

- キャプチャ プロセスを実行しているときに、正しいフィールドが強調表示されない。

- キャプチャ プロセスにより、期待どおりにアプリのサインイン ページに移動するが、何も起こらない。

- 手動キャプチャは機能しているように見えるが、ユーザーがアクセス パネルからアプリに移動しても SSO が行われない。

これらの問題のいずれかが発生した場合は、次のことを行います。

- アクセス パネルのブラウザー拡張機能の最新バージョンが "*インストールされ、有効になっている*" ことを確認します。 この記事の「[アクセス パネルのブラウザー拡張機能をインストールする](#install-the-access-panel-browser-extension)」セクションを参照してください。

- キャプチャ プロセス中にお使いのブラウザーが *incognito*、*inPrivate*、または *Private* モードでないことを確認します。 アクセス パネルの拡張機能は、これらのモードではサポートされていません。

- *incognito*、*inPrivate*、または *Private モード*のときに、ユーザーがアクセス パネルからアプリにサインインしようとしていないことを確認します。

- 手動キャプチャ プロセスをもう一度試します。 正しいフィールドに赤いマーカーが表示されていることを確認します。

- 手動キャプチャ プロセスの応答が停止しているように見えるか、サインイン ページが応答しない場合は、手動キャプチャ プロセスをもう一度試します。 ただし、今回はプロセスを完了した後で F12 キーを押して、ブラウザーの開発者コンソールを開きます。 **[コンソール]** タブを選択します。「**window.location=" *&lt;アプリの構成時に指定したサインイン URL&gt;* "** 」と入力し、Enter キーを押します。 これにより、キャプチャ プロセスを終了し、キャプチャされたフィールドを格納するページ リダイレクトが強制的に実行されます。

### <a name="contact-support"></a>サポートにお問い合せください

まだ問題がある場合は、Microsoft サポートでケースを開きます。 試したことを記載します。 この記事の「[ポータル通知の詳細を表示する](#view-portal-notification-details)」と「[支援を受けるためにサポート エンジニアに通知の詳細を送信する](#send-notification-details-to-a-support-engineer-to-get-help)」セクション内で説明されている詳細を含めてください (該当する場合)。

## <a name="install-the-access-panel-browser-extension"></a>アクセス パネルのブラウザー拡張機能をインストールする

次の手順に従います。

1. サポートされているブラウザーで[アクセス パネル](https://myapps.microsoft.com)を開きます。 "*ユーザー*" として Azure AD にサインインします。

2. アクセス パネルで、**パスワード SSO アプリケーション**を選択します。

3. ソフトウェアのインストールを求められたら、 **[今すぐインストール]** を選択します。

4. お使いのブラウザーのダウンロード ページに転送されます。 拡張機能の**追加**を選択します。

5. メッセージが表示されたら、 **[有効にする]** または **[許可する]** を選択します。

6. インストール後、お使いのブラウザーを再起動します。

7. アクセス パネルにサインインします。 ご自分のパスワード SSO 対応アプリを開くことができるかどうかを確認します。

これらのリンクから、Chrome および Firefox 向けのブラウザー拡張機能を直接ダウンロードすることもできます。

-   [Chrome アクセス パネル拡張機能](https://chrome.google.com/webstore/detail/access-panel-extension/ggjhpefgjjfobnfoldnjipclpcfbgbhl)

-   [Firefox アクセス パネル拡張機能](https://addons.mozilla.org/firefox/addon/access-panel-extension/)

## <a name="view-portal-notification-details"></a>ポータル通知の詳細を表示する

ポータルの通知の詳細を確認するには、これらの手順に従います。

1. Azure portal の右上隅にある **[通知]** アイコン (ベル) を選択します。

2. *[エラー]* 状態が表示されている任意の通知を選択します (赤い "!" が表示されているものです)。

   > [!NOTE]
   > *[成功]* または *[進行中]* 状態の通知を選択することはできません。

3. **[通知の詳細]** ウィンドウが開きます。 情報を読んで問題を把握します。

5. 依然として支援が必要な場合は、この情報をサポート エンジニアまたは製品グループと共有します。 **[エラーのコピー]** ボックスの右にある **[コピー]** アイコンを選択して、共有する通知の詳細をコピーします。

## <a name="send-notification-details-to-a-support-engineer-to-get-help"></a>支援を受けるためにサポート エンジニアに通知の詳細を送信する

このセクションに記載されている詳細を "*すべて*" サポートと共有することが重要です。これにより、すばやい解決が実現します。 これを記録するには、スクリーンショットを撮るか、 **[エラーのコピー]** を選択します。

次の情報は、各通知項目の意味を説明し、例を示しています。

### <a name="essential-notification-items"></a>重要な通知項目

- **タイトル**: 通知のわかりやすいタイトル。

   例:"*アプリケーション プロキシの設定*"

- **説明**: 操作の結果として発生したこと。

   例:"*入力された内部 URL は、既に別のアプリケーションで使用されています。* "

- **通知 ID**: 通知の一意の ID。

    例: *clientNotification-2adbfc06-2073-4678-a69f-7eb78d96b068*

- **クライアント要求 ID**: お使いのブラウザーで作成された特定の要求 ID。

    例:*302fd775-3329-4670-a9f3-bea37004f0bc*

- **タイム スタンプ UTC**: 通知発生時のタイムスタンプ (UTC)。

    例:*2017-03-23T19:50:43.7583681Z*

- **内部トランザクション ID**: Microsoft のシステム内でエラーを検索するために使用される内部 ID。

    例:**71a2f329-ca29-402f-aa72-bc00a7aca603**

- **UPN**:操作を実行したユーザー。

    例: *tperkins\@f128.info*

- **テナント ID**: 操作を実行したユーザーがメンバーであるテナントの一意の ID。

    例:*7918d4b5-0442-4a97-be2d-36f9f9962ece*

- **ユーザー オブジェクト ID**:操作を実行したユーザーの一意の ID。

    例:*17f84be4-51f8-483a-b533-383791227a99*

### <a name="detailed-notification-items"></a>詳細な通知項目

- **表示名**: (空白でも可) エラーの詳細な表示名。

    例:"*アプリケーション プロキシの設定*"

- **状態**: 通知の特定の状態。

    例:*失敗*

- **オブジェクト ID**: (空でも可) 実行された操作の対象であるオブジェクト ID。

   例:*8e08161d-f2fd-40ad-a34a-a9632d6bb599*

- **詳細**: 操作の結果として発生したことについての詳細な説明。

    例:"*内部 URL "<https://bing.com/>" は既に使用中のため無効です。* "

- **エラーのコピー**: **[エラーのコピー]** ボックスの右にある **[コピー]** アイコンを選択すると、サポートに役立つ通知の詳細をコピーできます。

    例: ```{"errorCode":"InternalUrl\_Duplicate","localizedErrorDetails":{"errorDetail":"Internal url 'https://google.com/' is invalid since it is already in use"},"operationResults":\[{"objectId":null,"displayName":null,"status":0,"details":"Internal url 'https://bing.com/' is invalid since it is already in use"}\],"timeStampUtc":"2017-03-23T19:50:26.465743Z","clientRequestId":"302fd775-3329-4670-a9f3-bea37004f0bb","internalTransactionId":"ea5b5475-03b9-4f08-8e95-bbb11289ab65","upn":"tperkins@f128.info","tenantId":"7918d4b5-0442-4a97-be2d-36f9f9962ece","userObjectId":"17f84be4-51f8-483a-b533-383791227a99"}```

## <a name="next-steps"></a>次の手順
[アプリケーション プロキシを使用してアプリにシングル サインオンを提供](application-proxy-configure-single-sign-on-with-kcd.md)
