---
title: Azure Active Directory アクセス レビューのデプロイの計画
description: アクセス レビューのデプロイを成功させるための計画ガイド
services: active-directory
documentationCenter: ''
author: BarbaraSelden
manager: daveba
editor: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: how-to
ms.subservice: compliance
ms.date: 12/23/2020
ms.author: barclayn
ms.reviewer: markwahl-msft
ms.collection: M365-identity-device-management
ms.openlocfilehash: 3af783d7ff8be36c63af871ab4f2d214ca9f9405
ms.sourcegitcommit: 49b2069d9bcee4ee7dd77b9f1791588fe2a23937
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2021
ms.locfileid: "107532585"
---
# <a name="planning-azure-active-directory-access-reviews-deployment"></a>Azure Active Directory アクセス レビューのデプロイの計画

組織で [Azure Active Directory (Azure AD) アクセス レビュー](access-reviews-overview.md)を利用して[リソース アクセス ライフサイクル](identity-governance-overview.md)を管理すると、ネットワークをより安全に保つことができます。 アクセス レビューでは、次のことができます。

* 定期的なレビューをスケジュールするか、アドホック レビューを実行して、アプリケーションやグループなどの特定のリソースにアクセスできるユーザーを確認します

* 分析情報、コンプライアンス、またはポリシー上の理由のレビューを追跡します

* 継続的なアクセスの必要性を自己証明できる特定の管理者、ビジネス オーナー、またはエンド ユーザーにレビューを委任します

* 分析情報を使用して、ユーザーに引き続きアクセスを許可してもよいかどうかを効率的に判断します

* リソースに対するユーザーのアクセス権の削除など、レビュー結果に基づく処理を自動化します

  ![アクセス レビュー フローを示す図。](./media/deploy-access-review/1-planning-review.png)

アクセス レビューは [Azure AD Identity Governance](identity-governance-overview.md) の機能です。 その他の機能には、[エンタイトルメント管理](entitlement-management-overview.md)、[Privileged Identity Management](../privileged-identity-management/pim-configure.md)、[Terms of Use](../conditional-access/terms-of-use.md) などがあります。 これらの機能によって、組織では次の 4 つの疑問を解決できます。

* どのユーザーがどのリソースへのアクセス権を持つ必要があるか。

* それらのユーザーはそのアクセス権によって何を実行するか。

* アクセスを管理するための効果的な組織的管理は存在しているか。

* 監査者は管理が機能していることを確認できるか。

アクセス レビューのデプロイを計画することは、組織内のユーザーに対する望ましいガバナンス戦略を確実に実現するために不可欠です。

### <a name="key-benefits"></a>主な利点

アクセス レビューを有効にする主な利点は次のとおりです。

* **コラボレーションの制御**。 アクセス レビューを使用すると、組織のユーザーが必要とするすべてのリソースへのアクセスを管理できます。 組織のユーザーが情報を共有して共同作業を行うときに、許可されているユーザーのみが情報にアクセスできることを保証できます。

* **リスクの管理**。 アクセス レビューは、組織でデータとアプリケーションへのアクセスをレビューし、データの漏洩や流出のリスクを減らすための手段となります。 これには、外部パートナーによる企業リソースへのアクセスを定期的にレビューする機能が含まれます。 

* **コンプライアンスとガバナンスへの対応**。 アクセス レビューを使用して、グループ、アプリ、サイトへのアクセス ライフサイクルを管理および再認定できます。 コンプライアンスまたはリスクに敏感な、組織に固有のアプリケーションに対するレビューを制御および追跡できます。 

* **コスト削減**。 アクセス レビューはクラウドに組み込まれ、グループ、アプリケーション、アクセス パッケージなどのクラウド リソースとネイティブに連携します。 アクセス レビューを使用すれば、独自のツールを構築したり、オンプレミスのツールセットをアップグレードしたりするよりもコストを抑えられます。

### <a name="training-resources"></a>トレーニング リソース

アクセス レビューについて学ぶ過程で、以下のビデオが役に立つ場合があります。

* [What are Access Reviews in Azure AD?](https://youtu.be/kDRjQQ22Wkk) (Azure AD のアクセス レビューとは)

* [How to create Access Reviews in Azure AD](https://youtu.be/6KB3TZ8Wi40) (Azure AD でアクセス レビューを作成する方法)

* [How to enable Access Reviews in Azure AD](https://youtu.be/X1SL2uubx9M) (Azure AD でアクセス レビューを有効にする方法)

* [How to review access using My Access](https://youtu.be/tIKdQhdHLXU) (マイ アクセスを使ってアクセスをレビューする方法)

### <a name="licenses"></a>ライセンス

アクセス レビューを作成または実行する、全体管理者またはユーザー管理者以外のユーザーごとに、有効な Azure AD Premium (P2) ライセンスが必要です。 詳細については、[アクセス レビューのライセンス要件](access-reviews-overview.md)に関するページを参照してください。

[エンタイトルメント ライフサイクル管理](entitlement-management-overview.md)や Privileged Identity Management など、Identity Governance のその他の機能も必要になる場合があります。 その場合、関連するライセンスも必要になることがあります。 詳細については、「[Azure Active Directory の価格](https://azure.microsoft.com/pricing/details/active-directory/)」をご覧ください。

## <a name="plan-the-access-reviews-deployment-project"></a>アクセス レビューのデプロイ プロジェクトの計画

組織のニーズを考慮して、環境にアクセス レビューをデプロイするための戦略を決定します。

### <a name="engage-the-right-stakeholders"></a>適切な関係者を関わらせる

テクノロジ プロジェクトが失敗した場合、その原因は通常、影響、結果、および責任に対する想定の不一致です。 これらの落とし穴を回避するには、[適切な関係者が担当していることを確認](../fundamentals/active-directory-deployment-plans.md)し、またそのプロジェクトの役割が明確になっていることを確認します。

アクセス レビューの場合は、組織内の次のチームの代表者を含めることが考えられます。

* **IT 管理** は、IT インフラストラクチャ、クラウドへの投資、サービスとしてのソフトウェア (SaaS) アプリを管理します。 このチームは次のことを行います。

   * Microsoft 365 や Azure AD などのインフラストラクチャとアプリへの特権アクセスをレビューします。

   * 例外リストまたは IT パイロット プロジェクトの管理に使用するアクセス レビューをグループに対してスケジュールおよび実行し、最新のアクセス リストを管理します。

   * サービス プリンシパル経由の、プログラム (スクリプト) によるリソースへのアクセスが管理およびレビューされることを保証します。

* **開発チーム** は、組織のアプリケーションを構築および管理します。 このチームは次のことを行います。

   * 開発されたソリューションを構成する SaaS、PaaS、IaaS リソース内のコンポーネントにアクセスして管理できるユーザーを制御します。

   * 内部アプリケーション開発用のアプリケーションとツールにアクセスできるグループを管理します。

   * 顧客に代わってホストしている運用環境のソフトウェアまたはソリューションにアクセスできる特権 ID を要求します。

* **ビジネス ユニット** は、プロジェクトと独自のアプリケーションを管理します。 このチームは次のことを行います。 

   * 内部および外部ユーザー向けのグループやアプリケーションへのアクセスをレビューし、承認または拒否します。

   * 従業員による、またビジネス パートナーなどの外部 ID による継続的なアクセスを証明するためのレビューをスケジュールし、実行します。

* **コーポレート ガバナンス** は、組織で内部ポリシーに従い、規制を遵守していることを保証します。 このチームは次のことを行います。

   * 新しいアクセス レビューを要求またはスケジュールします。

   * コンプライアンスのための文書と記録の保存など、アクセスをレビューするためのプロセスと手順を評価します。

   * 最も重要なリソースについて、過去のレビューの結果をレビューします。

> [!NOTE]
> 手動での評価が必要なレビューについては、必ず、ポリシーとコンプライアンスのニーズを満たす適切なレビュー担当者とレビュー サイクルを計画してください。 レビュー サイクルが頻繁すぎたり、レビュー担当者が少なすぎたりすると、レビューの質が低下し、アクセスを許可するユーザーを不当に多く、または少なくしてしまう可能性があります。 

### <a name="plan-communications"></a>連絡を計画する

コミュニケーションは、新しいビジネス プロセスの成功に必要不可欠です。 エクスペリエンスがいつ、どのように変わるのか、また問題が発生した場合にサポートを受ける方法について、ユーザーに事前に連絡します。 

#### <a name="communicate-changes-in-accountability"></a>アカウンタビリティの変更の連絡

アクセス レビューは、継続的なアクセスのレビューと必要な対応の責務をビジネス オーナーに移管するプロセスを支援します。 アクセスに関する決定を IT 部門から切り離すことで、より正確な決定が可能になります。 これによって、リソース所有者の説明責任と責務の文化が変わります。 この変更を事前に伝えて、リソース所有者がトレーニングを受けられるよう、また、分析情報を用いて適切な決定を行えるようにします。

インフラストラクチャ関連のアクセスに関わるすべての決定と、特権ロールの割り当てについては、IT 部門が制御を手放したくないことは明らかです。 

#### <a name="customize-email-communication"></a>メールによるコミュニケーションのカスタマイズ

レビューをスケジュールするときは、このレビューを実行するユーザーを指名します。 これらのレビュー担当者は、新しいレビューが割り当てられたことの通知と、割り当てられたレビューの期限が切れる前のリマインダーをメールで受け取ります。

管理者は、レビューが期限切れになるまでの中間点で、または期限切れの 1 日前にこの通知を送信するよう選択できます。 

レビュー担当者に送信するメールをカスタマイズし、レビューへの対応を促すカスタムの短いメッセージを含めることができます。 追加のテキストは、次のように使用することを推奨します。

* コンプライアンスまたは IT 部門が差出人であることがわかるよう、レビュー担当者宛ての個人的なメッセージを含めます。

* レビューの期待内容に関する内部情報へのハイパーリンクまたは参照と、追加の参考資料またはトレーニング資料を含めます。

* [アクセスの自己レビューを実行する方法](review-your-access.md)の説明へのリンクを含めます。 

  ![レビュー担当者のメール](./media/deploy-access-review/2-plan-reviewer-email.png)

[レビューの開始] を選択すると、レビュー担当者は、グループとアプリケーションのアクセス レビューを行うための [myAccess ポータル](https://myapplications.microsoft.com/)に誘導されます。 このポータルでは、レビュー対象のリソースにアクセスできるすべてのユーザーの概要と、最後のサインインおよびアクセスの情報に基づいたシステムからのレコメンデーションが表示されます。

### <a name="plan-a-pilot"></a>パイロットを計画する

少人数のグループと重要でないリソースを対象にした、パイロットのアクセス レビューから始めることを推奨します。 パイロットに基づいて、プロセスやコミュニケーションを必要に応じて調整することができます。またこれは、ユーザーとレビュー担当者にとって、セキュリティとコンプライアンスの要件を満たすためのトレーニングになります。

パイロットでは、次のことを推奨します。

* 結果が自動的に適用されず、影響を制御できるレビューから始めます。

* すべてのユーザーが、Azure AD に登録された有効なメール アドレスを持っており、適切な対応を促すメール通知を受け取れることを確認します。 

* すぐに復元できるよう、パイロットの途中で削除したアクセスを文書に残しておきます。

* 監査ログを監視し、すべてのイベントが適切に監査されていることを確認します。

詳細については、「[パイロットのベスト プラクティス](../fundamentals/active-directory-deployment-plans.md)」を参照してください。

## <a name="introduction-to-access-reviews"></a>アクセス レビューの概要

このセクションでは、レビューを計画する前に知っておく必要があるアクセス レビューの概念について説明します。

### <a name="what-resource-types-can-be-reviewed"></a>レビューが可能なリソースの種類は?

組織のリソース (ユーザー、アプリケーション、グループなど) を Azure AD に統合したら、それらを管理およびレビューできます。 

一般的なレビュー対象は次のとおりです。

* [シングル サインオンのために Azure AD と統合されたアプリケーション](../manage-apps/what-is-application-management.md) (SaaS、基幹業務など)。

* グループ [メンバーシップ](../fundamentals/active-directory-manage-groups.md?context=azure%2factive-directory%2fusers-groups-roles%2fcontext%2fugr-context) (Azure AD と同期されるか、Azure AD または Microsoft 365 (Microsoft Teams を含む) で作成されるもの)。

* リソース (グループ、アプリ、サイト) を 1 つのパッケージにグループ化してアクセスを管理する[アクセス パッケージ](./entitlement-management-overview.md)。

* Privileged Identity Management で定義された [Azure AD ロールと Azure リソース ロール](../privileged-identity-management/pim-resource-roles-assign-roles.md)。

### <a name="who-will-create-and-manage-access-reviews"></a>アクセス レビューを作成および管理するのは誰か?

アクセス レビューの作成、管理、または読み取りに必要な管理者ロールは、レビューするリソースの種類によって異なります。 次の表に、必要なロールをリソースの種類ごとに示します。

| リソースの種類| アクセス レビューの作成と管理 (作成者)| アクセス レビュー結果の読み取り |
| - | - | -|
| グループまたはアプリケーション| グローバル管理者 <p>ユーザー管理者| 作成者とセキュリティ管理者 |
| Azure AD の特権ロール| グローバル管理者 <p>特権ロール管理者| 作成者 <p>セキュリティ閲覧者<p>セキュリティ管理者 |
| Azure の特権ロール (リソース)| グローバル管理者<p>ユーザー管理者<p>リソースの所有者| 作成者 |
| アクセス パッケージ| グローバル管理者<p>アクセス パッケージの作成者| 全体管理者のみ |


詳細については、「[Azure Active Directory での管理者ロールのアクセス許可](../roles/permissions-reference.md)」を参照してください。

### <a name="who-will-review-the-access-to-the-resource"></a>リソースへのアクセスをレビューするのは誰か?

誰がレビューを実行するかは、アクセス レビューの作成者が作成時に決定します。 この設定は、レビューが開始した後は変更できません。 レビュー担当者は、次の 3 つのペルソナで表されます。

* リソースのビジネス オーナーであるリソース所有者。

* アクセス レビューの管理者によって個別に選択された委任のセット。

* 継続的なアクセスの必要性を各自で自己証明するエンド ユーザー。

アクセス レビューを作成するとき、管理者は 1 人以上のレビュー担当者を選択できます。 すべてのレビュー担当者が、レビューを開始および実行し、リソースに継続的にアクセスするユーザーを選択または削除することができます。 

### <a name="components-of-an-access-review"></a>アクセス レビューのコンポーネント

アクセス レビューを実装する前に、組織で必要なレビューの種類を計画する必要があります。 そのためには、レビューする対象と、レビューに基づいて実行するアクションについてビジネス上の意思決定を行う必要があります。

アクセス レビューのポリシーを作成するには、次の情報が必要です。

* レビューするリソースは何か?

* アクセスをレビューする対象のユーザー。

* レビューの実行頻度は?

* レビューを実行するのは誰か?

   * レビュー担当者への通知方法は?

   * レビューの期限は?

* レビューに基づいて実行する自動アクションは?

   * レビュー担当者が期限を守らなかった場合の対応は?

* レビューに基づいた結果として、どのような手動アクションを実行するか?

* 実行されたアクションに基づいてどのような通知を送信するか?


**アクセス レビュー計画の例**

| コンポーネント| 値 |
| - | - |
| **レビューするリソース**| Microsoft Dynamics へのアクセス |
| **レビュー頻度**| 月 1 回 |
| **レビュー実行者**| Dynamics ビジネス グループのプログラム マネージャー |
| **通知**| レビューの 24 時間前にエイリアス Dynamics-Pms にメールを送信<p>レビュー担当者の確実な対応を促すカスタム メッセージを含める |
| **タイムライン**| 通知から 48 時間 |
|**自動アクション**| セキュリティ グループ dynamics-access からユーザーを削除することにより、90 日以内に対話形式のサインインがないアカウントからアクセスを削除。 <p>*期限内にレビューが行われなかった場合、上記のアクションを実行。* |
| **手動アクション**| レビュー担当者は必要に応じて、自動アクションの前に削除の承認を実行可能。 |
| **通信**| 削除される内部 (メンバー) ユーザーには、削除の理由とアクセス権の復元方法を説明するメールを送信。 |


 

### <a name="automate-actions-based-on-access-reviews"></a>アクセス レビューに基づくアクションの自動化

[結果をリソースに自動適用] オプションを [有効] に設定して、アクセスを自動的に削除することを選択できます。

  ![アクセス レビューの計画](./media/deploy-access-review/3-automate-actions-settings.png)

レビューが完了して終了すると、レビュー担当者に承認されなかったユーザーは自動的にリソースから削除されるか、アクセスを継続できるかのどちらかです。 これは、グループ メンバーシップやアプリケーションの割り当ての削除、または特権ロールに昇格する権利の取り消しを意味する場合があります。

レコメンデーションに従う

レビュー中、レコメンデーションがレビュー担当者に表示され、ユーザーによるテナントへの最終サインインまたはアプリケーションへの最終アクセスを示します。 この情報は、レビュー担当者がアクセスに関して適切な決定を下すのに役立ちます。 [レコメンデーションに従う] を選択すると、アクセス レビューによるレコメンデーションに従います。 レビュー担当者が対応しなかったユーザーには、アクセス レビューの終了時に、これらのレコメンデーションがシステムによって自動的に適用されます。

レコメンデーション内容はアクセス レビューの基準に基づいています。 たとえば、対話形式で 90 日間サインインしていないアクセスを削除するようにレビューを構成している場合、その基準に一致するすべてのユーザーを削除するように推奨されます。 Microsoft では、レコメンデーション内容の改善に継続的に取り組んでいます。 

### <a name="review-guest-user-access"></a>ゲスト ユーザーのアクセスのレビュー

アクセス レビューを使用して、外部組織のコラボレーション パートナーの ID をレビューおよびクリーンアップします。 パートナーごとのレビューを構成して、コンプライアンス要件を満たすことができます。

次のいずれかのアクションによって、企業リソースへのアクセスを外部 ID に許可することができます。

* グループに追加 

* Teams に招待 

* エンタープライズ アプリケーションまたはアクセス パッケージに割り当てる

* Azure AD または Azure サブスクリプションで特権ロールを割り当てる

[サンプル スクリプト](https://github.com/microsoft/access-reviews-samples/tree/master/ExternalIdentityUse)を参照してください。 このスクリプトは、テナントに招待された外部 ID が使用される場所を示します。 外部ユーザーの Azure AD におけるグループ メンバーシップ、ロールの割り当て、アプリケーションの割り当てを確認できます。 このスクリプトにより、SharePoint リソースへの直接の権利割り当て (グループは使用しない) など、Azure AD の外部での割り当てが示されることはありません。

グループまたはアプリケーションのアクセス レビューを作成するとき、レビュー担当者のフォーカスを [アクセス権を持つ全員] または [ゲスト ユーザーのみ] から選択できます。 [ゲスト ユーザーのみ] を選択すると、レビュー担当者には、リソースにアクセスできる Azure AD B2B の外部 ID にフォーカスしたリストが提示されます。

 ![ゲスト ユーザーのレビュー](./media/deploy-access-review/4-review-guest-users-admin-ui.png)

> [!IMPORTANT]
> これには、userType が member の外部メンバーは含まれません。 Azure AD B2B コラボレーションの外部で招待されたユーザー (共有コンテンツに SharePoint 経由で直接アクセスできるユーザーなど) も含まれません。

## <a name="plan-access-reviews-for-access-packages"></a>アクセス パッケージのアクセス レビューの計画

[アクセス パッケージ](entitlement-management-overview.md)は、ガバナンスとアクセス レビューの戦略を大幅に簡素化できます。 アクセス パッケージとは、ユーザーがプロジェクトで作業したりタスクを遂行したりするために必要となるすべてのリソースと、そのアクセス権をバンドルしたものです。 たとえば、組織内の開発者に必要なすべてのアプリケーションや、外部ユーザーがアクセスできる必要があるすべてのアプリケーションを含むアクセス パッケージを作成できます。 その後、管理者または委任されたアクセス パッケージ マネージャーは、リソース (グループまたはアプリ) と、それらのリソースを操作するためにユーザーに必要なロールをグループ化します。

[アクセス パッケージを作成](entitlement-management-access-package-create.md)するときに、ユーザーがアクセス パッケージを要求できる条件、承認プロセスの内容、ユーザーがアクセスを再要求する必要がある頻度を設定する 1 つ以上のアクセス ポリシーを作成できます。 アクセス レビューは、アクセス パッケージ ポリシーの作成または編集中に構成されます。

[ライフサイクル] タブを開き、[アクセス レビュー] まで下にスクロールします。

 ![[ライフサイクル] タブの [ポリシーの編集] を示すスクリーンショット。](./media/deploy-access-review/5-plan-access-packages-admin-ui.png)

## <a name="plan-access-reviews-for-groups"></a>グループのアクセス レビューを計画する

アクセス パッケージに加えて、グループ メンバーシップのレビューは、アクセスを管理する最も効果的な方法です。 リソースへのアクセスは[セキュリティ グループまたは Microsoft 365 グループ](../fundamentals/active-directory-manage-groups.md)を介して割り当てること、およびユーザーをそれらのグループに追加してアクセス権を付与することを推奨します。

1 つのグループに、すべての適切なリソースへのアクセスを許可できます。 グループ アクセスは、個々のリソースに、またはアプリケーションと他のリソースをグループ化するアクセス パッケージに割り当てることができます。 この方法では、各アプリケーションへの個人のアクセスではなくグループへのアクセスをレビューできます。 

グループ メンバーシップは、次の方法でレビューできます。 

* 管理者

* グループ所有者

* 選択されたユーザー、レビュー作成時の委任されたレビュー機能

* グループのメンバー (自己証明)

### <a name="group-ownership"></a>グループ所有権

メンバーシップのレビューは、アクセスが必要なユーザーを最もよく知る立場にあるグループの所有者が行うことを推奨します。 グループの所有権は、グループの種類によって異なります。

Microsoft 365 と Azure AD で作成されたグループには、明確に定義された 1 人以上の所有者がいます。 ほとんどの場合、これらの所有者は、どのユーザーにアクセス権を付与するのが適切であるかを知っているため、グループのレビュー担当者として最適です。 

たとえば、Microsoft Teams では、基になる承認モデルとして Microsoft 365 グループを使用して、SharePoint、Exchange、OneNote、またはその他の Microsoft 365 サービスにあるリソースへのアクセスがユーザーに許可されます。 チームの作成者は自動的に所有者になり、そのグループのメンバーシップを証明する責任を負います。 

Azure AD ポータルで手動で、または Microsoft Graph 経由でスクリプトによって作成されたグループには、所有者が定義されていない場合があります。 Azure AD ポータルでグループの [所有者] セクションから、または Graph から所有者を定義することを推奨します。

オンプレミスの Active Directory から同期されるグループは、Azure AD に所有者を持つことができません。 そのようなグループのアクセス レビューを作成するときは、グループのメンバーシップを判断するのに最適なユーザーを選択する必要があります。

> [!NOTE]
> グループの所有権と、メンバーシップの定期的なレビューの説明責任を明確にするために、グループの作成方法を定義するビジネス ポリシーを定義することを推奨します。 

### <a name="review-membership-of-exclusion-groups-in-conditional-access-policies"></a>条件付きアクセス ポリシーの除外グループのメンバーシップをレビューする 

ネットワークを安全な状態に維持するように設計された条件付きアクセス ポリシーをすべてのユーザーに適用すべきでない場合があります。 たとえば、ユーザーが企業ネットワーク上にいる場合にのみサインインできるようにする条件付きアクセス ポリシーを、出張の多い営業チームに適用することはできません。 その場合は、営業チームのメンバーを別のグループに配置し、そのグループを条件付きアクセス ポリシーから除外します。 

除外するのが妥当でないメンバーが要件から除外される潜在的なリスクがあるため、このようなグループ メンバーシップを定期的にレビューしてください。

[Azure AD アクセス レビューを使用して、条件付きアクセス ポリシーから除外されているユーザーを管理する](conditional-access-exclusion.md)ことができます。

### <a name="review-external-users-group-memberships"></a>外部ユーザーのグループ メンバーシップのレビュー

手動操作とそれに伴うミスの可能性を最小化するために、[動的グループ](../enterprise-users/groups-create-rule.md)を使用し、ユーザーの属性に基づいてグループ メンバーシップを割り当てることを検討してください。 外部ユーザー用に 1 つ以上の動的グループを作成できます。 内部のスポンサーが、グループのメンバーシップのレビュー担当者を務めることができます。 

注:アクセス レビューの結果としてグループから削除された外部ユーザーは、テナントから削除されません。 

手動またはスクリプトによってテナントから削除できます。

### <a name="review-access-to-on-premises-groups"></a>オンプレミス グループへのアクセスのレビュー

アクセス レビューでは、オンプレミスから [Azure AD Connect](../hybrid/whatis-azure-ad-connect.md) と同期するグループのグループ メンバーシップは変更できません。 これは、権限ソースがオンプレミスであるからです。

それでも、アクセス レビューを使用して、オンプレミス グループの定期的なレビューをスケジュールおよび管理することはできます。 その後、レビュー担当者がオンプレミス グループでアクションを実行します。 この戦略では、アクセス レビューはすべてのレビューのためのツールであり続けます。

オンプレミス グループに対するアクセス レビューの結果を用い、次のいずれかの方法で処理を進めることができます。

* アクセス レビューから CSV レポートをダウンロードして、手動でアクションを実行します。

* Microsoft Graph を使用して、完了したアクセス レビューの結果と決定にプログラムからアクセスします。

たとえば、Windows AD で管理されるグループの結果にアクセスするには、この [PowerShell サンプル スクリプト](https://github.com/microsoft/access-reviews-samples/tree/master/AzureADAccessReviewsOnPremises)を使用します。 このスクリプトは、必要な Graph 呼び出しの概要を示し、必要な変更を行うための Windows AD-PowerShell コマンドをエクスポートします。

## <a name="plan-access-reviews-for-applications"></a>アプリケーションのアクセス レビューを計画する 

アプリケーションへのアクセスをレビューするときは、従業員と外部 ID による、アプリケーション内の情報とデータへのアクセスをレビューします。 特定のアプリケーションにアクセスできるユーザーを知る必要がある場合は、アクセス パッケージやグループではなくアプリケーションのレビューを選択します。 

次のシナリオでは、アプリケーションのレビューを計画することを推奨します。

* ユーザーが (グループまたはアクセス パッケージの外部で) アプリケーションへの直接アクセスを許可されている。

* 重要な情報や秘匿性の高い情報をアプリケーションが公開する。

* 証明が必要な特定のコンプライアンス要件がアプリケーションにある。

* 不適切なアクセスが疑われる。

アプリケーションのアクセス レビューを作成するには、[ユーザーの割り当てが必要ですか?] プロパティを [はい] に設定します。 [いいえ] に設定した場合、外部 ID を含むディレクトリ内のすべてのユーザーがアプリケーションにアクセスでき、アプリケーションへのアクセスをレビューできません。 

 ![アプリの割り当てを計画する](./media/deploy-access-review/6-plan-applications-assignment-required.png)

次に、アクセスを許可する[ユーザーとグループを割り当てる](../manage-apps/assign-user-or-group-access-portal.md)必要があります。 

### <a name="reviewers-for-an-application"></a>アプリケーションのレビュー担当者

アクセス レビューは、アプリケーションに割り当てられているグループのメンバーまたはユーザーを対象とすることができます。 Azure AD のアプリケーションには所有者がいるとは限らないため、アプリケーションの所有者をレビュー担当者として選ぶことはできません。 すべてのアクセスをレビューするのではなく、レビューの範囲を絞り込んで、アプリケーションに割り当てられたゲスト ユーザーのみをレビューすることができます。

## <a name="plan-review-of-azure-ad-and-azure-resource-roles"></a>Azure AD と Azure リソースのロールのレビューの計画

[Privileged Identity Management (PIM)](../privileged-identity-management/pim-configure.md) は、企業が Azure AD 内のリソースへの特権アクセスを管理する方法を簡略化します。 これにより、[Azure AD](../roles/permissions-reference.md) と [Azure リソース](../../role-based-access-control/built-in-roles.md)の両方で特権ロールのリストが大幅に縮小され、ディレクトリの全体的なセキュリティが向上します。

アクセス レビューを利用すると、レビュー担当者は、ユーザーが引き続きロールに所属する必要があるかどうかを証明できます。 アクセス パッケージのアクセス レビューと同様に、Azure AD ロールおよび Azure リソースのレビューは PIM の管理者ユーザーの操作に統合されています。 次のロールの割り当てを定期的にレビューすることを推奨します。

* グローバル管理者

* ユーザー管理者

* 特権認証管理者

* 条件付きアクセス管理者

* セキュリティ管理者

* すべての Microsoft 365 と Dynamics のサービス管理ロール

ここで選択するロールには、永続的なロールと資格のあるロールが含まれます。 

[レビュー担当者] セクションで、全ユーザーをレビューする担当者 (複数可) を選びます。 メンバー自身にそのアクセス権をレビューしてもらうことができます。

 ![ポリシーを編集する](./media/deploy-access-review/7-plan-azure-resources-reviewers-selection.png)

## <a name="deploy-access-reviews"></a>アクセス レビューのデプロイ

Azure AD と統合されたリソースのアクセスをレビューする戦略と計画を準備したら、以下のリソースを使用してレビューをデプロイおよび管理します。

### <a name="review-access-packages"></a>アクセス パッケージのレビュー

古くなったアクセスのリスクを軽減するために、管理者は、アクセス パッケージに対するアクティブな割り当てを持つユーザーの定期的なレビューを有効にすることができます。 次のリンクの指示に従います。

| ハウツー記事| 説明 |
| - | - |
| [アクセス レビューの作成](entitlement-management-access-reviews-create.md)| アクセス パッケージのレビューを有効にします。 |
| [アクセス レビューの実行](entitlement-management-access-reviews-review-access.md)| アクセス パッケージに割り当てられている他のユーザーのアクセス レビューを実行します。 |
| [割り当てられたアクセス パッケージを自己レビューする](entitlement-management-access-reviews-self-review.md)| 割り当てられたアクセス パッケージの自己レビュー |


> [!NOTE]
> 自己レビューを行い、アクセスが不要になったと申告したエンド ユーザーは、すぐにアクセス パッケージから削除されるわけではありません。 レビューが終了するか、管理者がレビューを停止すると、アクセス パッケージから削除されます。

### <a name="review-groups-and-apps"></a>グループとアプリのレビュー

従業員やゲストによるグループやアプリケーションへのアクセスのニーズは、時間の経過と共に変化する可能性があります。 アクセスの割り当てが古いことで生じるリスクを軽減するために、管理者は、グループ メンバーまたはアプリケーションのアクセスに対するアクセス レビューを作成することができます。 次のリンクの指示に従います。

| ハウツー記事| 説明 |
| - | - |
| [アクセス レビューの作成](create-access-review.md)| グループ メンバーまたはアプリケーションのアクセスに対して 1 つ以上のアクセス レビューを作成します。 |
| [アクセス レビューの実行](perform-access-review.md)| アプリケーションにアクセスするユーザーまたはグループのメンバーに対するアクセス レビューを実行します。 |
| [アクセスの自己レビュー](review-your-access.md)| グループまたはアプリケーションに対する自身のアクセス権をメンバーがレビューします |
| [アクセス レビューを完了する](complete-access-review.md)| アクセス レビューを表示して結果を適用します |
| [オンプレミスのグループに対してアクションを実行する](https://github.com/microsoft/access-reviews-samples/tree/master/AzureADAccessReviewsOnPremises)| オンプレミス グループのアクセス レビューに対して動作するサンプル PowerShell スクリプト。 |


### <a name="review-azure-ad-roles"></a>Azure AD ロールのレビュー

ロールの割り当てが古いことで生じるリスクを軽減するために、Azure AD の特権ロールのアクセスを定期的にレビューする必要があります。

![Azure AD ロールの [レビューのメンバーシップ] リストを示すスクリーンショット。](./media/deploy-access-review/8-review-azure-ad-roles-picker.png)

以下のリンクの指示に従います。

| ハウツー記事 | 説明 |
| - | - |
 [アクセス レビューの作成](../privileged-identity-management/pim-how-to-start-security-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| PIM で Azure AD の特権ロールのアクセス レビューを作成します |
| [アクセスの自己レビュー](../privileged-identity-management/pim-how-to-perform-security-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| 管理者ロールが割り当てられている場合に、ロールへのアクセスを承認または拒否します |
| [アクセス レビューの完了](../privileged-identity-management/pim-how-to-complete-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| アクセス レビューを表示して結果を適用します |


### <a name="review-azure-resource-roles"></a>Azure リソースのロールのレビュー

ロールの割り当てが古いことで生じるリスクを軽減するために、Azure リソースの特権ロールのアクセスを定期的にレビューする必要があります。 

![azure ad ロールのレビュー](./media/deploy-access-review/9-review-azure-roles-picker.png)

以下のリンクの指示に従います。

| ハウツー記事| 説明 |
| - | -|
| [アクセス レビューの作成](../privileged-identity-management/pim-resource-roles-start-access-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| PIM で Azure リソースの特権ロールのアクセス レビューを作成します |
| [アクセスの自己レビュー](../privileged-identity-management/pim-resource-roles-perform-access-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| 管理者ロールが割り当てられている場合に、ロールへのアクセスを承認または拒否します |
| [アクセス レビューの完了](../privileged-identity-management/pim-resource-roles-complete-access-review.md?toc=%2fazure%2factive-directory%2fgovernance%2ftoc.json)| アクセス レビューを表示して結果を適用します |


## <a name="use-the-access-reviews-api"></a>アクセス レビュー API の使用

レビュー可能なリソースを操作および管理するには、[Graph API のメソッド](/graph/api/resources/accessreviewsv2-root?view=graph-rest-beta&preserve-view=true)および[ロールとアプリケーションのアクセス許可の承認チェック](/graph/api/resources/accessreviewsv2-root?view=graph-rest-beta&preserve-view=true)に関するページを参照してください。 Microsoft Graph API のアクセス レビュー関連のメソッドは、アプリケーションとユーザー両方のコンテキストで使用できます。 アプリケーション コンテキストでスクリプトを実行する場合、API の実行に使用するアカウント (サービス プリンシパル) には、アクセス レビュー情報をクエリするための "AccessReview.Read.All" アクセス許可が付与されている必要があります。

アクセス レビュー用の Graph API を使用して自動化するアクセス レビューのタスクで一般的なものは次のとおりです。

* アクセス レビューの作成と開始

* スケジュールされた終了よりも前にアクセス レビューを手動で終了する

* 実行中のすべてのアクセス レビューとその状態を一覧表示する

* 一連のレビューの履歴と、各レビューで実行された決定およびアクションを確認する

* アクセス レビューから決定を収集する

* 完了したレビューのうち、システムの推奨と異なる決定をレビュー担当者が下したレビューから決定を収集する

自動化のために新しい Graph API クエリを作成するときは、[Graph エクスプローラー](https://developer.microsoft.com/en-us/graph/graph-explorer)を使用することを推奨します。 Graph クエリを作成し、スクリプトやコードに組み込む前に検証することができます。 求めている正確な結果が得られるよう、スクリプトのコードを変更することなくクエリをすばやく反復できます。

## <a name="monitor-access-reviews"></a>アクセス レビューの監視

アクセス レビューのアクティビティは記録され、[Azure AD の監査ログ](../reports-monitoring/concept-audit-logs.md)から確認できます。 カテゴリ、アクティビティの種類、日付範囲で監査データをフィルター処理できます。 サンプル クエリを次に示します。

| カテゴリ| ポリシー |
| - | - |
| アクティビティの種類| アクセス レビューの作成 |
| | アクセス レビューの更新 |
| | 終了したアクセス レビュー |
| | アクセス レビューの削除 |
| | 決定の承認 |
| | 決定の拒否 |
| | 決定のリセット |
| | 決定の適用 |
| 期間| 7 日 |


アクセス レビューのより高度なクエリと分析のために、またレビューの変更と完了を追跡するために、Azure AD 監査ログを [Azure Log Analytics](../reports-monitoring/quickstart-azure-monitor-route-logs-to-storage-account.md) または Azure Event Hub にエクスポートすることを推奨します。 Azure Log Analytics に保存すると、[強力な分析言語](../reports-monitoring/howto-analyze-activity-logs-log-analytics.md)を使用したり、独自のダッシュボードを構築したりできます。

## <a name="next-steps"></a>次のステップ

以下の関連テクノロジについて学びます。

* [Azure AD エンタイトルメント管理とは](entitlement-management-overview.md)

* [Azure AD Privileged Identity Management とは](../privileged-identity-management/pim-configure.md)