---
title: パスワードの動的禁止 - Azure Active Directory
description: Azure AD でのパスワードの動的禁止を使用して環境の脆弱なパスワードを禁止する
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 07/11/2018
ms.author: joflore
author: MicrosoftGuyJFlo
manager: daveba
ms.reviewer: rogoya
ms.collection: M365-identity-device-management
ms.openlocfilehash: c043b2ed1a626e362d7edd1a83429aa14046f8ac
ms.sourcegitcommit: c105ccb7cfae6ee87f50f099a1c035623a2e239b
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/09/2019
ms.locfileid: "67703058"
---
# <a name="eliminate-bad-passwords-in-your-organization"></a>組織内の不適切なパスワードを排除する

業界のリーダーたちは、複数の場所で同じパスワードを使用しないこと、パスワードを複雑にすること、“Password123” のように単純なパスワードにしないことを指示します。 組織は、ユーザーがベスト プラクティスのガイダンスに従うことをどうやって保証できるでしょうか。 ユーザーが脆弱なパスワードやそのバリエーションを使用しないことは、どうすれば徹底できるでしょうか。

より強力なパスワードを持たせるための最初の手順は、ユーザー ガイダンスを提供することです。 このトピックに関する Microsoft の現在のガイダンスについては、次のリンクを参照してください。

[Microsoft のパスワードのガイダンス](https://www.microsoft.com/research/publication/password-guidance)

優れたガイダンスは重要ですが、それがあったとしても、多くのユーザーが最終的に脆弱なパスワードを選択していることがわかっています。 Azure AD のパスワード保護は、既知の脆弱なパスワードやそのバリエーションを検出してブロックするとともに、必要に応じて組織固有の脆弱な用語をブロックすることにより、組織を保護します。

セキュリティに関する最新の取り組みについて詳しくは、「[マイクロソフト セキュリティ インテリジェンス レポート](https://www.microsoft.com/security/operations/security-intelligence-report)」を参照してください。

## <a name="global-banned-password-list"></a>グローバル禁止パスワード リスト

Azure AD Identity Protection チームは、常に Azure AD セキュリティ テレメトリのデータを分析し、一般的に使用される脆弱なパスワードや侵害されたパスワード、すなわち脆弱なパスワードとしてよく使用される脆弱な基本用語を探しています。 このような脆弱な用語が見つかると、グローバル禁止パスワード リストに追加されます。 グローバル禁止パスワード リストの内容は、どの外部データ ソースにも基づいていません。 グローバル禁止パスワード リストは、Azure AD のセキュリティ テレメトリと分析の継続的な結果のみに基づいています。

Azure AD のいずれかのテナントのいずれかのユーザーが新しいパスワードを変更またはリセットする場合、現在のバージョンのグローバル禁止パスワード リストがパスワードの強度を検証する際の主な入力として使用されます。 この検証の結果、Azure AD のすべてのお客様のパスワードがはるかに強力になります。

> [!NOTE]
> サイバー犯罪者も、攻撃の際に同じような戦略を使用します。 そのため、Microsoft はこのリストの内容を一般公開しません。

## <a name="custom-banned-password-list"></a>カスタムの禁止パスワードの一覧

組織によっては、グローバル禁止パスワード リストの上に、Microsoft がカスタムの禁止パスワード リストと呼ぶ独自のカスタマイズを追加することで、さらにセキュリティを改善することもできます。 この一覧に追加する用語は、主に組織固有の用語にすることをお勧めします。次に例を示します。

- ブランド名
- 製品名
- 場所 (たとえば、本社など)
- 会社固有の内部用語
- 会社固有の意味を持つ略語

カスタム禁止パスワード リストに用語を追加すると、パスワードを検証するときにグローバル禁止パスワード リストに追加されます。

> [!NOTE]
> カスタムの禁止パスワードの一覧に含まれる用語は、最大 1000 個に制限されています。 非常に大きなパスワード リストをブロックできるようには設計されていません。 カスタムの禁止パスワードの一覧の利点を十分に活用するためには、新しい用語をカスタム禁止リストに追加する前に、まずパスワード評価アルゴリズム (「[パスワードの評価方法](concept-password-ban-bad.md#how-are-passwords-evaluated)」を参照) を確認し、理解することをお勧めします。 企業がアルゴリズムの動作を理解することで、多数の脆弱なパスワードとそのバリエーションを効率的に検出してブロックできるようになります。

例: ロンドンを拠点とする "Contoso" という名前の顧客が、"Widget" と名前の製品を作っているとします。 このような顧客では、以下のような用語やそのバリエーションをブロックしようとするのは、無駄であるだけでなく安全性も低くなります。

- "Contoso!1"
- "Contoso@London"
- "ContosoWidget"
- "!Contoso"
- "LondonHQ"
- ...など

その代わり、重要な基本用語のみをブロックした方がはるかに効率的もよく、安全です。

- "Contoso"
- "London"
- "Widget"

パスワード検証アルゴリズムは、脆弱なパスワードや上記の組み合わせを自動的にブロックします。

カスタムの禁止パスワード リストとオンプレミス Active Directory 統合を有効にする機能は、Azure portal を使用して管理されます。

![[認証方法] でカスタムの禁止パスワード リストを変更する](./media/concept-password-ban-bad/authentication-methods-password-protection.png)

## <a name="password-spray-attacks-and-third-party-compromised-password-lists"></a>パスワード スプレー攻撃とサード パーティの侵害されたパスワード一覧

Azure AD のパスワード保護の重要な利点の 1 つは、パスワード スプレー攻撃からの保護に役立つことです。 パスワード スプレー攻撃の大半は、どの個別のアカウントにも数回以上は攻撃しません。そのような動作をすると、アカウントのロックアウトやその他の手段によって検知される可能性が大幅に増加するためです。 そのため、ほとんどのパスワード スプレー攻撃では、企業の各アカウントに対して既知の最も弱いパスワードが数回だけ送信されます。 この手法を使用すると、攻撃者は潜在的な検出限界を回避しながら、容易に侵害できるアカウントを短時間で検索できます。

Azure AD のパスワード保護は、パスワード スプレー攻撃で使用される可能性があるすべての既知の脆弱なパスワードを、Azure AD が取得した現実世界のセキュリティ テレメトリ データに基づいて効率的にブロックできるように設計されています。  Microsoft は、数百万ものパスワードが列挙されているサード パーティの Web サイトに注目しています。これらのパスワードは、広く知られている以前のセキュリティ違反によって侵害されたものです。 サード パーティ製のパスワード検証製品では、これら数百万個のパスワードとのブルート フォースによる比較を行うのが一般的です。 Microsoft は、パスワード スプレー攻撃の攻撃者が使用する一般的な戦略を踏まえれば、このような手法はパスワードの強度を向上させる最善の方法ではないと感じています。

> [!NOTE]
> Microsoft のグローバル禁止パスワード リストは、侵害されたパスワードのリストを含め、いかなるサード パーティ製のデータ ソースにも基づいていません。

Microsoft のグローバル禁止リストは一部のサード パーティ製の巨大なリストと比べれば小さめですが、実際のパスワード スプレー攻撃による現実世界のセキュリティ テレメトリに基づいているという事実と、Microsoft のパスワードの検証アルゴリズムはスマートなあいまい一致の手法を使用しているという事実から、セキュリティ効果が増幅されます。 最終的な結果として、特によく使われる脆弱なパスワードを効率的に検出し、企業で使用されることがないようにブロックします。 カスタム禁止パスワード リストに組織に固有の用語を追加するお客様も、同じアルゴリズムを活用できます。

## <a name="on-premises-hybrid-scenarios"></a>オンプレミスのハイブリッド シナリオ

クラウドのみのアカウントを保護することは有用ですが、多くの組織では、オンプレミスの Windows Server Active Directory などのハイブリッド シナリオを維持しています。 オンプレミスの Windows Server Active Directory エージェント用に Azure AD パスワード保護をインストールして、禁止パスワード リストを既存のインフラストラクチャに拡張することができます。 これで、オンプレミスのパスワードを変更、設定、またはリセットするユーザーと管理者は、クラウドのみのユーザーと同じパスワード ポリシーに準拠することが必須になります。

## <a name="how-are-passwords-evaluated"></a>パスワードの評価方法

ユーザーが自分のパスワードを変更またはリセットするたびに、新しいパスワードをグローバルとカスタムの両方の禁止パスワード リスト (後者が構成されている場合) に対して検証することで、その強度と複雑さのチェックされます。

ユーザーのパスワードに禁止パスワードが含まれている場合でも、パスワード全体が十分に強力な場合は、そのパスワードが受け入れられる可能性があります。 新しく構成されたパスワードは、受け入れるべきか拒否すべきかを決定するために、次の手順を踏んで全体的な強度が評価されます。

### <a name="step-1-normalization"></a>手順 1:正規化

新しいパスワードは、まず、正規化プロセスを完了します。 この手法により、少数の禁止パスワードを、脆弱な可能性のある非常に大きいパスワードのセットにマップすることができます。

正規化は、2 つの部分に分かれています。  最初に、すべて大文字の文字が小文字に変更されます。  次に、次の例のように、共通の文字置換が実行されます。  

| 元の文字  | 置換される文字 |
| --- | --- |
| '0'  | 'o' |
| '1'  | 'l' |
| '$'  | 's' |
| '\@'  | 'a' |

例: “blank” というパスワードが禁止されていて、ユーザーがパスワードを "Bl@nK" に変更しようとしているとします。 "Bl@nk" が特に禁止されていないとしても、正規化プロセスによりこのパスワードは、禁止パスワードである "blank" に変換されます。

### <a name="step-2-check-if-password-is-considered-banned"></a>手順 2:パスワードが禁止と見なされるかどうか確認する

#### <a name="fuzzy-matching-behavior"></a>あいまい一致の動作

あいまい一致は、グローバルまたはカスタムのいずれかの禁止パスワード リストにあるパスワードが含まれているかどうかを確認するために、正規化されたパスワードに対して使用されます。 一致プロセスは、編集距離 1 の比較に基づいています。  

例: “abcdef” というパスワードが禁止されていて、ユーザーが自分のパスワードを次のいずれかに変更しようとしているとします。

'abcdeg'     *(最後の文字を 'f' から 'g' に変更)* 'abcdefg'   * (末尾に 'g' を追加)* 'abcde'     * (末尾の 'f' を末尾から削除)*

上のパスワードのそれぞれは、厳密に言えば禁止パスワード "abcdef" に一致しません。 ただし、それぞれの例は禁止されている用語 'abcdef' の編集距離 1 以内にあるため、これらはすべて "abcdef" に一致するものと見なされます。

#### <a name="substring-matching-on-specific-terms"></a>部分文字列の照合 (特定の条件下)

部分文字列の照合は、正規化されたパスワードに対して、ユーザーの氏名とテナント名を確認するために使用されます (テナント名の照合は、Active Directory ドメイン コントローラー上でパスワードを検証する場合は行われないことに注意してください)。

例: Pol というユーザーが、自分のパスワードを "P0l123fb" にリセットしようとしているとします。 正規化後、このパスワードは "pol123fb" になります。 部分文字列の照合により、このパスワードにはユーザーの名前 "Pol" が含まれることがわかります。 "P0l123fb" は厳密にはどちらの禁止パスワード リストにも含まれていませんが、部分文字列の照合ではパスワード内に "Pol" が見つかりました。 そのため、このパスワードは拒否されます。

#### <a name="score-calculation"></a>スコアの計算

次の手順では、ユーザーの正規化された新しいパスワード内の、禁止されたパスワードのすべてのインスタンスを特定します。 その後、以下を実行します。

1. ユーザーのパスワードに含まれる各禁止パスワードには、1 ポイントが与えられます。
2. 残りの一意の各文字には、1 ポイントが与えられます。
3. パスワードが受け入れられるには、少なくとも 5 ポイント必要です。

次の 2 つの例では、Contoso が Azure AD のパスワード保護を使用していて、カスタム リストに "contoso" が含まれていると仮定します。 また、”blank" がグローバル リストに含まれていることも仮定します。

例: ユーザーが自分のパスワードを “C0ntos0Blank12” に変更します

正規化後、このパスワードは “contosoblank12” になります。 照合プロセスにより、このパスワードには contoso と blank という 2 つの禁止パスワードが含まれていることがわかります。 このパスワードには以下のスコアが与えられます。

[contoso] + [blank] + [1] + [2] = 4 ポイント。このパスワードは 5 ポイント未満のため、拒否されます。

例: ユーザーが自分のパスワードを “ContoS0Bl@nkf9” に変更します。

正規化後、このパスワードは “contosoblankf9!” になります。 照合プロセスにより、このパスワードには contoso と blank という 2 つの禁止パスワードが含まれていることがわかります。 このパスワードには以下のスコアが与えられます。

[contoso] + [blank] + [f] + [9] + [!] = 5 ポイント。このパスワードは 5 ポイント以上であるため、受け入れられます。

   > [!IMPORTANT]
   > 禁止パスワード アルゴリズムとグローバル リストは、継続的なセキュリティ分析および調査に基づいて Azure でいつでも変更できることに注意してください。 オンプレミスの DC エージェント サービスの場合、更新されたアルゴリズムは DC エージェント ソフトウェアが再インストールされた後でのみ有効になります。

## <a name="license-requirements"></a>ライセンスの要件

|   | グローバル禁止パスワード リストを使用した Azure AD パスワードの保護 | カスタム禁止パスワード リストを使用した Azure AD パスワードの保護|
| --- | --- | --- |
| クラウド専用ユーザー | Azure AD Free | Azure AD Premium P1 または P2 |
| オンプレミスの Windows Server Active Directory から同期されたユーザー | Azure AD Premium P1 または P2 | Azure AD Premium P1 または P2 |

> [!NOTE]
> Azure Active Directory に同期されていないオンプレミスの Windows Server Active Directory ユーザーも、同期されたユーザーに対する既存のライセンスに基づく Azure AD のパスワード保護の利点を利用します。

追加のライセンス情報 (コストを含む) については、「[Azure Active Directory の価格](https://azure.microsoft.com/pricing/details/active-directory/)」を参照してください。

## <a name="what-do-users-see"></a>ユーザーに表示される画面

ユーザーがパスワードを禁止されるパスワードにリセットしようとすると、次のエラー メッセージが表示されます。

残念ながら、パスワードを簡単に推測できる単語、語句、またはパターンが含まれています。 別のパスワードで再実行してください。

## <a name="next-steps"></a>次の手順

- [カスタムの禁止パスワード リストを構成する](howto-password-ban-bad.md)
- [オンプレミスで Azure AD パスワード保護エージェントを有効にする](howto-password-ban-bad-on-premises-deploy.md)
