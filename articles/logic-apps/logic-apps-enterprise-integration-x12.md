---
title: B2B 統合用の X12 メッセージ
description: Azure Logic Apps と Enterprise Integration Pack で B2B エンタープライズ統合用の EDI 形式の X12 メッセージを交換する
services: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, logicappspm
ms.topic: article
ms.date: 01/31/2017
ms.openlocfilehash: 77ec5434b83c4246dc448578dcf2902e19f42e95
ms.sourcegitcommit: 76b48a22257a2244024f05eb9fe8aa6182daf7e2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/03/2019
ms.locfileid: "74792322"
---
# <a name="exchange-x12-messages-for-b2b-enterprise-integration-in-azure-logic-apps-with-enterprise-integration-pack"></a>Azure Logic Apps と Enterprise Integration Pack で B2B エンタープライズ統合用の X12 メッセージを交換する

Azure Logic Apps の X12 メッセージを交換する前に、X12 契約を作成し、その契約を統合アカウントに格納する必要があります。 X12 契約を作成する手順を次に示します。

> [!NOTE]
> このページでは、Azure Logic Apps が備えている X12 の機能について説明します。 詳細については、[EDIFACT](logic-apps-enterprise-integration-edifact.md) に関する記事を参照してください。

## <a name="before-you-start"></a>開始する前に

必要な項目を次に示します。

* 既に定義され、Azure サブスクリプションに関連付けられている[統合アカウント](logic-apps-enterprise-integration-create-integration-account.md)
* 統合アカウントで定義され、**ビジネス ID** の X12 修飾子を使用して構成されている 2 つ以上の[パートナー](../logic-apps/logic-apps-enterprise-integration-partners.md)    
* 統合アカウントにアップロードできる必要な[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)

[統合アカウントを作成](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md)し、[パートナーを追加](logic-apps-enterprise-integration-partners.md)して、使用する[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を設定した後に、X12 契約を作成するには、次の手順に従います。

## <a name="create-an-x12-agreement"></a>X12 契約の作成

1. [Azure Portal](https://portal.azure.com "Azure ポータル") にサインインします。 

2. Azure のメイン メニューで、 **[すべてのサービス]** を選びます。 
   検索ボックスに「統合」と入力し、"**統合アカウント**" を選びます。  

   ![統合アカウントの検索](./media/logic-apps-enterprise-integration-x12/account-1.png)

   > [!TIP]
   > **[すべてのサービス]** が表示されない場合は、メニューを最初に展開する必要があります。 折りたたまれたメニューの上部にある **[メニューの表示]** を選択します。

3. **[統合アカウント]** で、契約を追加する統合アカウントを選びます。

   ![契約を作成する統合アカウントの選択](./media/logic-apps-enterprise-integration-x12/account-3.png)

4. **[概要]** 、 **[契約]** タイルの順に選択します。 
   [契約] タイルが表示されない場合は、まずタイルを追加します。 

   ![[契約] タイルの選択](./media/logic-apps-enterprise-integration-x12/agreement-1.png)

5. **[契約]** で **[追加]** を選びます。

   ![[追加] の選択](./media/logic-apps-enterprise-integration-x12/agreement-2.png)     

6. **[追加]** で、契約の**名前**を入力します。 
   [契約タイプ] で、 **[X12]** を選択します。 
   契約の**ホスト パートナー**、**ホスト ID**、**ゲスト パートナー**、および**ゲスト ID** を選択します。 
   プロパティの詳細については、この手順の表を参照してください。

    ![契約の詳細の指定](./media/logic-apps-enterprise-integration-x12/x12-1.png)  

    | プロパティ | Description |
    | --- | --- |
    | 名前 |契約の名前。 |
    | 契約の種類 | X12 にする必要があります。 |
    | ホスト パートナー |契約には、ホストとゲストの両方のパートナーが必要です。 ホスト パートナーは、契約を構成している組織を表します。 |
    | ホスト ID |ホスト パートナーの ID。 |
    | Guest Partner (ゲスト パートナー) |契約には、ホストとゲストの両方のパートナーが必要です。 ゲスト パートナーは、ホスト パートナーと取引している組織を表します。 |
    | ゲスト ID |ゲスト パートナーの ID。 |
    | 受信設定 |これらのプロパティは、契約によって受信されたすべてのメッセージに適用されます。 |
    | Send Settings (送信の設定) |これらのプロパティは、契約によって送信されたすべてのメッセージに適用されます。 |  

   > [!NOTE]
   > X12 契約では、パートナーと受信メッセージに定義された、送信者の修飾子/識別子と受信者の修飾子/識別子が一致している必要があります。 パートナー側でこれらの値を変更した場合は、契約も更新します。

## <a name="configure-how-your-agreement-handles-received-messages"></a>契約で受信したメッセージを処理する方法の構成

契約のプロパティを設定したので、この契約でパートナーから受信した受信メッセージを識別して処理する方法を構成できます。

1.  **[追加]** で、 **[受信設定]** をクリックします。
メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 プロパティの説明については、このセクションの表を参照してください。

    **[受信設定]** は次のセクションに分かれています。[識別子]、[受信確認]、[スキーマ]、[エンベロープ]、[制御番号]、[検証]、[内部設定]。

2. 完了したら、 **[OK]** を選択して、必ず設定を保存します。

これで選択した設定に準拠する受信メッセージを処理する準備ができました。

### <a name="identifiers"></a>識別子

![識別子プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

| プロパティ | 説明 |
| --- | --- |
| ISA1 (Authorization Qualifier) (ISA1 (認証修飾子)) |ドロップダウン リストから認証修飾子値を選択します。 |
| ISA2 |省略可能。 認証情報値を入力します。 ISA1 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |
| ISA3 (Security Qualifier) (ISA3 (セキュリティ修飾子)) |ドロップダウン リストからセキュリティ修飾子値を選択します。 |
| ISA4 |省略可能。 セキュリティ情報値を入力します。 ISA3 に入力された値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |

### <a name="acknowledgment"></a>Acknowledgement (受信確認)

![受信確認プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-3.png) 

| プロパティ | 説明 |
| --- | --- |
| TA1 が必要 |インターチェンジの送信者に技術確認を返します。 |
| FA Expected (FA が必要) |インターチェンジの送信者に機能確認を返します。 次に、スキーマのバージョンに基づいて、997 か 999 の受信確認のいずれかを選択します。 |
| Include AK2/IK2 Loop (AK2/IK2 ループを含める) |受理されたトランザクション セットの機能確認で AK2 ループの生成を有効にします。 |

### <a name="schemas"></a>スキーマ

各トランザクション タイプ (ST1) および送信側アプリケーション (GS2) のスキーマを選択します。 受信パイプラインは、受信メッセージの ST1 と GS2 の値とここで設定した値、および受信メッセージのスキーマとここで設定したスキーマと照合することで受信メッセージを逆アセンブルします。

![スキーマの選択](./media/logic-apps-enterprise-integration-x12/x12-33.png) 

| プロパティ | 説明 |
| --- | --- |
| Version |X12 のバージョンを選択します |
| トランザクションの種類 (ST01) |トランザクションの種類を選択します |
| Sender Application (GS02) (送信側アプリケーション (GS02)) |送信側のアプリケーションを選択します |
| スキーマ |使用するスキーマ ファイルを選択します。 スキーマは統合アカウントに追加されます。 |

> [!NOTE]
> [統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)にアップロードする必要な[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を構成します。

### <a name="envelopes"></a>エンベロープ

![トランザクション セットの区切り記号の指定 ([標準識別子] または [繰り返し区切り記号] の選択)](./media/logic-apps-enterprise-integration-x12/x12-34.png)

| プロパティ | 説明 |
| --- | --- |
| ISA11 の使用法 |トランザクション セットで使用する区切り記号を指定します。 <p>EDI 受信パイプラインの受信ドキュメントの 10 進数表記の代わりにピリオド (.) を 10 進数表記に使用するには、 **[標準識別子]** を選択します。 <p>繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、 **[繰り返し区切り記号]** を選択します。 たとえば、繰り返し区切り記号としては通常、キャレット (^) が使用されます。 HIPAA スキーマに対しては、キャレットのみ使用できます。 |

### <a name="control-numbers"></a>制御番号

![制御番号の重複を処理する方法を選択します](./media/logic-apps-enterprise-integration-x12/x12-35.png) 

| プロパティ | 説明 |
| --- | --- |
| Disallow Interchange control number duplicates (インターチェンジ制御番号の重複を許可しない) |重複したインターチェンジを防止します。 受信したインターチェンジ制御番号がインターチェンジ制御番号 (ISA13) と一致していないかどうかをチェックします。 一致が検出された場合、受信パイプラインはインターチェンジを処理しません。 *[ISA13 の重複の確認間隔 (日単位)]* に値を指定して、チェックを実行する間隔の日数を指定できます。 |
| Disallow Group control number duplicates (グループ制御番号の重複を許可しない) |グループ制御番号が重複したインターチェンジを防止します。 |
| Disallow Transaction set control number duplicates (トランザクション セット制御番号の重複を許可しない) |トランザクション セット制御番号が重複したインターチェンジを防止します。 |

### <a name="validations"></a>Validations (検証)

![受信したメッセージの検証プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-36.png) 

検証対象の行が 1 つ完了するたびに別の行が自動的に追加されます。 ルールを指定しない場合、検証では "既定" の行を使用します。

| プロパティ | 説明 |
| --- | --- |
| メッセージの種類 |EDI メッセージの種類を選択します。 |
| EDI Validation (EDI の検証) |スキーマの EDI プロパティ、長さ制限、空のデータ要素、および末尾の区切り記号で定義されたデータ型で EDI 検証を実行します。 |
| 拡張された検証 |データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。 |
| Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可) |先頭または末尾のゼロと空白文字をすべて保持します。 これらの文字を削除しません。 |
| 先頭および末尾のゼロをトリミングする |先頭または末尾のゼロと空白文字を削除します。 |
| 末尾の区切り記号のポリシー |末尾の区切り記号を生成します。 <p>受信したインターチェンジに末尾の区切り記号や区切り文字が含まれないようにする場合は、 **[許可しない]** を選択します。 インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、インターチェンジは無効と宣言されます。 <p>末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを受け入れる場合は、 **[オプション]** を選択します。 <p>インターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、 **[必須]** を選択します。 |

### <a name="internal-settings"></a>Internal Settings (内部設定)

![内部設定の選択](./media/logic-apps-enterprise-integration-x12/x12-37.png) 

| プロパティ | 説明 |
| --- | --- |
| 暗黙的に指定された 10 進形式 Nn を 底 10 の数値に変換する |形式 "Nn" で指定されている EDI 番号を底 10 の数値に変換します。 |
| 末尾の区切り記号が許可されている場合は空の XML タグを作成する |インターチェンジの送信者が末尾の区切り記号に空の XML タグを含めるには、このチェック ボックスをオンにします。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にトランザクション セットを中断|トランザクション セットに適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 検証に失敗したトランザクションのみを中断します。 |
| インターチェンジをトランザクション セットとして分割 - エラー発生時にインターチェンジを中断|適切なエンベロープを適用することで、インターチェンジの各トランザクション セットを個別の XML ドキュメントで解析します。 インターチェンジの 1 つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 | 
| インターチェンジの保存 - エラー発生時にトランザクション セットを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。 検証に失敗したトランザクション セットだけを中断し、他のすべてのトランザクション セットの処理を継続します。 |
| インターチェンジの保存 - エラー発生時にインターチェンジを中断 |インターチェンジはそのままにして、バッチ インターチェンジ全体に対する XML ドキュメントを作成します。 インターチェンジの 1 つ以上のトランザクション セットが検証に失敗した場合、インターチェンジ全体を中断します。 |

## <a name="configure-how-your-agreement-sends-messages"></a>契約でメッセージを送信する方法の構成

この契約でパートナーに送信する送信メッセージを識別して処理する方法を構成できます。

1.  **[追加]** で、 **[送信設定]** をクリックします。
メッセージを交換するパートナーとの契約に基づいて、これらのプロパティを構成します。 プロパティの説明については、このセクションの表を参照してください。

    **[送信設定]** は次のセクションに分かれています。[識別子]、[受信確認]、[スキーマ]、[エンベロープ]、[文字セットと区切り記号]、[制御番号]、[検証]。

2. 完了したら、 **[OK]** を選択して、必ず設定を保存します。

これで選択した設定に準拠する送信メッセージを処理する準備ができました。

### <a name="identifiers"></a>識別子

![識別子プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

| プロパティ | 説明 |
| --- | --- |
| 認証修飾子 (ISA1) |ドロップダウン リストから認証修飾子値を選択します。 |
| ISA2 |認証情報値を入力します。 この値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |
| セキュリティ修飾子 (ISA3) |ドロップダウン リストからセキュリティ修飾子値を選択します。 |
| ISA4 |セキュリティ情報値を入力します。 値 (ISA4) テキスト ボックスのこの値が 00 以外の場合は、英数字を 1 文字以上最大 10 文字で入力します。 |

### <a name="acknowledgment"></a>Acknowledgement (受信確認)

![受信確認プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| プロパティ | 説明 |
| --- | --- |
| TA1 が必要 |インターチェンジの送信者に技術確認 (TA1) を返します。 この設定は、メッセージを送信しているホスト パートナーが契約でゲスト パートナーからの受信確認を要求していることを指定します。 これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。 |
| FA Expected (FA が必要) |インターチェンジの送信者に機能確認 (FA) を返します。 使用しているスキーマのバージョンに基づいて、997 または 999 の受信確認のいずれかを選択します。 これらの受信確認は、契約の [受信の設定] に基づいてホスト パートナーから求められます。 |
| FA Version (FA のバージョン) |FA のバージョンを選択します |

### <a name="schemas"></a>スキーマ

![使用するスキーマの選択](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| プロパティ | 説明 |
| --- | --- |
| Version |X12 のバージョンを選択します |
| トランザクションの種類 (ST01) |トランザクションの種類を選択します |
| スキーマ |使用するスキーマを選択します。 スキーマは統合アカウント内にあります。 先にスキーマを選択すると、バージョンとトランザクションの種類が自動的に構成されます。  |

> [!NOTE]
> [統合アカウント](../logic-apps/logic-apps-enterprise-integration-accounts.md)にアップロードする必要な[スキーマ](../logic-apps/logic-apps-enterprise-integration-schemas.md)を構成します。

### <a name="envelopes"></a>エンベロープ

![トランザクション セットの区切り記号の指定 ([標準識別子] または [繰り返し区切り記号] の選択)](./media/logic-apps-enterprise-integration-x12/x12-6.png) 

| プロパティ | 説明 |
| --- | --- |
| ISA11 の使用法 |トランザクション セットで使用する区切り記号を指定します。 <p>EDI 受信パイプラインの受信ドキュメントの 10 進数表記の代わりにピリオド (.) を 10 進数表記に使用するには、 **[標準識別子]** を選択します。 <p>繰り返し出現する単純なデータ要素または繰り返されるデータ構造体の区切り記号を指定するには、 **[繰り返し区切り記号]** を選択します。 たとえば、繰り返し区切り記号としては通常、キャレット (^) が使用されます。 HIPAA スキーマに対しては、キャレットのみ使用できます。 |

### <a name="control-numbers"></a>制御番号

![制御番号のプロパティの指定](./media/logic-apps-enterprise-integration-x12/x12-8.png) 

| プロパティ | 説明 |
| --- | --- |
| 制御バージョン番号 (ISA12) |X12 標準のバージョンを選択します。 |
| 使用状況インジケーター (ISA15) |インターチェンジのコンテキストを選択します。  情報、実稼働データ、またはテスト データから選択します。 |
| スキーマ |送信パイプラインに送信する X12 でエンコードされたインターチェンジの GS および ST セグメントを生成します。 |
| GS1 |省略可能。機能コードの値をドロップダウン リストから選択します。 |
| GS2 |省略可能。アプリケーションの送信者です。 |
| GS3 |省略可能。アプリケーションの受信者です。 |
| GS4 |省略可能。CCYYMMDD または YYMMDD を選択します。 |
| GS5 |省略可能。HHMM、HHMMSS、または HHMMSSdd を選択します。 |
| GS7 |省略可能。担当機関の値をドロップダウン リストから選択します。 |
| GS8 |省略可能。ドキュメントのバージョンです。 |
| インターチェンジ制御番号 (ISA13) |必須。インターチェンジ制御番号の値の範囲を入力します。 1 ～ 999999999 の数値を入力します。 |
| グループ制御番号 (GS06) |必須。グループ制御番号の値の範囲を入力します。 1 ～ 999999999 の数値を入力します。 |
| トランザクション セット制御番号 (ST02) |必須。トランザクション セット制御番号の値の範囲を入力します。 1 ～ 999999999 の数値の範囲を入力します。 |
| Prefix (プレフィックス) |省略可能。受信確認で使用するトランザクション セット制御番号の範囲を指定します。 中間の 2 つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。 中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。 |
| サフィックス |省略可能。受信確認で使用するトランザクション セット制御番号の範囲を指定します。 中間の 2 つのフィールドに数値を、プレフィックスとサフィックスのフィールドに英数字値 (必要な場合) を入力します。 中間のフィールドは必須であり、制御番号の最小値と最大値が含まれます。 |

### <a name="character-sets-and-separators"></a>Character Sets and Separators (文字セットと区切り文字)

各メッセージ タイプの文字セットや、異なるセットの区切り文字を入力できます。 特定のメッセージ スキーマで文字セットが指定されていない場合は、既定の文字セットが使用されます。

![メッセージの種類の区切り記号の指定](./media/logic-apps-enterprise-integration-x12/x12-9.png) 

| プロパティ | 説明 |
| --- | --- |
| 使用する文字セット |プロパティを検証するための X12 文字セットを選択します。 [基本]、[拡張]、[UTF8] から選択します。 |
| スキーマ |ドロップダウン リストから [スキーマ] を選択します。 行が 1 つ完了するたびに新しい行が自動的に追加されます。 選択したスキーマに対して、次の区切り記号の説明に基づいて、使用する区切り記号のセットを選択します。 |
| 入力タイプ |ドロップダウン リストから入力タイプを選択します。 |
| Component Separator |複合データ要素を区切る単一の文字を入力します。 |
| Data Element Separator |複合データ要素内の単純データ要素を区切る単一の文字を入力します。 |
| Replacement Character |X12 送信メッセージが生成されるときに、ペイロード データ内のすべての区切り文字を置換する文字を入力します。 |
| Segment Terminator |EDI セグメントの終端を示す単一の文字を入力します。 |
| サフィックス |セグメント識別子と共に使用される文字を選択します。 サフィックスを指定する場合は、セグメント終端記号のデータ要素が空でもかまいません。 セグメント終端記号を空にする場合は、サフィックスを指定する必要があります。 |

> [!TIP]
> 特殊文字の値を指定するには、契約を JSON として編集し、特殊文字の ASCII 値を指定します。

### <a name="validation"></a>検証

![送信するメッセージの検証プロパティの設定](./media/logic-apps-enterprise-integration-x12/x12-10.png) 

検証対象の行が 1 つ完了するたびに別の行が自動的に追加されます。 ルールを指定しない場合、検証では "既定" の行を使用します。

| プロパティ | 説明 |
| --- | --- |
| メッセージの種類 |EDI メッセージの種類を選択します。 |
| EDI Validation (EDI の検証) |スキーマの EDI プロパティ、長さ制限、空のデータ要素、および末尾の区切り記号で定義されたデータ型で EDI 検証を実行します。 |
| 拡張された検証 |データ型が EDI でない場合は、検証はデータ要素の要件と許可された繰り返し、列挙、およびデータ要素の長さの検証 (最小/最大) で実行されます。 |
| Allow Leading/Trailing Zeroes (先頭および末尾のゼロを許可) |先頭または末尾のゼロと空白文字をすべて保持します。 これらの文字を削除しません。 |
| 先頭および末尾のゼロをトリミングする |先頭または末尾のゼロの文字を削除します。 |
| 末尾の区切り記号のポリシー |末尾の区切り記号を生成します。 <p>送信したインターチェンジに末尾の区切り記号や区切り文字が含まれないようにする場合は、 **[許可しない]** を選択します。 インターチェンジに末尾の区切り記号や区切り文字が含まれている場合、インターチェンジは無効と宣言されます。 <p>末尾の区切り記号や区切り文字の有無に関係なくインターチェンジを送信する場合は、 **[オプション]** を選択します。 <p>送信したインターチェンジに末尾の区切り記号や区切り文字が含まれている必要がある場合は、 **[必須]** を選択します。 |

## <a name="find-your-created-agreement"></a>作成された契約の検索

1.  契約のプロパティをすべて設定した後、 **[追加]** ページで **[OK]** を選んで契約の作成を終了し、統合アカウントに戻ります。

    これで、新しく追加した契約が **[契約]** リストに表示されます。

2.  また、統合アカウントの概要で、契約を表示することもできます。 統合アカウント メニューで、 **[概要]** 、 **[契約]** タイルの順に選びます。

    ![[契約] タイルの選択](./media/logic-apps-enterprise-integration-x12/x12-1-5.png)   

## <a name="view-the-swagger"></a>Swagger の表示
[Swagger の詳細](/connectors/x12/)を参照してください。 

## <a name="learn-more"></a>詳細情報
* [Enterprise Integration Pack についての詳細情報](../logic-apps/logic-apps-enterprise-integration-overview.md "Enterprise Integration Pack について学習する")  

