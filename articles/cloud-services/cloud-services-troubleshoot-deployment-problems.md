<properties
 pageTitle="クラウド サービスのデプロイに関する問題のトラブルシューティング | Microsoft Azure"
 description="クラウド サービスを Azure にデプロイするときに発生しやすい問題がいくつか存在します。この記事では、その解決方法について説明しています。"
   services="cloud-services"
   documentationCenter=""
   authors="dalechen"
   manager="msmets"
   editor=""
   tags="top-support-issue"/>
<tags
   ms.service="cloud-services"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="tbd"
   ms.date="01/07/2016"
   ms.author="daleche" />

# クラウド サービスのデプロイ中に発生する可能性のある問題をトラブルシューティングする方法

クラウド サービス アプリケーション パッケージを Azure にデプロイするとき、デプロイメントに関する情報は、Azure ポータルの **[プロパティ]** ウィンドウで確認できます。クラウド サービスに関する問題は、このウィンドウの情報を頼りにトラブルシューティングすることができます。新規にサポート リクエストを行う際も、この情報を Azure サポートに提供してください。

**[プロパティ]** ウィンドウを表示する方法は次のとおりです。

* Azure ポータル: クラウド サービスのデプロイをクリックして、**[すべての設定]**、**[プロパティ]** の順にクリックします。
* Azure クラシック ポータル: クラウド サービスのデプロイをクリックし、**[ダッシュボード]** をクリックしてページの右下隅 (**[概要]** の下) に移動します。このウィンドウには "プロパティ" というテキストが表示されないことに注意してください。

> [AZURE.NOTE][プロパティ] ウィンドウの内容は、ウィンドウの右上隅にあるアイコンをクリックしてクリップボードにコピーできます。

## Azure カスタマー サポートへの問い合わせ

この記事についてさらにヘルプが必要な場合は、いつでも [MSDN の Azure フォーラムとスタック オーバーフロー フォーラム](http://azure.microsoft.com/support/forums/)で Azure エキスパートに問い合わせることができます。

または、Azure サポート インシデントを送信できます。その場合は、[Azure サポートのサイト](http://azure.microsoft.com/support/options/)に移動して、**[サポートの要求]** をクリックします。Azure サポートの使用方法の詳細については、「[Microsoft Azure サポートに関する FAQ](http://azure.microsoft.com/support/faq/)」を参照してください。



## 問題: デプロイは起動しており、すべてのロール インスタンスの準備が整っているにもかかわらず、Web サイトにアクセスできない

ポータルに表示される [Web サイトの URL] リンクにポートが含まれていません。Web サイトの既定のポートは 80 です。ただし、それ以外のポートでアプリケーションが構成されている場合は、Web サイトへのアクセス時に、正しいポート番号を URL に追加する必要があります。

1. Azure ポータルで、ご使用のクラウド サービスのデプロイメントをクリックします。
2. Azure ポータルの **[プロパティ]** ウィンドウ ([入力エンドポイント]) で、ロール インスタンスのポートを確認します。
3. ポート番号が *80* 以外であった場合、アプリケーションにアクセスするときに、正しいポート値を URL に追加してください。既定以外のポートを指定するには、URL に続けてコロン (:) を入力し、スペースなしでポート番号を入力します。

## 問題: ロール インスタンスが勝手に再起動する

問題のあるノードを Azure が検出し、ロール インスタンスを新しいノードに移すと、サービス復旧機能が自動的に作動します。このとき、ロール インスタンスが自動的に再起動しているように見えます。サービス復旧機能が作動したかどうかは、次の手順で確認できます。

1. Azure ポータルで、ご使用のクラウド サービスのデプロイメントをクリックします。
2. ロールの再起動が観測された時間帯にサービス復旧機能が作動したかどうかを、Azure ポータルの **[プロパティ]** ウィンドウの情報を見て調べます。

ロールは、およそ月一回、ホスト OS とゲスト OS のアップグレード時に再起動されます。詳細については、[OS のアップグレードに伴うロール インスタンスの再起動](http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx)に関するブログ記事を参照してください。

## 問題: VIP スワップを実行できずエラーが発生する

デプロイの更新処理が行われている場合、VIP スワップが許可されません。デプロイの更新処理は、次の状況で自動的に実行されます。

* 新しいゲスト オペレーティング システムが公開された場合で、かつ自動更新を構成している場合
* サービス復旧機能が作動した場合

VIP スワップを妨げている原因が自動アップグレードであることを確認するには:

1. Azure ポータルで、ご使用のクラウド サービスのデプロイメントをクリックします。
2. Azure ポータルの **[プロパティ]** ウィンドウで、**[ステータス]** の値を確認します。**[準備完了]** になっている場合は **[最終処理]** を見て、VIP スワップを妨げる可能性のある処理が最近実行されていないか確認します。
3. 運用環境のデプロイに対して手順 1. と手順 2. を繰り返します。
4. 自動更新が進行中である場合は、その完了を待って、VIP スワップを試みてください。

## 問題: ロール インスタンスの状態が [開始済み]、[初期化しています]、[ビジー]、[停止] と絶えず変化する

この症状が見られた場合、アプリケーションのコード、パッケージ、構成ファイルに問題がある可能性があります。該当する場合、数分おきに [状態] が変化し、Azure ポータルには、**[リサイクル中]**、**[ビジー]**、**[初期化しています]** などのメッセージが表示される場合があります。これは、ロール インスタンスの実行を妨げる問題がアプリケーションに生じていることを示します。

この問題をトラブルシューティングする方法の詳細については、ブログ記事を参照してください。[Azure PaaS コンピューティング診断データ]に関するブログ記事と「[ロールのリサイクルを引き起こす一般的な問題](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md)」を参照してください。

## 問題: アプリケーションの動作しなくなった

1. Azure ポータルで、ロール インスタンスをクリックします。
2. Azure ポータルの **[プロパティ]** ウィンドウで次の状況を考慮しながら、問題を解決します。
   * ロール インスタンスが最近停止した場合 (**[中止の数]** の値を確認)、デプロイが更新中である可能性があります。しばらく待って、ロール インスタンスの機能が自然に再開するかどうかを確認してください。
   * ロール インスタンスが [ビジー] 状態である場合、アプリケーション コードを見て、[StatusCheck](https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck) イベントを処理しているかどうかを確認します。場合によっては、このイベントを処理するコードを追加するか、コードに修正を加える必要があります。
   * [Azure PaaS コンピューティング診断データ]に関するブログ記事で、診断データとトラブルシューティングのシナリオを参照してください。

>[AZURE.WARNING]クラウド サービスを再起動した場合、デプロイのプロパティはリセットされ、元の問題に関する情報は事実上失われます。

## 次のステップ

クラウド サービスの他の[トラブルシューティングに関する記事](..\?tag=top-support-issue&service=cloud-services)を参照します。


[Azure PaaS コンピューティング診断データ]: http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx

<!---HONumber=AcomDC_0107_2016-->