---
title: ブループリントのライフサイクルの概要
description: ブループリントの更新と削除を含む、ブループリント定義のライフサイクルの順番と各ステージの詳細について説明します。
ms.date: 05/06/2020
ms.topic: conceptual
ms.openlocfilehash: dc024c0e6643420d26bdc92e47fabe647c55ae7b
ms.sourcegitcommit: 602e6db62069d568a91981a1117244ffd757f1c2
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/06/2020
ms.locfileid: "82864030"
---
# <a name="understand-the-lifecycle-of-an-azure-blueprint"></a>Azure Blueprint のライフサイクルの概要

Azure 内の多くのリソースと同じように、Azure Blueprint のブループリントにも一般的で自然なライフサイクルがあります。 ブループリントは、作成され、展開されて、必要性や関連性がなくなったら最終的に削除されます。 Azure Blueprints は、標準的なライフサイクル操作をサポートしています。 これに基づいて、DevOps の主要な要素であるコードとしてのインフラストラクチャを管理する組織に、一般的な継続的インテグレーションと継続的デプロイ パイプラインをサポートする追加の状態レベルが提供されます。

ブループリントとステージを完全に理解できるように、標準的なライフサイクルについて説明します。

> [!div class="checklist"]
> - ブループリントの作成と編集
> - ブループリントの発行
> - 新しいバージョンのブループリントの作成と編集
> - 新しいバージョンのブループリントの発行
> - 特定のバージョンのブループリントの削除
> - ブループリントの削除

## <a name="creating-and-editing-a-blueprint"></a>ブループリントの作成と編集

ブループリントを作成するときは、成果物を追加し、管理グループまたはサブスクリプションに保存し、一意の名前と一意のバージョンを指定します。 この時点で、ブループリントは**ドラフト** モードであり、まだ割り当てることはできません。 **ドラフト** モードの間でも、更新と変更を続けることはできます。

発行されていない**ドラフト** モードのブループリントには、 **[ブループリントの定義]** ページで、**発行済み**のブループリントとは異なるアイコンが表示されます。 これらの未発行ブループリントについては、 **[最新バージョン]** に **[ドラフト]** と表示されます。

ブループリントを作成および編集するには、[Azure portal](../create-blueprint-portal.md#create-a-blueprint) または [REST API](../create-blueprint-rest-api.md#create-a-blueprint) を使用します。

## <a name="publishing-a-blueprint"></a>ブループリントの発行

**ドラフト** モードのブループリントに対して計画された変更をすべて行った後は、**発行**して割り当て可能にできます。 **発行済み**バージョンのブループリントを変更することはできません。 **発行済み**のブループリントに対しては、**ドラフト**のブループリントと異なるアイコンが表示され、 **[最新バージョン]** 列に指定されたバージョン番号が表示されます。

ブループリントを発行するには、[Azure portal](../create-blueprint-portal.md#publish-a-blueprint) または [REST API](../create-blueprint-rest-api.md#publish-a-blueprint) を使用します。

## <a name="creating-and-editing-a-new-version-of-the-blueprint"></a>新しいバージョンのブループリントの作成と編集

**発行済み**バージョンのブループリントを変更することはできません。 ただし、新しいバージョンのブループリントを既存のブループリントに追加し、必要に応じて変更できます。 既存のブループリントを編集して、変更を加えます。 新しい変更が保存されると、ブループリントに**発行されていない変更**が存在することになります。 これらの変更は、新しい**ドラフト** バージョンのブループリントです。

ブループリントを編集するには、[Azure portal](../create-blueprint-portal.md#edit-a-blueprint) を使用します。

## <a name="publishing-a-new-version-of-the-blueprint"></a>新しいバージョンのブループリントの発行

編集されたブループリントの各バージョンは、割り当てられる前に **[発行済み]** にする必要があります。 ブループリントに**発行されていない変更**があり、それがまだ**発行**されていない場合、ブループリント編集ページの **[ブループリントを発行する]** ボタンを使用できます。 このボタンが表示されていない場合、そのブループリントは既に**発行済み**であり、**発行されていない変更**はありません。

> [!NOTE]
> 1 つのブループリントに対して複数の**発行済み**バージョンを作成でき、それぞれをサブスクリプションに割り当てることができます。

**発行されていない変更**があるブループリントを発行するには、新しいブルー プリントを発行する場合と同じ手順を使用します。

## <a name="deleting-a-specific-version-of-the-blueprint"></a>特定のバージョンのブループリントの削除

ブループリントの各バージョンは一意のオブジェクトであり、個別に**発行**できます。 同様に、ブループリントをバージョンごとに削除することもできます。 ブループリントのあるバージョンを削除しても、そのブループリントの他のバージョンには影響ありません。

> [!NOTE]
> アクティブな割り当てがあるブルー プリントを削除することはできません。 最初に割り当てを削除してから、バージョンを削除する必要があります。

1. 左側のウィンドウにある **[すべてのサービス]** を選択します。 **[ブループリント]** を探して選択します。

1. 左側のページで **[ブループリントの定義]** を選択し、フィルター オプションを使用してバージョンを削除するブループリントを検索します。 それを選択して編集ページを開きます。

1. **[公開済みバージョン]** タブを選択し、削除するバージョンを探します。

1. 削除するバージョンを右クリックして、 **[このバージョンを削除する]** を選択します。

## <a name="deleting-the-blueprint"></a>ブループリントの削除

コア ブループリントも削除できます。 コア ブループリントを削除すると、**ドラフト**および**発行済み**のブループリントを含め、そのブループリントのすべてのバージョンも削除されます。 ブループリントのバージョンの削除と同じように、コア ブループリントを削除しても、すべてのブループリント バージョンの既存の割り当ては削除されません。

> [!NOTE]
> アクティブな割り当てがあるブルー プリントを削除することはできません。 最初に割り当てを削除してから、バージョンを削除する必要があります。

ブループリントを削除するには、[Azure portal](../create-blueprint-portal.md#delete-a-blueprint) または [REST API](../create-blueprint-rest-api.md#delete-a-blueprint) を使用します。

## <a name="assignments"></a>代入

ライフサイクルの間に、ブループリントをサブスクリプションに割り当てることができるポイントがいくつかあります。 ブループリントのバージョンのモードが**発行済み**のときは常に、そのバージョンをサブスクリプションに割り当てることができます。 このライフサイクルにより、新しいバージョンの開発中であっても、ブループリントのバージョンを使用してアクティブに割り当てられます。

ブループリントのバージョンが割り当てられるので、どこで割り当てられており、どのパラメーターが割り当てられているのかを理解しておくことが重要です。 パラメーターは静的または動的にできます。 詳しくは、[静的および動的パラメーター](parameters.md)に関するページをご覧ください。

### <a name="updating-assignments"></a>割り当ての更新

ブループリントが割り当てられたら、割り当てを更新できます。 既存の割り当てを更新する理由は次のとおりです。

- [リソース ロック](resource-locking.md)を追加または削除する
- [動的パラメーター](parameters.md#dynamic-parameters)の値を変更する
- 割り当てを、ブループリントの新しい**発行済み**バージョンにアップグレードする

方法については、[既存の割り当ての更新](../how-to/update-existing-assignments.md)に関するページをご覧ください。

### <a name="unassigning-assignments"></a>割り当ての割り当て解除

ブループリントが不要になった場合は、管理グループまたはサブスクリプションから割り当てを解除できます。 ブループリントの割り当て解除中に、次の処理が行われます。

- [ブループリントのリソース ロック](resource-locking.md)の削除
- ブループリント割り当てオブジェクトの削除
- (条件付き) **システム割り当てマネージド ID** が使用された場合は、それも削除されます。

> [!NOTE]
> ブループリント割り当てによってデプロイされたリソースはすべてそのまま残りますが、Azure Blueprints によって保護されなくなります。

## <a name="next-steps"></a>次のステップ

- [静的および動的パラメーター](parameters.md)の使用方法を理解する。
- [ブループリントの優先順位](sequencing-order.md)のカスタマイズを参照する。
- [ブループリントのリソース ロック](resource-locking.md)の使用方法を調べる。
- [既存の割り当ての更新](../how-to/update-existing-assignments.md)方法を参照する。
- ブループリントの割り当て時の問題を[一般的なトラブルシューティング](../troubleshoot/general.md)で解決する。