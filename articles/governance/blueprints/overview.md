---
title: Azure Blueprint の概要
description: Azure Blueprint は、Azure 環境でアーティファクトを作成、定義、デプロイするために使用する Azure のサービスです。
services: blueprints
author: DCtheGeek
ms.author: dacoulte
ms.date: 12/05/2018
ms.topic: overview
ms.service: blueprints
manager: carmonm
ms.custom: mvc
ms.openlocfilehash: f1ebbc10109563b771c5417a0449efec12138526
ms.sourcegitcommit: 5d837a7557363424e0183d5f04dcb23a8ff966bb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/06/2018
ms.locfileid: "52967693"
---
# <a name="what-is-azure-blueprints"></a>Azure Blueprint とは

設計図によってエンジニアやアーキテクトがプロジェクト設計パラメーターの概略を示すのと同じように、Azure Blueprint によってクラウド アーキテクトや中央の情報技術部門は、組織の標準、パターン、要件を実装および順守した反復可能な一連の Azure リソースを定義できます。 Azure Blueprint を使用すると、開発チームは新しい環境を迅速に構築して立ち上げることができます。新しい環境は組織のコンプライアンスに従って構築され、ネットワークなどの一連の組み込みコンポーネントを含んでいるという確信が得られるため、開発とデリバリーにかかる時間を短縮できます。

ブループリントは、さまざまなリソース テンプレートやその他のアーティファクトのデプロイを宣言によって調整する手法です。

- ロールの割り当て
- ポリシーの割り当て
- Azure Resource Manager のテンプレート
- リソース グループ

Azure Blueprints サービスの背後には、グローバルに分散された [Azure Cosmos DB](../../cosmos-db/introduction.md) があります。
Blueprint オブジェクトは複数の Azure リージョンにレプリケートされます。 Blueprints によってどのリージョンにリソースがデプロイされても、このレプリケーションによって、ブループリント オブジェクトに対するアクセスの一貫性、高可用性、短い待ち時間が実現します。

## <a name="how-its-different-from-resource-manager-templates"></a>Resource Manager テンプレートとの違い

このサービスは、"_環境の設定_" が容易になるように設計されています。 この設定は、多くの場合、一連のリソース グループ、ポリシー、ロールの割り当てのほか、Resource Manager テンプレートのデプロイから成ります。 ブループリントは、これら個々の _アーティファクト_ の種類をまとめたパッケージです。ブループリントにより、そのパッケージの作成とバージョン管理を行うことができます (CI/CD パイプラインを使用して行うこともできます)。 最終的には、それぞれが、監査と追跡が可能なサブスクリプションに 1 回の操作で割り当てられます。

ブループリントにおいてデプロイの対象に含めるものはほぼすべて、Resource Manager テンプレートを使用して実現できます。 しかし、Resource Manager テンプレートは Azure にネイティブに存在するドキュメントではありません。各テンプレートはローカルに、またはソース コントロール内に格納されます。 テンプレートは 1 つ以上の Azure リソースのデプロイに使用されますが、それらのリソースがデプロイされると、テンプレートとのアクティブな結び付きや関係は失われます。

ブループリントを使用すると、ブループリント定義 (何をデプロイする "_必要がある_" か) とブループリント割り当て (何がデプロイ "_された_" か) の間に関係が維持されます。 この結び付きによって、デプロイの追跡と監査が向上します。 また、同じブループリントによって制御される複数のサブスクリプションを一度にアップグレードすることもできます。

Resource Manager テンプレートとブループリントのどちらかを選ぶ必要はありません。 各ブループリントは、0 個以上の Resource Manager テンプレート _アーティファクト_ で構成することができます。 つまり、Resource Manager テンプレートのライブラリを開発およびメンテナンスするために行った以前の作業をブループリントにおいて再利用することができます。

## <a name="how-its-different-from-azure-policy"></a>Azure Policy との違い

ブループリントは、一貫性とコンプライアンスを確保する再利用可能な Azure クラウド サービス、セキュリティ、デザインの実装に関連した、焦点を定めた一連の標準、パターン、要件を作成するためのパッケージまたはコンテナーです。

[ポリシー](../policy/overview.md)は、デプロイ時のリソース プロパティと、既に存在するリソースのリソース プロパティに焦点を合わせた、既定での許可と明示的な拒否のシステムです。 サブスクリプションに含まれるリソースが要件と標準に準拠していることを確認することによって、クラウドのガバナンスを支援します。

ブループリントにポリシーを含めると、ブループリントの割り当て時に適切なパターンやデザインを作成できます。 このポリシー追加により、承認済みまたは予想されている変更しか環境に対して行えないことが保証され、ブループリントの意図に対する継続的なコンプライアンスが確保されます。

ポリシーは、数多くの _アーティファクト_ の 1 つとしてブループリント定義に含めることができます。 また、ブループリントでは、ポリシーおよびイニシアティブでパラメーターを使用することもできます。

## <a name="blueprint-definition"></a>ブループリント定義

ブループリントは _アーティファクト_ から成ります。 ブループリントでは現在のところ以下のリソースがアーティファクトとしてサポートされています。

|リソース  | 階層のオプション| 説明  |
|---------|---------|---------|
|リソース グループ     | サブスクリプション | ブループリント内の他のアーティファクトで使用する新しいリソース グループを作成します。  プレースホルダーであるこれらのリソース グループを使用すると、リソースの構造を正確に希望したとおりに編成し、Azure Resource Manager テンプレートだけでなく、含めたポリシー割り当てとロールの割り当てのアーティファクトについて、スコープを制限する指定ができます。         |
|Azure Resource Manager テンプレート      | サブスクリプション、リソース グループ | テンプレートは、複雑な環境を作成する目的で使用されます。 たとえば、SharePoint ファーム、Azure Automation State Configuration、Log Analytics ワークスペースの環境が該当します。 |
|ポリシーの割り当て     | サブスクリプション、リソース グループ | ブループリントの割り当て先であるサブスクリプションに、ポリシーまたはイニシアティブを割り当てることができます。 ポリシーまたはイニシアティブは、ブループリントのスコープ内 (ブループリント管理グループ内、またはそれよりも下位) にある必要があります。 ポリシーまたはイニシアティブにパラメーターが含まれる場合、これらのパラメーターは、ブループリントを作成する時点で割り当てるか、ブループリント割り当て時に割り当てられます。       |
|ロールの割り当て   | サブスクリプション、リソース グループ | 既存のユーザーまたはグループを組み込みのロールに追加して、リソースに対して常に適切なユーザーが確実に適切なアクセス権を持つようにすることができます。 ロールの割り当ては、サブスクリプション全体に対して定義することも、ブループリントに含まれる特定のリソース グループに対して入れ子にすることもできます。 |

### <a name="blueprints-and-management-groups"></a>ブループリントと管理グループ

ブループリント定義を作成するとき、ブループリントの保存場所を定義します。 現時点では、ブループリントは、自分が**共同作成者**のアクセス権を持っている[管理グループ](../management-groups/overview.md)のみに保存できます。 その管理グループの任意の子サブスクリプションにブループリントを割り当てることができます。

> [!IMPORTANT]
> どの管理グループに対してもアクセス権を持っていない場合、または、どの管理グループも構成されていない場合には、ブループリント定義の一覧を読み込むと、使用可能な定義がないことが表示され、**[スコープ]** をクリックすると、管理グループの取得についての警告を示すウィンドウが開きます。 これを解決するには、自分に適切なアクセス権があるサブスクリプションが確実に[管理グループ](../management-groups/overview.md)に含まれているようにしてください。

### <a name="blueprint-parameters"></a>ブループリントのパラメーター

ブループリントでは、ポリシーやイニシアティブまたは Azure Resource Manager テンプレートにパラメーターを渡すことができます。
いずれかの "_アーティファクト_" がブループリントに追加されるときに、作成者は個々のブループリント割り当てに対して、定義済みの値を指定するか、割り当て時に値を指定できるようにするかを決定します。 この柔軟さによって、ブループリントのすべての使用に対して事前に決められた値を定義するか、割り当ての時点で値を決定できるようにするかを選ぶことができます。

> [!NOTE]
> ブループリントには、そのブループリント専用のパラメーターを設定できますが、現時点では、このようなパラメーターを作成できるのはブループリントがポータルではなく REST API から生成されている場合のみです。

詳細については、[ブループリントのパラメーター](./concepts/parameters.md)に関する記事をご覧ください。

### <a name="blueprint-publishing"></a>ブループリントの発行

ブループリントを作成したとき、最初は**ドラフト** モードであると見なされます。 割り当てができる状態になったら、**発行する**必要があります。 発行するには、**バージョン**文字列 (文字、数字、ハイフンを使用し、長さは最大 20 文字) を、**変更に関するメモ** (オプション) と共に定義する必要があります。 **バージョン**によって、同じブループリントに対する今後の変更が区別され、各バージョンを割り当てることが可能になります。 これはまた、同じブループリントの異なる複数の**バージョン**を同じサブスクリプションに割り当てできることを意味します。 ブループリントに追加の変更を加えた場合は、**発行されていない変更**に加えて、**発行済み** **バージョン**も引き続き存在します。 変更が完了すると、更新されたブループリントは、新しい一意の**バージョン**を持つ**発行済み**のブループリントとして、やはり割り当て可能になります。

## <a name="blueprint-assignment"></a>ブループリント割り当て

ブループリントの個々の**発行済み** **バージョン**を既存のサブスクリプションに割り当てることができます。 ポータルにおいて、ブループリントの既定の**バージョン**は、直近の**発行済み**になったバージョンになります。 アーティファクトのパラメーター (またはブループリントのパラメーター) がある場合、パラメーターは割り当て処理時に定義されます。

## <a name="permissions-in-azure-blueprints"></a>Azure Blueprint におけるアクセス許可

ブループリントを使用するには、[ロールベースのアクセス制御](../../role-based-access-control/overview.md) (RBAC) を通じてアクセス許可を得る必要があります。 ブループリントを作成するには、お使いのアカウントに次のアクセス許可が必要です。

- `Microsoft.Blueprint/blueprints/write` - ブループリント定義の作成
- `Microsoft.Blueprint/blueprints/artifacts/write` - ブループリント定義でのアーティファクトの作成
- `Microsoft.Blueprint/blueprints/versions/write` - ブループリントの発行

ブループリントを削除するには、お使いのアカウントに次のアクセス許可が必要です。

- `Microsoft.Blueprint/blueprints/delete`
- `Microsoft.Blueprint/blueprints/artifacts/delete`
- `Microsoft.Blueprint/blueprints/versions/delete`

> [!NOTE]
> 管理グループにブループリントの定義を作成するときに、ブループリント定義のアクセス許可を管理グループのスコープで付与する必要があります。または管理グループのスコープに継承されます。

ブループリントを割り当てまたは割り当て解除するには、お使いのアカウントに次のアクセス許可が必要です。

- `Microsoft.Blueprint/blueprintAssignments/write` - ブループリントの割り当て
- `Microsoft.Blueprint/blueprintAssignments/delete` - ブループリントの割り当て解除

> [!NOTE]
> サブスクリプションにブループリント割り当てが作成されると、ブループリント割り当てと割り当て解除のアクセス許可がサブスクリプションのスコープに対して付与されるか、サブスクリプション スコープに継承されます。

**所有者**ロールには、上記のアクセス許可のすべてが含まれています。 **共同作成者**ロールにはブループリントの作成と削除を実行するアクセス許可がありますが、ブループリントの割り当てを実行するアクセス許可はありません。 これらの組み込みロールが自分のセキュリティ ニーズに適合しない場合は、[カスタム ロール](../../role-based-access-control/custom-roles.md)を作成することを検討してください。

> [!NOTE]
> Azure Blueprint のサービス プリンシパルにより、デプロイを有効にするには、割り当てられたサブスクリプションで**所有者**のロールが必要です。 ポータルを使用する場合、デプロイに対するこのロールの付与と取り消しは自動的に行われます。 REST API を使用する場合はこのロールを手動で付与する必要がありますが、取り消しはデプロイ完了後に自動的に行われます。

## <a name="next-steps"></a>次の手順

- [ブループリントの作成 - ポータル](create-blueprint-portal.md)
- [ブループリントの作成 - REST API](create-blueprint-rest-api.md)
