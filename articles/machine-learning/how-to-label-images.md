---
title: ラベル付けプロジェクトで画像にタグを付ける
title.suffix: Azure Machine Learning
description: Azure Machine Learning のラベル付けプロジェクトでデータのタグ付けツールを使用する方法について説明します。
author: lobrien
ms.author: laobri
ms.service: machine-learning
ms.topic: tutorial
ms.date: 04/09/2020
ms.openlocfilehash: 2c21a8770209871be4d871a08e6355e4ca7ed169
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/29/2020
ms.locfileid: "82204323"
---
# <a name="tag-images-in-a-labeling-project"></a>ラベル付けプロジェクトで画像にタグを付ける

プロジェクト管理者によって Azure Machine Learning で[ラベル付けプロジェクトが作成](https://docs.microsoft.com/azure/machine-learning/how-to-create-labeling-projects#create-a-labeling-project)されたら、ラベル付けツール (パブリック プレビュー) を使用してすぐに Machine Learning プロジェクト用のデータを準備できます。 この記事では、次の内容について説明します。

> [!div class="checklist"]
> * ラベル付けプロジェクトにアクセスする方法
> * ラベル付けツール
> * 特定のラベル付けタスクにツールを使用する方法

## <a name="prerequisites"></a>前提条件

* [Microsoft アカウント](https://account.microsoft.com/account)、または組織およびプロジェクト用の Azure Active Directory アカウント
* ラベル付けプロジェクトが含まれているワークスペースへの共同作成者レベルのアクセス。

## <a name="sign-in-to-the-workspace"></a>ワークスペースにサインインする

1. [Azure Machine Learning Studio](https://ml.azure.com) にサインインします。

1. サブスクリプションと、ラベル付けプロジェクトが含まれているワークスペースを選択します。  この情報はプロジェクト管理者から入手します。

1. 左側にある **[データのラベル付け]** を選択し、プロジェクトを特定します。  

1. 一覧でプロジェクト名を選択します。

## <a name="understand-the-labeling-task"></a>ラベル付けタスクを理解する

プロジェクトを選択したら、ページの上部にある **[ラベル データ]** を選択します。

対象のプロジェクトに固有の指示が表示されます。 これらには、取り扱うデータの種類、意思決定方法、その他の関連情報について説明しています。 この情報を読んだ後、ページの上部にある **[タスク]** を選択します。  または、ページの下部にある **[ラベル付けの開始]** を選択します。

## <a name="common-features-of-the-labeling-task"></a>ラベル付けタスクの一般的な機能

すべての画像のラベル付けタスクでは、プロジェクト管理者が指定したセットから適切なタグを 1 つまたは複数選択します。 キーボードの数字キーを使用して、最初の 9 個のタグを選択できます。  

画像分類タスクでは、複数の画像を同時に表示することもできます。 画像領域の上にあるアイコンを使用して、レイアウトを選択します。 

表示されているすべての画像を同時に選択するには、 **[すべて選択]** を使用します。 個々の画像を選択するには、画像の右上隅にある円形の選択ボタンを使用します。 タグを適用する画像を少なくとも 1 つ選択する必要があります。 複数の画像を選択すると、選択したすべての画像に選択したタグが適用されます。

ここでは、2 x 2 レイアウトを選択済みで、"Mammal" (哺乳類) というタグを熊とシャチの画像に適用しようとしています。 サメの画像には既に "Cartilaginous fish" (軟骨魚類) というタグが付けられており、イグアナにはまだタグが付けられていません。

![複数の画像のレイアウトと選択](./media/how-to-label-images/layouts.png)

> [!Important] 
> レイアウトを切り替えるのは、ラベルの付いていないデータの新しいページがある場合のみにしてください。 レイアウトを切り替えると、ページの進行中のタグ付け作業はクリアされます。

Azure では、ページ上のすべての画像にタグを付け終わると、 **[送信]** ボタンが有効になります。 **[送信]** を選択して作業内容を保存します。

手元にあるデータのタグを送信すると、Azure によって作業キューの新しい画像セットを使ってページが更新されます。

### <a name="assisted-machine-learning"></a>支援型機械学習 

多クラス分類タスクまたは複数ラベル分類タスクの実行時に、機械学習アルゴリズムがトリガーされることがあります。 プロジェクトでこれらのアルゴリズムを有効にした場合、次のメッセージが表示されることがあります。

* ある程度の量の画像についてラベル付けが完了すると、画面上部のプロジェクト名の横に "**Tasks clustered (クラスタリング付きのタスク)** " と表示されることがあります。  つまり、似ている画像を同じページに表示するために画像はグループ化されます。  その場合、そのグループ化を活かすためには、複数の画像ビューのいずれかに切り替えます。  

* 後で、プロジェクト名の横に "**Tasks prelabeled (事前ラベル付きのタスク)** " と表示されることがあります。  その場合、機械学習の分類モデルによって提案されたラベルと共に画像が表示されます。 100% の精度を持つ機械学習モデルはありません。 使用するのはモデルの信頼度が高い画像だけですが、それらの画像であっても、ラベル付けが正しくない可能性があります。  そうしたラベルを見つけたら、ページを送信する前に、間違ったラベルを修正してください。  

特に、ラベル付けプロジェクトの初期の段階では、機械学習モデルに、ほんの一部の画像に対して事前ラベル付けするだけの精度しかない、ということがあります。 これらの画像のラベル付けが完了すると、次のラウンドのモデル トレーニング用にさらに多くのデータを収集するため、ラベル付けプロジェクトは手動でのラベル付けに戻ります。 やがて、さらに多くの割合の画像について、モデルの信頼度が上がっていき、後でプロジェクトで行う事前ラベル付けタスクが蓄積されていきます。

## <a name="tag-images-for-multi-class-classification"></a>複数クラス分類用に画像にタグを付ける

プロジェクトの種類が [Image Classification Multi-Class]\(画像分類の複数クラス\) の場合は、画像全体に 1 つのタグを割り当てます。 任意のタイミングで指示を確認するには、 **[指示]** ページに移動し、 **[View detailed instructions]\([詳細な指示の表示]\)** を選択します。

画像にタグを割り当てた後に間違えたことがわかった場合は、修正できます。 画像の下に表示されているラベルの "**X**" を選択して、タグをクリアします。 または、画像を選択し、別のクラスを選択します。 新しく選択した値によって、以前に適用したタグが置き換えられます。

## <a name="tag-images-for-multi-label-classification"></a>複数ラベル分類用に画像にタグを付ける

プロジェクトの種類が [Image Classification Multi-Label]\(画像分類の複数ラベル\) の場合は、画像に 1 つ "*以上*" のタグを適用します。 プロジェクト固有の指示を表示するには、 **[指示]** を選択し、 **[View detailed instructions]\([詳細な指示の表示]\)** に移動します。

ラベルを付ける画像を選択し、タグを選択します。 選択したすべての画像にタグが適用された後、画像が選択解除されます。 さらにタグを適用するには、画像を再び選択する必要があります。 次のアニメーションでは、複数ラベルのタグ付けを示しています。

1. "Ocean" (海洋) タグを適用するために **[すべて選択]** が使用されています。
1. 1 つの画像が選択され、"Closeup" (クローズアップ) というタグが付けられています。
1. 3 つの画像が選択され、"Wide angle" (ワイド アングル) というタグが付けられています。

![複数ラベル フローを示すアニメーション](./media/how-to-label-images/multilabel.gif)

誤りを修正するには、"**X**" をクリックして個々のタグをクリアするか、画像を選択してタグを選択します。これで、選択したすべての画像からタグがクリアされます。 このシナリオを次に示します。 [Land]\(陸\) をクリックすると、選択した 2 つの画像からそのタグがクリアされます。

![複数の選択解除を示すスクリーンショット](./media/how-to-label-images/multiple-deselection.png)

Azure では、各画像に少なくとも 1 つのタグを適用した後にのみ **[送信]** ボタンが有効になります。 **[送信]** を選択して作業内容を保存します。


## <a name="tag-images-and-specify-bounding-boxes-for-object-detection"></a>オブジェクト検出のために画像にタグを付けて境界ボックスを指定する

プロジェクトの種類が [オブジェクト ID (四角形領域)] の場合は、画像内の境界ボックスを 1 つ以上指定し、各ボックスにタグを適用します。 画像には、複数の境界ボックスがあり、それぞれに 1 つのタグがあります。 **[View detailed instructions]\([詳細な指示の表示]\)** を使用して、プロジェクトで複数の境界ボックスが使用されているかどうかを確認します。

1. 作成する予定の境界ボックスのタグを選択します。
1. **四角形のボックス** ツール ![四角形のボックス ツール](./media/how-to-label-images/rectangular-box-tool.png) を選択するか、R キーを押します。
3. ターゲットをクリックして斜めにドラッグすると、大まかな境界ボックスが作成されます。 境界ボックスを調整するには、端または角をドラッグします。

![基本的な境界ボックスの作成を示すスクリーンショット。](./media/how-to-label-images/bounding-box-sequence.png)

境界ボックスを削除するには、作成後に境界ボックスの横に表示される X 形のターゲットをクリックします。

既存の境界ボックスのタグを変更することはできません。 タグの割り当てを間違った場合は、境界ボックスを削除し、正しいタグを使って新しく作成する必要があります。

既定では、既存の境界ボックスを編集できます。 **領域のロック/ロック解除**ツール ![領域のロック/ロック解除ツール](./media/how-to-label-images/lock-bounding-boxes-tool.png) または L キーを使用して、その動作を切り替えます。 領域がロックされている場合は、新しい境界ボックスの形状または位置しか変更できません。

**領域操作**ツール ![領域操作ツール](./media/how-to-label-images/regions-tool.png) または M キーを使用して、既存の境界ボックスを調整します。 形状を調整するには、端または角をドラッグします。 内側をクリックすると、境界ボックス全体をドラッグできるようになります。 領域を編集できない場合は、**領域のロック/ロック解除**ツールを切り替えた可能性があります。

**テンプレートベースのボックス** ツール ![テンプレートベースのボックス ツール](./media/how-to-label-images/template-box-tool.png) または T キーを使用して、同じサイズの複数の境界ボックスを作成します。 画像に境界ボックスがなく、テンプレートベースのボックスをアクティブにすると、ツールによって 50 x 50 ピクセルのボックスが生成されます。 境界ボックスを作成してからテンプレートベースのボックスをアクティブにした場合、新しい境界ボックスはすべて、最後に作成したボックスのサイズになります。 テンプレートベースのボックスは、配置後にサイズを変更できます。 テンプレートベースのボックスのサイズを変更すると、そのボックスのサイズのみが変更されます。

現在の画像に含まれる "*すべて*" の境界ボックスを削除するには、**すべての領域の削除**ツール ![すべての領域の削除ツール](./media/how-to-label-images/delete-regions-tool.png) を選択します。

画像の境界ボックスを作成した後、 **[送信]** を選択して作業内容を保存します。そうしないと、進行中の作業は保存されません。

## <a name="finish-up"></a>しあげ

タグを付けたデータのページを送信すると、Azure によってラベルの付いていない新しいデータが作業キューから割り当てられます。 ラベルの付いていないデータがなくなると、その旨を示すメッセージと共にポータルのホーム ページへのリンクが表示されます。

ラベル付けが完了したら、ラベル付けポータルの右上隅で自分の名前を選択し、 **[サインアウト]** を選択します。サインアウトしない場合、最終的に Azure によって "タイムアウト" され、データは別のラベラーに割り当てられます。

## <a name="next-steps"></a>次のステップ

* [Azure で画像分類モデルをトレーニングする](https://docs.microsoft.com/azure/machine-learning/tutorial-train-models-with-aml)方法を確認します

