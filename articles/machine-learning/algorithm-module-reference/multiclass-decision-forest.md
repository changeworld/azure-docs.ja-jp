---
title: 多クラス デシジョン フォレスト:モジュール リファレンス
titleSuffix: Azure Machine Learning
description: Azure Machine Learning の多クラス デシジョン フォレスト モジュールを使用し、*デシジョン フォレスト* アルゴリズムに基づいて機械学習モデルを作成する方法について説明します。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 10/22/2019
ms.openlocfilehash: 6b0e9304278dc2092dfe070b76e6594ed19d5020
ms.sourcegitcommit: 87781a4207c25c4831421c7309c03fce5fb5793f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/23/2020
ms.locfileid: "76546624"
---
# <a name="multiclass-decision-forest-module"></a>多クラス デシジョン フォレスト モジュール

この記事では Azure Machine Learning デザイナー (プレビュー) 内のモジュールについて説明します。

*デシジョン フォレスト* アルゴリズムに基づいて機械学習モデルを作成するには、このモジュールを使用します。 デシジョン フォレストは、タグ付けされたデータから学習しながら、一連のデシジョン ツリーを迅速に構築するためのアンサンブル モデルです。

## <a name="more-about-decision-forests"></a>デシジョン フォレストの詳細

デシジョン フォレスト アルゴリズムは、分類のためのアンサンブル学習手法です。 このアルゴリズムは、複数のデシジョン ツリーを構築したうえで、最良の出力クラスに*投票*することで機能します。 投票は集計の一種であり、分類デシジョン フォレスト内の各ツリーからは、ラベルの頻度ヒストグラムが正規化されていない状態で出力されます。 これらのヒストグラムをアグリゲーション プロセスで合計し、結果を正規化することで、各ラベルの "確率" が得られます。 アンサンブルの最終決定では、予測信頼性の高いツリーに、より大きい重みが与えられます。

デシジョン ツリーは、一般的にノンパラメトリック モデルであるため、さまざまな分布のデータをサポートします。 各ツリーで、各クラスに対して一連の単純なテストが実行され、リーフ ノード (デシジョン) に達するまで、ツリー構造のレベルが増加します。

デシジョン ツリーには、次のような多くの利点があります。

+ 非線形の決定境界を表すことができる。
+ トレーニング時と予測時における計算とメモリ使用量の点で効率に優れている。
+ 統合された特徴選択と分類が行われる。
+ ノイズの多い特徴が存在する状況での回復性がある。

Azure Machine Learning のデシジョン フォレスト分類子は、デシジョン ツリーのアンサンブルで構成されます。 一般に、アンサンブル モデルは、単一のデシジョン ツリーと比べ、カバレッジと正確性が優れています。 詳細については、[デシジョン ツリー](https://go.microsoft.com/fwlink/?LinkId=403677)に関するページを参照してください。

## <a name="how-to-configure-multiclass-decision-forest"></a>多クラス デシジョン フォレストの構成方法

1. デザイナー内のご利用のパイプラインに**多クラス デシジョン フォレスト** モジュールを追加します。 このモジュールは、 **[Machine Learning]\(機械学習\)** の **[Initialize]\(初期化\)** の **[分類]** にあります。

2. モジュールをダブルクリックして **[Properties]\(プロパティ\)** ウィンドウを開きます。

3. **[Resampling method]\(再サンプリング方法\)** で、個々のツリーの作成に使用される方法を選択します。  バギングまたはレプリケーションから選択できます。

    + **[Bagging]\(バギング\)** : バギングは、"*ブートストラップ アグリゲーティング*" とも呼ばれます。 この方法では、元のデータセットを置換しながら、元のサイズになるまでランダムにサンプリングすることによって作成された新しいサンプルに基づいて、各ツリーが作成されます。 モデルの出力は "*投票*" (アグリゲーションの一形態) によって結合されます。 詳細については、Wikipedia でブートストラップ アグリゲーティングに関する項目を参照してください。

    + **[レプリケート]** : レプリケーションでは、各ツリーがまったく同じ入力データでトレーニングされます。 それぞれのツリー ノードで使用される分割述語の決定はランダムなままであるため、ツリーは多様になります。

   

4. **[Create trainer mode]\(トレーナー モードの作成\)** オプションを設定して、モデルのトレーニング方法を指定します。

    + **Single Parameter (単一パラメーター)** : モデルの構成方法を決めている場合はこのオプションを選択し、特定の値のセットを引数として渡します。


5. **[Number of decision trees]\(デシジョン ツリーの数\)** :アンサンブルに作成できるデシジョン ツリーの最大数を入力します。 作成するデシジョン ツリーを増やすと、カバレッジが向上する可能性はありますが、トレーニング時間が長くなるおそれがあります。

    トレーニング済みのモデルを可視化したときに、結果に表示されるツリーの数もこの値によって制御されます。 単一のツリーを表示または出力する場合は値を 1 に設定できます。ただしその場合、ツリーは 1 つだけ生成され (初期パラメーター セットを持つツリー)、それ以上のイテレーションは実行されません。

6. **[Maximum depth of the decision trees]\(デシジョン ツリーの最大深度\)** :デシジョン ツリーの最大深度を制限する数値を入力します。 ツリーの深度を増やすと、精度が向上する可能性があるものの、オーバーフィットが発生しやすくなり、トレーニング時間が長くなるおそれがあります。

7. **[Number of random splits per node]\(ノードごとのランダム分割数\)** :ツリーの各ノードを構築するときに使用する分割数を入力します。 "*分割*" とは、ツリー (ノード) の各レベルの特徴がランダムに分割されることを意味します。

8. **[Minimum number of samples per leaf node]\(リーフ ノードごとの最小サンプル数\)** :ツリーの終端ノード (リーフ) を作成するうえで必要なケース数を指定します。 この値を増やすと、新しいルールを作成するためのしきい値が大きくなります。

    たとえば、既定値の 1 では、ケースが 1 つであっても新しいルールを作成できます。 この値を 5 に増やした場合、同じ条件を満たすケースがトレーニング データに少なくとも 5 つ含まれている必要があります。



10. ラベル付けされたデータセットと、いずれかのトレーニング モジュールを接続します。

    + **[Create trainer mode]\(トレーナー モードの作成\)** を **[Single Parameter]\(単一パラメーター\)** に設定した場合は、[モデルのトレーニング](./train-model.md) モジュールを使用します。

11. パイプラインを実行します。



## <a name="next-steps"></a>次のステップ

Azure Machine Learning で[使用できる一連のモジュール](module-reference.md)を参照してください。 