---
title: ポワソン回帰:モジュール リファレンス
titleSuffix: Azure Machine Learning
description: Azure Machine Learning デザイナーのポワソン回帰モジュールを使用して、ポワソン回帰モデルを作成する方法について説明します。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 07/13/2020
ms.openlocfilehash: 2dfd8b3d919f9eeb3e183135ef543f417c878977
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "93420701"
---
# <a name="poisson-regression"></a>ポワソン回帰

この記事では Azure Machine Learning デザイナーのモジュールについて説明します。

このモジュールを使用して、パイプラインでポワソン回帰モデルを作成します。 ポワソン回帰の目的は、数値 (通常はカウント) を予測することです。 したがって、予測を試みている値が次の条件を満たす場合にのみ、このモジュールを使用して回帰モデルを作成する必要があります。

- 応答変数が[ポワソン分布](https://en.wikipedia.org/wiki/Poisson_distribution)を持つ。  

- カウントが負の値になる可能性がない。 負の値のラベルと共に使用すると、このメソッドは失敗します。

- ポワソン分布が離散型分布であるため、このメソッドを非整数と使用することが重要でない。

> [!TIP]
> ターゲットがカウントでない場合、ポワソン回帰が適切なメソッドではない可能性が高くなります。 [デザイナーでその他の回帰モジュール](./module-reference.md#machine-learning-algorithms)を試してください。 

回帰メソッドを設定したら、予測する値のサンプルを含むデータセットを使用して、モデルをトレーニングする必要があります。 その後、トレーニング済みのモデルは、予測に使用できます。

## <a name="more-about-poisson-regression"></a>ポワソン回帰の詳細

ポワソン回帰とは特殊な種類の回帰分析で、一般的にはカウントをモデル化するのに使用されます。 たとえば、ポワソン回帰は次のシナリオに役立ちます。

- 飛行機のフライトに関連付けられたコールド数をモデル化する

- イベント発生時の緊急時サービスの呼び出し数を見積もる

- プロモーション後の顧客の問い合わせ数を予測する

- 分割表を作成する

応答変数にはポワソン分布があるため、このモデルでは、データとその確率分布に関する前提が最小二乗回帰などとは異なります。 そのため、ポワソンモデルは、その他の回帰モデルとは異なる方法で解釈される必要があります。

## <a name="how-to-configure-poisson-regression"></a>ポワソン回帰を構成する方法

1. デザイナーでパイプラインに **ポワソン回帰** モジュールを追加します。 このモジュールは、 **[Machine Learning Algorithms]\(機械学習アルゴリズム\)** の **[回帰]** カテゴリにあります。

2. 適切な種類のトレーニング データが含まれるデータセットを追加します。 

    [[データの正規化]](normalize-data.md) を使用して入力データセットを正規化してから、それを使用してリグレッサーのトレーニングを行うことをお勧めします。

3. **[ポワソン回帰]** モジュールの右ペインで、 **[Create trainer mode]\(トレーナー モードの作成\)** オプションを設定してモデルをトレーニングする方法を指定します。  
  
    - **Single Parameter (単一パラメーター)** : モデルの構成方法を決めている場合は、特定の値のセットを引数として渡します。
  
    - **[Parameter Range]\(パラメーター範囲\)** : 最適なパラメーターがわからない場合は、[[モデルのハイパーパラメーターの調整]](tune-model-hyperparameters.md) モジュールを使用してパラメーターのスイープを行います。 トレーナーは、指定された複数の値で繰り返し最適な構成を見つけます。
  
4. **最適化の公差**:最適化中に、公差の間隔を定義する値を入力します。 値が低いほど、学習の速度は遅くなりその正確度は高くなります。

5. **[L1 正則化の重み]** と **[L2 正則化の重み]** :L1 と L2 の正則化に使用する値を入力します。 *[正則化]* では、トレーニング データに依存しない、こうしたモデルの側面に関するアルゴリズムに制約が追加されます。 正則化は通常、オーバーフィットを回避するときにも使用されます。 

    - L1 正則化は、可能な限りスパースなモデルを使用することが目標である場合に有用です。

        L1 正則化を行うには、学習器が最小化しようとしている損失式から重みベクトルの L1 の重みを差し引きます。 L1 ノルムは、L0 ノルムに適切に近似しています (0 以外の座標数)。

    - L2 正則化は、重みベクトル内の任意の単一座標の絶対値が大きくなり過ぎるのを防止します。 L2 正則化は、全体的な重みが小さいモデルを使用することが目標である場合に有用です。

    このモジュールでは、L1 正則化と L2 正則化の組み合わせを適用できます。 L1 と L2 の正則化を組み合わせることにより、パラメーター値の絶対値にペナルティを適用することができます。 学習器は、損失の最小化とのトレードオフにおいて、ペナルティを最小限に抑えようとします。

    L1 および L2 の正則化の詳細については、「[機械学習向けの L1 および L2 正規化](/archive/msdn-magazine/2015/february/test-run-l1-and-l2-regularization-for-machine-learning)」を参照してください。

6. **L-BFGS のメモリ サイズ**:モデルの調整と最適化のために予約するメモリの量を指定します。

     L-BFGS は、BFGS (Broyden–Fletcher–Goldfarb–Shanno) アルゴリズムに基づいて最適化するための特定のメソッドです。 このメソッドでは、制限されたメモリ量 (L) を使用して次のステップ指示が計算されます。

     このパラメーターを変更すると、次のステップを計算するために保存されている過去の位置と勾配の数を調整できます。

7. トレーニング データセットと未トレーニング モデルをトレーニング モジュールのいずれかに接続します。 

    - **[Create trainer mode]\(トレーナー モードの作成\)** を **[Single Parameter]\(単一パラメーター\)** に設定した場合は、[モデルのトレーニング](train-model.md) モジュールを使用します。

    - **[Create trainer mode]\(トレーナー モードの作成\)** を **[Parameter Range]\(パラメーター範囲\)** を設定する場合は、[[Tune Model Hyperparameters]\(モデルのハイパーパラメーターの調整\)](tune-model-hyperparameters.md) モジュールを使用します。

    > [!WARNING]
    > 
    > - パラメーター範囲を [[モデルのトレーニング]](train-model.md) に渡すと、パラメーター範囲リストの 1 番目の値のみが使用されます。
    > 
    > - [[Tune Model Hyperparameters]\(モデルのハイパーパラメーターの調整\)](tune-model-hyperparameters.md) モジュールによって、パラメーターごとに設定の範囲が求められているとき、それに単一のパラメーター値セットを渡した場合、それらの値は無視され、学習器の既定値が使用されます。
    > 
    > - **[Parameter Range]\(パラメーター範囲\)** オプションを選択し、任意のパラメーターに単一の値を入力した場合、指定した単一の値はスイープ全体で使用されます。これは、他のパラメーターが値の範囲の中で変化する場合でも同様です。

8.  パイプラインを送信します。

## <a name="results"></a>結果

トレーニングの完了後:

+ トレーニング済みモデルのスナップショットを保存するには、トレーニング モジュールを選択し、右側のパネルにある **[Outputs+logs]\(出力とログ\)** タブに切り替えます。 **[データセットの登録]** アイコンをクリックします。  モジュール ツリーに、保存したモデルがモジュールとして表示されます。 

## <a name="next-steps"></a>次のステップ

Azure Machine Learning で[使用できる一連のモジュール](module-reference.md)を参照してください。