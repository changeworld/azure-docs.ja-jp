---
title: Microsoft Azure Data Encryption-at-Rest | Microsoft Docs
description: "この記事では、Microsoft Azure の保存データの暗号化の概要、全体的な機能、および一般的な考慮事項について説明します。"
services: security
documentationcenter: na
author: YuriDio
manager: mbaldwin
editor: TomSh
ms.assetid: 9dcb190e-e534-4787-bf82-8ce73bf47dba
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/25/2017
ms.author: yurid
ms.openlocfilehash: 53b6f03d43b5525e5c5dea42e6a9a36042b65d52
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/11/2017
---
# <a name="azure-data-encryption-at-rest"></a>Azure Data Encryption-at-Rest
Microsoft Azure では、会社のセキュリティとコンプライアンスのニーズに合わせてデータを保護するためのツールが複数用意されています。 このホワイト ペーパーは、Microsoft Azure 全体で保存中のデータがどのように保護され、データ保護実装を構成しているさまざまなコンポーネント、およびさまざまなキー管理保護方法の長所と短所について説明します。 

保存中データの暗号化は、一般的なセキュリティ要件です。 Microsoft Azure の利点は、組織が実装と管理のコストを負担したり、カスタムのキー管理ソリューションを実装するリスクを取ることなく、保存データの暗号化を実現できることです。 組織は、Azure のみを使用して保存データの暗号化を完全に管理することを選択できます。 さらに、組織には、暗号化または暗号化キーを厳密に管理するさまざまなオプションが提供されています。

## <a name="what-is-encryption-at-rest"></a>保存データの暗号化とは
保存データの暗号化とは、データが永続化されるときに、暗号化エンコード (暗号化) を使用することです。 Azure の保存時の暗号化では、対称暗号化を使用して暗号化し、単純な概念モデルに基づいて大量のデータをすばやく復号化します。

- 対照暗号化キーは、永続化時のデータの暗号化に使用されます 
- メモリで使用する準備を行ときに、同じ暗号化キーを使用してデータが複合化されます。
- データはパーティション分割されることがあり、パーティションごとに異なるキーを使用ます。
- キーは、特定の ID にアクセスを限定するアクセス制御ポリシーで保護され、キーの使用状況がログに記録された安全な場所に保存する必要があります。 データ暗号化キーは、さらにアクセスを制限するため、多くの場合、非対称暗号化を使用して暗号化されます (この記事後半の*キー階層*で説明)。

上記では、保存時の暗号化に共通する高度な要素について説明しました。 実際には、キーの管理と制御のシナリオに加え、拡張性と可用性を保証するには、追加の構造が必要です。 Microsoft Azure Encryption at Rest の概念とコンポーネントは次のとおりです。

## <a name="the-purpose-of-encryption-at-rest"></a>保存時の暗号化の目的
保存時の暗号化は、データ保存時のデータ保護を提供することを目的として作られています (前述)。保存データへの攻撃では、データが保存されているハードウェアへの物理的なアクセスを取得し、その中に含まれるデータが侵害されます。 このような攻撃では、メンテナンス中にサーバーのハード ドライブの保護を誤り、攻撃者にハード ドライブを削除する機会を与えることがあります。 攻撃者は、この後、攻撃者があやつるハード ドライブをコンピューターに戻し、データにアクセスします。 

Encryption at Rest は、データをディスク上で確実に暗号化することで、暗号化されていないデータに攻撃者がアクセスできないよう設計されています。 攻撃者が、暗号化されたデータが保存されているハード ドライブにアクセスできても、暗号化キーにはアクセスできず、攻撃者がデータを侵害することは難しくなります。 このようなシナリオでは、暗号化されたデータを攻撃する必要があり、ハード ドライブ上の暗号化されていないデータにアクセスするよりも多くのリソースを費やすことになります。 このため、保存時に暗号化することは、多くの組織の高優先度要件として強く推奨されます。 

場合によっては、保存時の暗号化は、組織のデータ ガバナンスとコンプライアンス活動の要件にもなります。 HIPAA、PCI、FedRAMP などの業界および政府規制や国際規制要件のデータ保護と暗号化要件に関するプロセスとポリシーには、具体的な保護対策が規定されています。 これらの規制の多くでは、保存時の暗号化は、法規に準拠したデータ管理と保護に必要な必須対策と規定されています。 

コンプライアンスおよび規制の要件に加え、保存時の暗号化は多層防御プラットフォーム機能として認識される必要があります。 Microsoft は、サービス、アプリケーション、およびデータ、包括的な機能、および物理的なセキュリティ、データのアクセス制御と監査のための準拠プラットフォームを提供していますが、他のセキュリティ対策が機能しなかったときのための追加の「重複」セキュリティ対策を提供することが重要です。 保存時の暗号化は、このような追加の防御機構になります。

Microsoft は、クラウド サービス全体にわたって保存時の暗号化オプションを用意し、お客様に適切なの暗号化キー管理容易性と、暗号化キーがいつ使用されているかを示すログへのアクセス機能を提供することに努めています。 さらに、Microsoft は、お客様のすべての保存時データが既定で暗号化されることを目標にしています。

## <a name="azure-encryption-at-rest-components"></a>Azure Encryption at Rest のコンポーネント

前述のように、保存時の暗号化の目的は、ディスクに保存されているデータを秘密暗号化キーで暗号化することです。 この目標を達成するためには、セキュリティ保護されたキーの作成、ストレージ、アクセス制御および暗号化キーの管理を提供する必要があります。 詳細情報が異なる場合がありますが、Azure services Encryption at Rest で実装されている暗号化サービスは、次の図に示した概念で説明できます。

![コンポーネント](./media/azure-security-encryption-atrest/azure-security-encryption-atrest-fig1.png)

### <a name="azure-key-vault"></a>Azure Key Vault

暗号化キーの保存場所と、これらのキーへのアクセス制御は、保存時暗号化モデルの中心になります。 キーは高度のセキュリティで保護される必要がありますが、特定のユーザーによって管理でき、特定のサービスで利用できる必要があります。 Azure サービスの場合は、サービス全体で共通した管理エクスペリエンスを提供するキー保存のソリューションである、Azure Key Vault をお勧めします。 キーはキー コンテナーで保存、管理され、キー コンテナーへのアクセスをユーザーまたはサービスに提供できます。 Azure Key Vault では、ユーザーが管理する暗号化キーのシナリオで使用するための、ユーザーによるキーの作成またはユーザー キーのインポートがサポートされています。

### <a name="azure-active-directory"></a>Azure Active Directory

Azure Key Vault に保存されたキーを、その管理、または保存時の暗号化および複合化時にアクセスして使用するためのアクセス許可を、Azure Active Directory アカウントに付与できます。 

### <a name="key-hierarchy"></a>キー階層

通常、保存時の暗号化の実装には、複数の暗号化キーが使用されます。 非対称暗号化は、キーへのアクセスとキーの管理に必要な認証と信頼を確立するために役立ちます。 対称暗号化は、強力に暗号化でき、パフォーマンスも高いため、一括の暗号化および復号化の場合に、より効率的です。 さらに、1 つの暗号化キーに使用を制限すると、キーが侵害されるリスクと、キーを置き換える必要があった場合の再暗号化のコストを低減できます。 非対称および対称暗号化の利点を活用し、使用と露出を 1 つのキーに限定するために、Azure 保存時暗号化モデルでは、次の種類のキーで構成されたキー階層を使用します。

- **データ暗号化キー (DEK)** – パーティションまたはデータ ブロックの暗号化に使用する対称 AES256 キー。  1 つのリソースに、複数のパーティションおよび複数のデータ暗号化キーを保有できます。 データの各ブロックを異なるキーで暗号化することによって、暗号化分析攻撃がより困難になります。 DEK へのアクセスは、特定のブロックを暗号化および暗号化するリソース プロバイダーまたはアプリケーション インスタンス必要になります。 DEK で新しいキーに交換された場合も、新しいキーを使用して再暗号化する必要があるのは、関連ブロック内のデータのみになります。
- **キーの暗号化キー (KEK)** – データ暗号化キーの暗号化に使用される非対称暗号化キー。 キーの暗号化キーを使用すると、データの暗号化キー自体が暗号化され、管理できます。 KEK へのアクセス権を持つエンティティは、DEK を必要とするエンティティとは異なるエンティティに設定できます。 これにより、エンティティは DEK へのアクセスを仲介して、各 DEK へのアクセスを特定パーティションに限定できます。 D の複合化には KEK が必要であるため、KEK を削除することにより DEK を効率的に削除できる有効な単一ポイントになります。

キーの暗号化キーで暗号化されたデータ暗号化キーは個別に保存され、キーの暗号化キーへのアクセス許可を持つエンティティのみがそのキーで暗号化されたデータの暗号化キーを取得できます。 キー保存のさまざまなモデルがサポートされます。 各モデルについては、次のセクションの後半で詳しく説明します。

## <a name="data-encryption-models"></a>データ暗号化モデル

暗号化のさまざまなモデル、およびそれらの長所と短所を理解することは、Azure でさまざまなリソース プロバイダーが実装している保存時の暗号化の方法を理解するために不可欠です。 これらの定義は、共通の言語と分類を確立するため Azure 内のすべてのリソース プロバイダーで共有されます。 

サーバー側暗号化には 3 つのシナリオがあります。

- サービス管理キーを使用したサーバー側暗号化
    - Azure リソース プロバイダーが暗号化操作と複合化操作を実行する
    - マイクロソフトがキーを管理する
    - 完全なクラウド機能

- Azure Key Vault でのユーザーが管理するキーを使用したサーバー側暗号化
    - Azure リソース プロバイダーが暗号化操作と複合化操作を実行する
    - Azure Key Vault でユーザーがキーを管理する
    - 完全なクラウド機能

- ユーザーが管理するハードウェア上での、ユーザーが管理するキーを使用したサーバー側暗号化
    - Azure リソース プロバイダーが暗号化操作と複合化操作を実行する
    - ユーザーが管理するハードウェア上のキーをユーザーが管理する
    - 完全なクラウド機能

クライアント側の暗号化の場合、次の点を考慮してください。

- Azure のサービスは複合化されたデータを認識できません
- ユーザーがオンプレミス (または別のセキュリティで保護されたストア) でキーを管理および保管します キーは Azure のサービスでは使用できません
- 制限されたクラウド機能

Azure でサポートされている暗号化モデルは、前述のとおり、"クライアント側暗号化" と "サーバー側暗号化" の 2 つの主なグループに分類されます。 使用されている保存時暗号化モデルとは関係なく、Azure サービスでは TLS や HTTPS などのセキュリティで保護されたトランスポートを使用することをお勧めします。 そのため、転送中の暗号化の問題は、トランスポート プロトコルによって解決され、どの保存時暗号化モデルを使用するかを決定する主な要因ではなくなります。

### <a name="client-encryption-model"></a>クライアント側暗号化モデル

クライアント側暗号化モデルとは、リソース プロバイダーまたは Azure の外でサービスまたは呼び出し元アプリケーションによって実行される暗号化を指します。 暗号化は、Azure 内のサービス アプリケーション、またはお客様のデータ センターで実行されているアプリケーションによって実行できます。 いずれの場合も、この暗号化モデルを利用する場合は、Azure リソース プロバイダーは、データを解読する、または暗号化キーにアクセスすることを許可されないまま、暗号化されたデータの BLOB を受け取ります。 このモデルでは、キー管理は呼び出し元のサービスまたはアプリケーションによって行われ、Azure サービスにとっては完全に不透明になります。

![クライアント](./media/azure-security-encryption-atrest/azure-security-encryption-atrest-fig2.png)

### <a name="server-side-encryption-model"></a>サーバー側暗号化モデル

サーバー側暗号化モデルとは、Azure のサービスによって実行される暗号化を指します。 このモデルでは、リソース プロバイダーが暗号化および複合化操作を実行します。 たとえば、Azure Storage では、プレーンテキスト操作でデータを受け取り、暗号化および複合化操作を内部で実行します。 リソース プロバイダーは、Microsoft または指定された構成によってはユーザーが管理している暗号化キーを使用します。 

![サーバー](./media/azure-security-encryption-atrest/azure-security-encryption-atrest-fig3.png)

### <a name="server-side-encryption-key-management-models"></a>サーバー側の暗号化キーの管理モデル

保存時サーバー側暗号化の各モデルには、キー管理独特の特性があります。 これには、いつどのように暗号化キーが作成、保存されるか、アクセス モデル、およびキー ローテーションの手順が含まれます。 

#### <a name="server-side-encryption-using-service-managed-keys"></a>サービス管理キーを使用したサーバー側暗号化

多くのお客様にとって、保存時に確実にデータを暗号化することは必須要件です。 サービス管理キーを使用したサーバー側暗号化により、お客様が特定のリソース (ストレージ アカウント、SQL DB など) を指定し、キー発行、ローテーション、バックアップなどのすべてのキー管理側面を Microsoft に任せ、このモデルを実現できます。 暗号化をサポートするほとんどの Azure サービスでは、通常、暗号化キーの管理を Azure に一任するこのモデルがサポートます。 Azure リソース プロバイダーは、キーを作成し、セキュリティ保護されたストレージに保存し、必要な時に取得します。 つまり、サービスはキーにフル アクセスでき、資格情報のライフサイクル管理を完全に管理します。

![キー管理](./media/azure-security-encryption-atrest/azure-security-encryption-atrest-fig4.png)

このように、サービス管理キーを使用したサーバー側暗号化は、お客様のオーバーヘッドを軽減しながら、暗号化ニーズに迅速に対応します。 Azure Portal を使用できる場合、お客様は、Azure Portal を開いてターゲット サブスクリプションとリソース プロバイダーにアクセスし、ボックスをオンにしてデータを暗号化するかどうかを指定します。 Resource Manager のサーバー側暗号化ではサービス管理型のキーが既定でオンになっているものもあります。 

Microsoft がキーを管理するサーバー側暗号化では、サービスがストアにフル アクセスでき、キーを管理します。 自分でキーを管理する方がより強力なセキュリティを保証できると感じるお客様もいらっしゃるでしょうが、このモデルを評価する際には、カスタム キー ストレージ ソリューションに伴うコストとリスクを考慮に入れる必要があります。 多くの組織で、リソースの制約またはオンプレミス ソリューションのリスクが、保存時の暗号化キーのクラウドでの管理のリスクより大きいと判断されています。  ただし、暗号化キーの作成またはライフサイクルを管理することを要件としている、またはサービス管理を行っていない従業員がサービスの暗号化キーを管理している (サービスの総合的な管理モデルからキー管理が分離されている) 組織の場合は、このモデルは十分ではありません。

##### <a name="key-access"></a>キーへのアクセス

サービス管理型キーを使用するサーバー側暗号化を使用する場合、キーの作成、保存とサービス アクセスは、すべてサービスによって管理されます。 通常、基盤となる Azure リソース プロバイダーは、データの近くにあり、すぐに使用アクセスできるストアにデータ暗号化キーを格納し、キー暗号化キーはセキュリティで保護された内部ストアに格納されます。

**長所**

- 設定が簡単
- Microsoft がキー ローテーション、バックアップおよび冗長性を管理します。
- お客様には、実装に関連するコスト、またはカスタム キー 管理スキームのリスクが発生しません。

**短所**

- お客様が暗号化キー (キーの仕様、ライフサイクル、失効など) を管理できない
- サービスの全体的な管理モデルとキーの管理を分離できない

#### <a name="server-side-encryption-using-customer-managed-keys-in-azure-key-vault"></a>Azure Key Vault でのユーザーが管理するキーを使用したサーバー側暗号化 

保存時のデータを暗号化し、暗号化キーを管理することが要件であるシナリオの場合、Key Vault のユーザー管理型キーによるサーバー側暗号化を使用できます。 一部のサービスでは Azure Key Vault のルート キー暗号化キーのみを保存し、暗号化されたデータ暗号化キーは、データに近い内部の場所に保存されます。 このシナリオでは、お客様は Key Vault に自分のキーを使用 (BYOK – Bring Your Own Key) するか、新しいものを生成して、必要なリソースを暗号化します。 リソース プロバイダーは、すべての暗号化操作のルート キーとして、構成されたキーを使用して、暗号化および暗号化解除の操作を実行します。 

##### <a name="key-access"></a>キーへのアクセス

Azure Key Vault でユーザーが管理するキーを使用するサーバー側暗号化モデルは、必要に応じて、暗号化および複合化キーにサービスがアクセスします。 保存時の暗号化キーは、キーを受け取るサービス ID アクセス許可を付与する、アクセス制御ポリシーを介してサービスに提供されます。 関連付けられたサブスクリプションの代理として実行されている Azure のサービスは、そのサブスクリプション内のそのサービス ID で構成できます。 サービスでは、Azure Active Directory 認証を実行でき、サブスクリプションを代行するサービスとして認識される認証トークンを受け取れます。 このトークンを Key Vault に提示することにより、アクセスが付与されているキーを取得します。

暗号化キーを使用した操作として、複合化、暗号化、キーのラップ解除、キーのラップ、確認、署名、取得、一覧表示、更新、作成、インポート、削除、バックアップ、復元のいずれかの操作へのアクセスをサービス ID に付与できます。

保存データの暗号化または復号化で使用するキーを取得するには、Resource Manager サービス インスタンスとして実行されるサービス ID は UnwrapKey (複合化のためのキーを取得するため) と WrapKey (新しいキーの作成時にキー コンテナーにキーを挿入するため) を取得する必要があります。


>[!NOTE] 
>Key Vault の承認の詳細については、[Azure Key Vault ドキュメント](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault)のキー コンテナーのセキュリティ保護に関するページを参照してください。 

**長所**

- 使用するキーに対する完全な制御 – 暗号化キーは、ユーザーの管理下にあるユーザーの Key Vault で管理されます。
- 1 つのマスターで複数のサービスを暗号化する機能
- サービスの全体的な管理モデルとキーの管理を分離できる
- 地域間共通のサービスとキーの保存先を定義できる

**短所**

- キーへのアクセス管理の全責任をユーザーが負う
- キーのライフサイクル管理の全責任をユーザーが負う
- 追加のセットアップと構成のオーバーヘッド

#### <a name="server-side-encryption-using-service-managed-keys-in-customer-controlled-hardware"></a>ユーザーが管理するハードウェア上でサービスが管理するキーを使用したサーバー側暗号化

保存時のデータの暗号化と、Microsoft の管理外の独自のリポジトリでキーを管理することが要件である場合、一部の Azure サービスでは Host Your Own Key (HYOK) キー管理モデルを有効にできます。 このモデルでは、サービスは、外部のサイトからキーを取得する必要があるため、パフォーマンスと可用性の保証が影響を受け、構成はより複雑になります。 さらに、暗号化および複合化操作中にサービスは DEK にアクセスできないため、このモデルのセキュリティ保証は、全体的に、キーが Azure Key Vault でユーザーによって管理されている場合と似ています。  この結果、特定のキー管理の要件がない限り、このモデルはほとんどの組織に適していません。 これらの制限により、ほとんどの Azure サービスは、ユーザーが制御するハードウェア上でサーバーが管理するキーを使用したサーバー側暗号化をサポートしていません。

##### <a name="key-access"></a>キーへのアクセス

ユーザーが制御するハードウェアでサービスが管理するキーを使用したサーバー側の暗号化を使用する場合は、キーはユーザーが構成したシステム上で管理されます。 このモデルをサポートする Azure サービスでは、ユーザーが提供したキー ストアに対しセキュリティ保護された接続を確立できます。

**長所**

- 使用されるルート キーを完全に制御 – 暗号化キーはユーザーが提供した ストアによって管理されます
- 1 つのマスターで複数のサービスを暗号化する機能
- サービスの全体的な管理モデルとキーの管理を分離できる
- 地域間共通のサービスとキーの保存先を定義できる

**短所**

- キーの保存、セキュリティ、パフォーマンスおよび可用性の全責任を負う
- キーへのアクセス管理の全責任を負う
- キーのライフサイクル管理の全責任を負う
- 多額のセットアップ、構成および継続的なメンテナンスのコスト
- ユーザーのデータ センターと Azure データ センター間のネットワークの可用性への依存度が高くなる。

## <a name="encryption-at-rest-in-microsoft-cloud-services"></a>Microsoft クラウド サービスでの保存時の暗号化

Microsoft Cloud サービスは、IaaS、PaaS、SaaS のすべての 3 つのクラウド モデルで使用されます。 以下は、各モデルにこれらがどのように対応するかを示した例です。

- Software as a Server (SaaS) と呼ばれるソフトウェア サービスでは、Office 365 などのクラウドで提供されるアプリケーションが利用できます。
- アプリケーションでお客様がクラウドを活用できるプラットフォームでは、ストレージ、分析、サービス バス機能にクラウドが使用されています。
- インフラストラクチャ サービス、別称サービスとしてのインフラストラクチャ (IaaS) では、顧客がクラウドでホスティングされているオペレーティング システムやアプリケーションをデプロイし、他のクラウド サービスを活用することもあります。

### <a name="encryption-at-rest-for-saas-customers"></a>SaaS 顧客ためのの保存時の暗号化

サービスとしてのソフトウェア (SaaS) の顧客は、通常は、保存時の暗号化を有効化しているか、各サービスで利用できます。 Office 365 サービスでは、保存時の暗号化をお客様が確認または有効化できるオプションが提供されています。 Office 365 サービスの詳細については、Office 365 のデータ暗号化テクノロジを参照してください。

### <a name="encryption-at-rest-for-paas-customers"></a>PaaS 顧客のための保存時の暗号化

サービスとしてのプラットフォーム (PaaS) 顧客のデータは、通常、顧客データを格納するために使用される、アプリケーションの実行環境と、Azure リソース プロバイダーに存在します。 保存時の暗号化オプションを確認するには、下記のお使いのストレージとアプリケーション プラットフォームの表を参照してください。 サポートされている場合は、各リソース プロバイダーで保存時の暗号化を有効にする手順へのリンクが記載されています。 

### <a name="encryption-at-rest-for-iaas-customers"></a>IaaS 顧客のための保存時の暗号化

サービスとしてのインフラストラクチャ (IaaS) のユーザーは、さまざまなサービスとアプリケーションを使用できます。 IaaS サービスは、 Azure Disk Encryption を使用して、Azure がホスティングされている仮想マシンや VHD で保存時の暗号化を有効化できます。 

#### <a name="encrypted-storage"></a>暗号化されたストレージ

PaaS と同様、IaaS ソリューションは、保存時のデータの暗号化を保存する他の Azure サービスを利用できます。 この場合は、それぞれ使用している Azure サービスによって提供されるように、保存時の暗号化の暗号化を有効にできます。 次の表には、保存時暗号化モデルがサポートされている主要なストレージ、サービスとアプリケーション プラットフォームおよびモデルが挙げられています。 サポートされている場合は、各リソース プロバイダーで保存時の暗号化を有効にする手順へのリンクが記載されています。 

#### <a name="encrypted-compute"></a>暗号化されたコンピューティング

完全な保存時暗号化ソリューションでは、データが暗号化されていない形態で持続化されることは許されません。 データをメモリに読み込むサーバー上で、Windows ページファイル、クラッシュ ダンプ、アプリケーションで実行されるすべてのログ記録など、さまざまな方法でローカルに保持できます。 IaaS アプリケーションは、Azure IaaS 仮想マシン (Windows または Linux) および仮想ディスクで Azure Disk Encryption を使用して、このデータが保存時に暗号化されているかどうかを確認できます。 

#### <a name="custom-encryption-at-rest"></a>保存データのカスタム暗号化

IaaS アプリケーションでは、可能な限り、Azure Disk Encryption および使用される Azure サービスによって提供される 保存時暗号化オプションを活用することをお勧めします。 不規則な暗号化の要件または Azure を使用しないストレージなどの場合、IaaS アプリケーションの開発者は、保存時の暗号化を独自に実装する必要があります。 IaaS ソリューションの開発者は、特定の Azure コンポーネントを活用することで Azure の管理機能と顧客からの期待に応える機能を統合できます。 特に、開発者は、Azure Key Vault サービスを使用することで、セキュリティ保護されたキーの保存場所と、ほとんどの Azure プラットフォーム サービスで提供されている一貫したキー管理オプションを顧客に提供できます。 また、カスタム ソリューションでは、Azure のマネージド サービス ID を使用すれば、サービス アカウントが暗号化キーにアクセスできるようになります。 Azure Key Vault およびマネージド サービス ID の管理に関する開発者向け情報については、それぞれの SDK を参照してください。

## <a name="azure-resource-providers-encryption-model-support"></a>Azure リソース プロバイダー暗号化モデルのサポート

各 Microsoft Azure サービスでは、1 つ以上の保存時暗号化モデルをサポートしています。 ただし、一部のサービスでは、1 つ以上の暗号化モデルが適用できない場合があります。 さらに、サービスによって異なるスケジュールでこれらのシナリオへのサポートが発表されることがあります。 このセクションでは、このドキュメントの作成時点での、主な Azure データ ストレージ サービスの保存時暗号化サポートについて説明します。

### <a name="azure-disk-encryption"></a>Azure Disk Encryption

サービスとしての Azure インフラストラクチャ (IaaS) 機能を使用しているお客様は、Azure Disk Encryption を通して IaaS 仮想マシンの保存時の暗号化を実行できます。 Azure Disk encryption の詳細については、[Azure Disk encryption ドキュメント](https://docs.microsoft.com/azure/security/azure-security-disk-encryption)を参照してください。

#### <a name="azure-storage"></a>Azure Storage

Azure の Blob、およびファイルは、サーバー側暗号化のシナリオおよびユーザーによる暗号化データ (クライアント側暗号化) の保存時暗号化をサポートします。

- サーバー側: Azure Blob ストレージを使用しているお客様は、各 Azure ストレージ リソースのアカウントで保存時の暗号化を有効にできます。 サーバー側の暗号化を有効にすると、アプリケーションに対し透過的に暗号化されます。 詳細については、「[保存データ向け Azure Storage Service Encryption ](https://docs.microsoft.com/azure/storage/storage-service-encryption)」をご覧ください。
- クライアント側: Azure Blob のクライアント側暗号化がサポートされています。 クライアント側の暗号化を使用した場合、お客様は暗号化された BLOB としてデータをアップロードします。 キー管理は、ユーザーによって行われます。 詳細については、「[クライアント側の暗号化と Azure Key Vault for Microsoft Azure Storage](https://docs.microsoft.com/azure/storage/storage-client-side-encryption)」を参照してください。


#### <a name="sql-azure"></a>SQL Azure

現在、SQL Azure では、Microsoft の管理サービス側とクライアント側の暗号化のシナリオについて保存時の暗号化をサポートしています。

サーバー側の暗号化は Transparent Data Encryption と呼ばれる SQL 機能を通して提供されています。 SQL Azure ユーザーが有効化すると、TDE キーは自動的に作成および管理されます。 保存時の暗号化は、データベース レベルおよびサーバー レベルで有効にすることができます。 2017 年 6 月の時点で [Transparent Data Encryption (TDE)](https://msdn.microsoft.com/library/bb934049.aspx) は、新しく作成されたデータベースで既定で有効に設定されています。

SQL Azure データのクライアント側の暗号化は、[Always Encrypted](https://msdn.microsoft.com/library/mt163865.aspx) 機能を通してサポートされています。 Always Encrypted では、クライアントによって作成、保存されたキーが使用されます。 ユーザーは、Windows 証明書ストア、Azure Key Vault、またはローカルのハードウェア セキュリティ モジュール (HSM) にマスター キーを格納できます。 SQL ユーザーは、SQL Server Management Studio を使用して、どの列を何を使用して暗号化するかを選択できます。

|                                  |                |                     | **暗号化モデル**             |                              |        |
|----------------------------------|----------------|---------------------|------------------------------|------------------------------|--------|
|                                  |                |                     |                              |                              | **クライアント** |
|                                  | **キー管理** | **サービス管理キー** | **ユーザーが Key Vault で管理** | **ユーザーが管理するオンプレミス** |        |
| **ストレージとデータベース**            |                |                     |                              |                              |        |
| ディスク (IaaS)                      |                | -                   | あり                          | はい*                         | -      |
| SQL Server (IaaS)                |                | あり                 | あり                          | あり                          | あり    |
| SQL Azure (PaaS)                 |                | あり                 | Preview                      | -                            | あり    |
| Azure Storage (ブロック/ページ Blob) |                | あり                 | Preview                      | -                            | あり    |
| Azure Storage (ファイル)            |                | あり                 | -                            | -                            | -      |
| Azure Storage (テーブル、キュー)   |                | -                   | -                            | -                            | あり    |
| Cosmos DB (ドキュメント DB)          |                | あり                 | -                            | -                            | -      |
| StorSimple                       |                | あり                 | -                            | -                            | あり    |
| バックアップ                           |                | -                   | -                            | -                            | あり    |
| **インテリジェンスおよび分析**       |                |                     |                              |                              |        |
| Azure Data Factory               |                | あり                 | -                            | -                            | -      |
| Azure Machine Learning           |                | -                   | Preview                      | -                            | -      |
| Azure Stream Analytics           |                | あり                 | -                            | -                            | -      |
| HDInsights (Azure Blob Storage)  |                | あり                 | -                            | -                            | -      |
| HDInsights (Data Lake Storage)   |                | あり                 | -                            | -                            | -      |
| Azure Data Lake Store            |                | あり                 | あり                          | -                            | -      |
| Azure Data Catalog               |                | あり                 | -                            | -                            | -      |
| Power BI                         |                | あり                 | -                            | -                            | -      |
| **IoT サービス**                     |                |                     |                              |                              |        |
| IoT Hub                          |                | -                   | -                            | -                            | あり    |
| Service Bus                      |                | あり (Premium 階層)              | -                            | -                            | あり    |
| Event Hubs                       |                | あり             | -                            | -                            | -      |


## <a name="conclusion"></a>まとめ

Azure サービス内で保存される顧客データの保護は、Microsoft にとってきわめて重要です。 すべての Azure ホステッド サービスは、保存時暗号化オプションを提供することを目的としています。 Azure Storage、SQL Azure や主要な分析およびインテリジェンス サービスなどの基本的なサービスでは、すでに保存時暗号化オプションが提供されています。 これらのサービスの一部では、ユーザーが管理するキーおよびクライアント側暗号化、サービス管理型のキーや暗号化のいずれかがサポートされています。 Microsoft Azure サービスは、保存時の暗号化の可用性を大きく広げており、今後はプレビューや一般的な可用性のための新しいオプションを提供することが計画されています。

