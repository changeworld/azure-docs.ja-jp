---
title: コンピューティングとストレージのオプション - Azure Database for PostgreSQL - フレキシブル サーバー
description: この記事では、Azure Database for PostgreSQL - フレキシブル サーバーのコンピューティングとストレージのオプションについて説明します。
author: sunilagarwal
ms.author: sunila
ms.service: postgresql
ms.topic: conceptual
ms.date: 02/19/2021
ms.openlocfilehash: 93a439c814b6bac630c5231f46d7a022a131687c
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "105608172"
---
# <a name="compute-and-storage-options-in-azure-database-for-postgresql---flexible-server"></a>Azure Database for PostgreSQL - フレキシブル サーバーのコンピューティングとストレージのオプション

> [!IMPORTANT]
> Azure Database for PostgreSQL - フレキシブル サーバーはプレビュー段階です

Azure Database for PostgreSQL サーバーは、次の 3 つの価格レベルのいずれかで作成できます: バースト可能、汎用、メモリ最適化。 価格レベルは、プロビジョニングできる仮想コアでのコンピューティング量、仮想コアあたりのメモリ、およびデータの格納に使用されるストレージ テクノロジによって区別されています。 リソースはすべて、PostgreSQL サーバー レベルでプロビジョニングされます。 1 つのサーバーには 1 つ以上のデータベースを含めることができます。

| リソース/レベル | **バースト可能** | **汎用** | **メモリ最適化** |
|:---|:----------|:--------------------|:---------------------|
| 仮想コア | 1、2 | 2、4、8、16、32、48、64 | 2、4、8、16、32、48、64 |
| 仮想コアあたりのメモリ | 変数 | 4 GB | 6.75 ～ 8 GB |
| ストレージ サイズ | 32 GB ～ 16 TB | 32 GB ～ 16 TB | 32 GB ～ 16 TB |
| データベース バックアップのリテンション期間 | 7 ～ 35 日間 | 7 ～ 35 日間 | 7 ～ 35 日間 |

価格レベルを選択する場合は、まず次の表を参考にしてください。

| Pricing tier | 対象のワークロード |
|:-------------|:-----------------|
| バースト可能 | 最大の CPU を継続的に必要とするわけではないワークロードに最適です。 |
| General Purpose | 負荷分散されたコンピューティングとメモリ、およびスケーラブルな I/O スループットを必要とする大部分のビジネス ワークロード。 たとえば、Web アプリやモバイル アプリ、その他のエンタープライズ アプリケーションをホストするためのサーバーが挙げられます。|
| メモリ最適化 | 高速トランザクション処理と高いコンカレンシーを実現するためのインメモリ パフォーマンスを必要とする、高パフォーマンス データベース ワークロード。 たとえば、リアルタイム データと高パフォーマンスなトランザクション アプリや分析アプリを処理するためのサーバーが挙げられます。|

サーバーを作成したら、コンピューティング レベル、仮想コア数、ストレージ サイズを数秒で増やしたり減らしたりできます。 また、他の調整とは関係なく、バックアップの保持期間の長さを調整することもできます。 詳細については、「[リソースのスケール](#scale-resources)」セクションを参照してください。

## <a name="compute-tiers-vcores-and-server-types"></a>コンピューティング レベル、仮想コア、およびサーバーの種類

コンピューティング リソースは、そのレベル、仮想コア、およびメモリ サイズに基づいて選択することができます。 仮想コアは、基になるハードウェアの論理 CPU を表します。

使用可能なサーバーの種類の詳細な仕様は次のとおりです。

| SKU 名             | 仮想コア | メモリ サイズ | サポートされる最大 IOPS | サポートされる最大 I/O 帯域幅 |
|----------------------|--------|-------------|--------------------|-----------------------------|
| **バースト可能**        |        |             |                    |                             |
| B1ms                 | 1      | 2 GiB       | 640                | 15 MiB/秒                  |
| B2s                  | 2      | 4 GiB       | 1280               | 15 MiB/秒                  |
| **汎用**  |        |             |                    |                             |
| D2s_v3               | 2      | 8 GiB       | 3200               | 48 MiB/秒                  |
| D4s_v3               | 4      | 16 GiB      | 6400               | 96 MiB/秒                  |
| D8s_v3               | 8      | 32 GiB      | 12800              | 192 MiB/秒                 |
| D16s_v3              | 16     | 64 GiB      | 18000              | 384 MiB/秒                 |
| D32s_v3              | 32     | 128 GiB     | 18000              | 750 MiB/秒                 |
| D48s_v3              | 48     | 192 GiB     | 18000              | 750 MiB/秒                 |
| D64s_v3              | 64     | 256 GiB     | 18000              | 750 MiB/秒                 |
| **メモリ最適化** |        |             |                    |                             |
| E2s_v3               | 2      | 16 GiB      | 3200               | 48 MiB/秒                  |
| E4s_v3               | 4      | 32 GiB      | 6400               | 96 MiB/秒                  |
| E8s_v3               | 8      | 64 GiB      | 12800              | 192 MiB/秒                 |
| E16s_v3              | 16     | 128 GiB     | 18000              | 384 MiB/秒                 |
| E32s_v3              | 32     | 256 GiB     | 18000              | 750 MiB/秒                 |
| E48s_v3              | 48     | 384 GiB     | 18000              | 750 MiB/秒                 |
| E64s_v3              | 64     | 432 GiB     | 18000              | 750 MiB/秒                 |

## <a name="storage"></a>ストレージ

プロビジョニングするストレージは、使用している Azure Database for PostgreSQL サーバーで使用可能なストレージ容量です。 ストレージは、データベース ファイル、一時ファイル、トランザクション ログ、および PostgreSQL サーバー ログに使用されます。 プロビジョニングするストレージの合計容量によって、ご利用のサーバーで使用できる I/O 容量も決まります。

ストレージは、次の固定サイズで使用できます。

| ディスク サイズ | IOPS |
|:---|:---|
| 32 GiB | プロビジョニング済み 120、最大 3,500 |
| 64 GiB | プロビジョニング済み 240、最大 3,500 |
| 128 GiB | プロビジョニング済み 500、最大 3,500 |
| 256 GiB | プロビジョニング済み 1100、最大 3,500 |
| 512 GiB | プロビジョニング済み 2300、最大 3,500 |
| 1 TiB | 5,000 |
| 2 TiB | 7,500 |
| 4 TiB | 7,500 |
| 8 TiB | 16,000 |
| 16 TiB | 18,000 |

IOPS は VM の種類によっても制限されることに注意してください。 サーバーの種類に関係なく任意のストレージ サイズを選択できますが、仮想コア数が少ないサーバーを選択する場合は特に、ストレージが提供するすべての IOPS を使用できない可能性があります。

サーバーの作成中および作成後に、ストレージ容量を追加できます。

>[!NOTE]
> ストレージはスケールアップのみ可能で、スケールダウンすることはできません。

ご自身の I/O 使用量を監視するには、Azure Portal または Azure CLI コマンドを使用します。 監視すべき関連メトリックは、[容量の上限、ストレージの割合、ストレージの使用量、および IO の割合](concepts-monitoring.md)です。

### <a name="maximum-iops-for-your-configuration"></a>構成の最大 IOPS

|SKU 名            |ストレージ サイズ (GiB)                       |32 |64 |128 |256 |512  |1,024|2,048|4,096|8,192 |16,384|
|--------------------|------------------------------------------|---|---|----|----|-----|-----|-----|-----|------|------|
|                    |最大 IOPS                              |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|**バースト可能**       |                                          |   |   |    |    |     |     |     |     |      |      |
|B1ms                |640 IOPS                                  |120|240|500 |640*|640* |640* |640* |640* |640*  |640*  |
|B2s                 |1280 IOPS                                 |120|240|500 |1100|1280*|1280*|1280*|1280*|1280* |1280* |
|**汎用** |                                          |   |   |    |    |     |     |     |     |      |      |
|D2s_v3              |3200 IOPS                                 |120|240|500 |1100|2300 |3200*|3200*|3200*|3200* |3200* |
|D4s_v3              |6,400 IOPS                                |120|240|500 |1100|2300 |5000 |6400*|6400*|6400* |6400* |
|D8s_v3              |12,800 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |12800*|12800*|
|D16s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|D32s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|D48s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|D64s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|**メモリ最適化**|                                          |   |   |    |    |     |     |     |     |      |      |
|E2s_v3              |3200 IOPS                                 |120|240|500 |1100|2300 |3200*|3200*|3200*|3200* |3200* |
|E4s_v3              |6,400 IOPS                                |120|240|500 |1100|2300 |5000 |6400*|6400*|6400* |6400* |
|E8s_v3              |12,800 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |12800*|12800*|
|E16s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|E32s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|E48s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |
|E64s_v3             |18,000 IOPS                               |120|240|500 |1100|2300 |5000 |7500 |7500 |16000 |18000 |

\* のマークが付いている場合、IOPS は選択した VM の種類によって制限されます。 それ以外の場合、IOPS は選択したストレージ サイズによって制限されます。

>[!NOTE]
> ディスク レベルのバーストにより、メトリックに高い IOPS が示される場合があります。 詳細については、[ドキュメント](../../virtual-machines/disk-bursting.md#disk-level-bursting)を参照してください。 

### <a name="maximum-io-bandwidth-mibsec-for-your-configuration"></a>構成の最大 I/O 帯域幅 (MiB/秒)

|SKU 名            |ストレージ サイズ、GiB                             |32 |64 |128 |256 |512  |1,024|2,048|4,096|8,192 |16,384|
|--------------------|----------------------------------------------|---|---|----|----|-----|-----|-----|-----|------|------|
|                    |**ストレージ帯域幅、MiB/秒**                |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|**バースト可能**       |                                              |   |   |    |    |     |     |     |     |      |      |
|B1ms                |10 MiB/秒                                    |10*|10*|10* |10* |10*  |10*  |10*  |10*  |10*   |10*   |
|B2s                 |15 MiB/秒                                    |15*|15*|15* |15* |15*  |15*  |15*  |15*  |15*   |15*   |
|**汎用** |                                              |   |   |    |    |     |     |     |     |      |      |
|D2s_v3              |48 MiB/秒                                    |25 |48*|48* |48* |48*  |48*  |48*  |48*  |48*   |48*   |
|D4s_v3              |96 MiB/秒                                    |25 |50 |96* |96* |96*  |96*  |96*  |96*  |96*   |96*   |
|D8s_v3              |192 MiB/秒                                   |25 |50 |100 |125 |150  |192* |192* |192* |192*  |192*  |
|D16s_v3             |384 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |384*  |384*  |
|D32s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|D48s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|D64s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|**メモリ最適化**|                                              |   |   |    |    |     |     |     |     |      |      |
|E2s_v3              |48 MiB/秒                                    |25 |48*|48* |48* |48*  |48*  |48*  |48*  |48*   |48*   |
|E4s_v3              |96 MiB/秒                                    |25 |50 |96* |96* |96*  |96*  |96*  |96*  |96*   |96*   |
|E8s_v3              |192 MiB/秒                                   |25 |50 |100 |125 |150  |192* |192* |192* |192*  |192*  |
|E16s_v3             |384 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |384*  |384*  |
|E32s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|E48s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |
|E64s_v3             |750 MiB/秒                                   |25 |50 |100 |125 |150  |200  |250  |250  |500   |750   |

\* のマークが付いている場合、I/O 帯域幅は選択した VM の種類によって制限されます。 それ以外の場合、I/O 帯域幅は選択したストレージ サイズによって制限されます。

### <a name="reaching-the-storage-limit"></a>容量の上限に到達

ストレージの上限に達すると、サーバーはエラーを返し始め、それ以上の変更ができなくなります。 これにより、バックアップや WAL アーカイブなどの他の運用アクティビティにも問題が発生する可能性があります。

この状況を回避するために、ストレージの使用率が 95% に達したとき、または使用可能な容量が 5 GiB 未満の場合は、サーバーが **読み取り専用モード** に自動的に切り替わります。

使用中のディスク領域を積極的に監視して、ストレージが不足している場合は事前にディスク サイズを増やすことが推奨されます。 サーバーのストレージがディスク不足に近づいたときに通知するアラートを設定できるため、ディスク不足に陥る問題を回避できます。 詳細については、[アラートの設定方法](howto-alert-on-metrics.md)に関するドキュメントをご覧ください。


### <a name="storage-auto-grow"></a>ストレージの自動拡張

ストレージの自動拡張は、フレキシブル サーバーではまだ使用できません。

## <a name="backup"></a>バックアップ

サービスによって、サーバーのバックアップが自動的に取得されます。 7 日間から 35 日間までの保持期間を選択できます。 バックアップの詳細については[概念に関するアーティクル](concepts-backup-restore.md) をご覧ください。

## <a name="scale-resources"></a>リソースのスケール

ご自身のサーバーの作成後、仮想コア数、コンピューティング レベル、ストレージ量、およびバックアップの保持期間を個別に変更できます。 仮想コアの数は増やしたり減らしたりできます。 バックアップのリテンション期間は、7 日から 35 日の間でスケールアップまたはスケールダウンできます。 ストレージ サイズは増やすことのみ可能です。 ポータルまたは Azure CLI を使用して、リソースのスケーリングを実行できます。

> [!NOTE]
> ストレージ サイズは増やすことのみ可能です。 増加後に、より小さなストレージ サイズに戻すことはできません。

仮想コアまたはコンピューティング レベルの数を変更すると、サーバーが再起動され、新しいサーバーの種類が有効になります。 システムが新しいサーバーに切り替わるほんの短時間、新しい接続を確立できず、コミットされていないすべてのトランザクションがロールバックされます。 この時間の長さは変動しますが、ほとんどの場合 1 分未満です。 ストレージのスケーリングは同じように機能し、短時間での再起動も必要です。

バックアップの保持期間の変更はオンライン操作です。

## <a name="pricing"></a>価格

最新の料金情報については、サービスの[料金ページ](https://azure.microsoft.com/pricing/details/PostgreSQL/)を参照してください。 必要な構成のコストについては、[Azure Portal](https://portal.azure.com/#create/Microsoft.PostgreSQLServer) で、選択したオプションに基づいて表示される **[価格レベル]** タブの月額コストを確認します。 Azure サブスクリプションを取得していない場合は、Azure 料金計算ツールを使用して見積もり価格を確認できます。 [Azure 料金計算ツール](https://azure.microsoft.com/pricing/calculator/)の Web サイトで **[項目の追加]** を選択し、 **[データベース]** カテゴリを展開し、 **[Azure Database for PostgreSQL]** を選択してオプションをカスタマイズします。

## <a name="next-steps"></a>次のステップ

- [ポータルで PostgreSQL サーバーを作成](how-to-manage-server-portal.md)する方法を確認します。
- [サービスの制限](concepts-limits.md)について確認します。