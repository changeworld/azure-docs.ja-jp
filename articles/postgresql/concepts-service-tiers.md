---
title: "Azure Database for PostgreSQL の価格レベル"
description: "Azure Database for PostgreSQL の価格レベル"
services: postgresql
author: kamathsun
ms.author: sukamat
manager: jhubbard
editor: jasonwhowell
ms.custom: mvc
ms.service: postgresql
ms.topic: article
ms.date: 11/03/2017
ms.openlocfilehash: 9de2d93735942903df9320741baadf2c934bd7ab
ms.sourcegitcommit: 09a2485ce249c3ec8204615ab759e3b58c81d8cd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/13/2018
---
# <a name="azure-database-for-postgresql-options-and-performance-understand-whats-available-in-each-pricing-tier"></a>Azure Database for PostgreSQL のオプションとパフォーマンス: 各価格レベルで使用できる内容
Azure Database for PostgreSQL を作成するときは、そのサーバーに割り当てられたリソースを構成する 3 つの主な選択肢を決定します。 これらの選択肢は、サーバーのパフォーマンスとスケールに影響します。
- [価格レベル] 
- コンピューティング ユニット
- ストレージ (GB)

各価格レベルには、幅広いパフォーマンス レベル (コンピューティング ユニット数) があり、ワークロードの要件に応じて選択できます。 パフォーマンス レベルが高くなるほど提供されるサーバー リソースは増え、スループットが高くなるように設計されています。 同じ価格レベル内のサーバー パフォーマンス レベルは、事実上アプリケーションのダウンタイムなしで変更できます。

> [!IMPORTANT]
> サービスがパブリック プレビューの間は、保証されるサービス レベル アグリーメント (SLA) はありません。

Azure Database for PostgreSQL サーバー内では、1 つ以上のデータベースを作成できます。 サーバーごとに 1 つのデータベースを作成してデータベースがすべてのサーバー リソースを利用できるようにするか、複数のデータベースを作成してサーバー リソースを共有させるようにするかを選択できます。 

## <a name="choose-a-pricing-tier"></a>Choose a pricing tier
プレビュー段階の Azure Database for PostgreSQL で利用できる価格レベルは、Basic と Standard の 2 つです。 Premium レベルはまだ利用できませんが、近日対応予定です。 

次の表では、各種アプリケーション ワークロードに最適な価格レベルの例を示します。

| [価格レベル] | 対象のワークロード |
| :----------- | :----------------|
| Basic | IOPS 保証なしのスケーラブルなコンピューティングおよびストレージを必要とする小規模なワークロードに最適です。 たとえば、開発やテスト、使用頻度の低い小規模なアプリケーションに使用するサーバーがこれに該当します。 |
| 標準 | 高スループットの IOPS 保証が必要なクラウド アプリケーションで主に使用されるオプション。 たとえば、Web アプリケーションや分析アプリケーションがこれに該当します。 |
| Premium | トランザクションと IO の待機時間を短くする必要があるワークロードに最適です。 多くの同時実行ユーザーに対して最適なサポートを提供します。 ミッション クリティカルなアプリケーションをサポートするデータベースに適用できます。<br />Premium 価格レベルはプレビュー段階では利用できません。 |

価格レベルを決定するには、まず、ワークロードに IOPS 保証が必要かどうかを確認します。 必要な場合は、Standard 価格レベルを使用します。

| **価格レベルの内容** | **Basic** | **Standard** |
| :------------------------ | :-------- | :----------- |
| 最大コンピューティング ユニット数 | 100 | 800 | 
| 最大合計ストレージ | 1 TB (テラバイト) | 1 TB (テラバイト) | 
| ストレージ IOPS 保証 | 該当なし | [はい] | 
| 最大ストレージ IOPS | 該当なし | 3,000 | 
| データベース バックアップのリテンション期間 | 7 日 | 35 日 | 

プレビュー期間中は、サーバーを作成した後に価格レベルを変更することはできません。 将来的には、価格レベル間でのサーバーのアップグレードまたはダウングレードが可能になる予定です。

## <a name="understand-the-price"></a>価格について
新しい Azure Database for PostgreSQL を [Azure Portal](https://portal.azure.com/#create/Microsoft.PostgreSQLServer) 内で作成して、**[価格レベル]** ページをクリックすると、選択したオプションに基づいて毎月のコストが表示されます。 Azure サブスクリプションを取得していない場合は、Azure 料金計算ツールを使用して見積もり価格を確認してください。 [Azure 料金計算ツール](https://azure.microsoft.com/pricing/calculator/)の Web サイトにアクセスし、**[項目の追加]** をクリックして、**[データベース]** カテゴリを展開し、**[Azure Database for PostgreSQL]** を選択してオプションをカスタマイズします。

## <a name="choose-a-performance-level-compute-units"></a>パフォーマンス レベル (コンピューティング ユニット数) の選択
Azure Database for PostgreSQL サーバーの価格レベルが決定したら、必要なコンピューティング ユニット数を選択して、パフォーマンス レベルを決定します。 Web ワークロードや分析ワークロードで、より多くのユーザーの同時実行性が求められるアプリケーションの場合、200 または 400 コンピューティング ユニットから始め、必要に応じて徐々に調整するとよいでしょう。 

コンピューティング ユニットは、単一の Azure Database for PostgreSQL サーバーで使用できることが保証される CPU 処理スループットの測定値で、 CPU とメモリ リソースを組み合わせた測定値です。  詳細については、[コンピューティング ユニットの説明](concepts-compute-unit-and-storage.md)に関するページをご覧ください。

### <a name="basic-pricing-tier-performance-levels"></a>Basic 価格レベルのパフォーマンス レベル:

| **パフォーマンス レベル** | **50** | **100** |
| :-------------------- | :----- | :------ |
| 最大コンピューティング ユニット数 | 50 | 100 |
| 含まれるストレージ サイズ | 50 GB | 50 GB |
| 最大サーバー ストレージ サイズ\* | 1 TB (テラバイト) | 1 TB (テラバイト) |

### <a name="standard-pricing-tier-performance-levels"></a>Standard 価格レベルのパフォーマンス レベル:

| **パフォーマンス レベル** | **100** | **200** | **400** | **800** |
| :-------------------- | :------ | :------ | :------ | :------ |
| 最大コンピューティング ユニット数 | 100 | 200 | 400 | 800 |
| 基本ストレージ サイズとプロビジョニング済み IOPS | 125 GB、<br/> 375 IOPS | 125 GB、<br/> 375 IOPS | 125 GB、<br/> 375 IOPS | 125 GB、<br/> 375 IOPS |
| 最大サーバー ストレージ サイズ\* | 1 TB (テラバイト) | 1 TB (テラバイト) | 1 TB (テラバイト) | 1 TB (テラバイト) |
| 最大サーバー プロビジョニング済み IOPS | 3,000 IOPS | 3,000 IOPS | 3,000 IOPS | 3,000 IOPS |
| GB あたりの最大サーバー プロビジョニング済み IOPS | GB あたり 3 IOPS 固定 | GB あたり 3 IOPS 固定 | GB あたり 3 IOPS 固定 | GB あたり 3 IOPS 固定 |

\* 最大サーバー ストレージ サイズは、サーバーのプロビジョニング済みストレージの最大サイズを意味します。

## <a name="storage"></a>Storage 
ストレージ構成は、Azure Database for PostgreSQL サーバーで使用可能なストレージ容量を定義します。 サービスによって使用されるストレージには、データベース ファイル、一時ファイル、トランザクション ログ、および PostgreSQL、サーバー ログが含まれています。 ストレージ構成を選択する場合には、データベースをホストする必要があるストレージのサイズと、パフォーマンス要件 (IOPS) を検討してください。

各価格レベルには、前述の表の「含まれるストレージ サイズ」に示すとおり、最小ストレージ容量が含まれています。 サーバーの作成時に、ストレージ容量を 125 GB ずつ、許容される最大ストレージ容量まで追加できます。 追加のストレージ容量は、コンピューティング ユニットの構成とは別に構成できます。 価格は、選択するストレージ容量に応じて変わります。

各パフォーマンス レベルの IOPS 構成は、選択した価格レベルとストレージ サイズに関連しています。 Basic レベルでは、IOPS 保証は提供されません。 Standard 価格レベルでは、IOPS は固定の 3:1 の割合で最大ストレージ サイズに比例してスケーリングします。 組み込まれている 125 GB のストレージでは、375 のプロビジョニング済み IOPS と、それぞれについて最大 256 KB の IO サイズが保証されます。 プロビジョニング済みの 3,000 IOPS を保証するために、最大 1 TB の追加ストレージを選択できます。

ストレージと IOPS の使用量を測定するには、Azure Portal でメトリック グラフを監視するか、Azure CLI コマンドを記述します。 監視すべき関連メトリックは、ストレージの上限、ストレージの割合、ストレージの使用量、および IO の割合です。

>[!IMPORTANT]
> プレビュー段階では、サーバー作成時にストレージ容量を選択します。 既存のサーバー上のストレージ サイズの変更は、現時点ではサポートされていません。 

## <a name="scaling-a-server-up-or-down"></a>サーバーのスケールアップまたはスケールダウン
Azure Database for PostgreSQL を作成するときは、まず価格レベルとパフォーマンス レベルを選択します。 後で、同一価格レベル内で、コンピューティング ユニット数を動的に増やしたり減らしたりできます。 Azure Portal で、サーバーの [価格レベル] ページからコンピューティング ユニット数を変更するか、「[Azure CLI での単一の PostgreSQL サーバーの監視とスケーリング](scripts/sample-scale-server-up-or-down.md)」の例に従ってスクリプトを実行します。

コンピューティング ユニットのスケールは、選択した最大ストレージ サイズとは無関係に行われます。

データベースのパフォーマンス レベルを変更すると、バックグラウンドで、元のサーバーのコピーが新しいパフォーマンス レベルで作成され、接続先がそのコピーに切り替えられます。 このプロセスでデータが失われることはありません。 新しいサーバーのコピーに切り替えるほんの少しの間データベースに接続できなくなるため、実行中の一部トランザクションがロールバックされる場合があります。 この時間はさまざまですが、平均 4 秒以内であり、99% 以上が 30 秒未満です。 接続が無効になった時点で多数のトランザクションが実行中の場合、この時間が長引くことがあります。

スケール プロセス全体にかかる時間は、変更前後のサーバーのサイズと価格レベルによって異なります。 たとえば、コンピューティング ユニット数を Standard 価格レベル内で変更しているサーバーの場合は、数分以内に完了します。 サーバーの新しいプロパティは、変更が完了するまで適用されません。

## <a name="next-steps"></a>次の手順
- コンピューティング ユニットの詳細については、[コンピューティング ユニットの説明](concepts-compute-unit-and-storage.md)に関するページをご覧ください
- [Azure CLI での単一の PostgreSQL サーバーの監視とスケーリング](scripts/sample-scale-server-up-or-down.md)の方法について
