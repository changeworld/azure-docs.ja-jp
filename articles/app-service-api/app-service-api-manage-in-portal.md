<properties 
	pageTitle="API アプリの管理" 
	description="Azure ポータルと Visual Studio のサーバー エクスプローラーを使用して Azure App Service API アプリを管理する方法について説明します。" 
	services="app-service\api" 
	documentationCenter="" 
	authors="tdykstra" 
	manager="wpickett" 
	editor="jimbe"/>

<tags 
	ms.service="app-service-api" 
	ms.workload="web" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na"
	ms.topic="article" 
	ms.date="09/08/2015" 
	ms.author="tdykstra"/>

# Azure App Service の API アプリの管理

この記事では、[Azure プレビュー ポータル](https://portal.azure.com/)を使用して API アプリの管理および監視タスクを実行する方法について説明します。実行できるタスクのいくつかを次に示します。

- 認証を構成する。 
- 自動スケールを有効にする。
- ログを表示する。
- API アプリから送信された要求の数と、API アプリによって使用されたデータの量を調べる。
- API アプリをバックアップし、アラートを作成する。
- ロールベースのアクセス セキュリティを構成する。

また、Visual Studio のサーバー エクスプローラー ウィンドウでいくつかの管理タスクを実行する方法についても説明します。

## Azure プレビュー ポータルの API アプリとゲートウェイのブレード

Azure App Service では、API アプリとは、Web サービスをホストするための追加の機能を持つ [Web アプリ](../app-service-web/app-service-web-overview.md)のことです。Azure ポータルには、API 固有の機能を管理するための **[API アプリ]** ブレードと、基になる Web アプリを管理するための **[API アプリ ホスト]** ブレードがあります。

少なくとも 1 つの API アプリを含むすべてのリソース グループでは、*ゲートウェイ*も使用されています。ゲートウェイはプロキシとして機能します。つまり、リソース グループ内のすべての API アプリの認証などの管理機能を処理します。API アプリと同様、ゲートウェイは、追加の機能を持つ Web アプリです。ゲートウェイを管理するための 2 つのポータル ブレードとして、ゲートウェイ固有の機能のための **[ゲートウェイ]** ブレードと、基になる Web アプリを管理するための **[ゲートウェイ ホスト]** ブレードがあります。

### [API アプリ] ブレードでのみ実行できるタスク

**[API アプリ]** ブレードは次のタスクに使用します。

- アクセス レベルの構成 - **[設定]、[アプリケーションの設定]** の順にクリックします。既定値は内部です。つまり、同じリソース グループに属する API アプリのみが API アプリを呼び出すことができます。詳細については、[API アプリの保護](app-service-api-dotnet-add-authentication.md)に関するページを参照してください。   
- 更新ポリシーの構成 - **[設定]、[アプリケーションの設定]** の順にクリックします。既定値は**オン**です。これは、API アプリの新しいバージョンがマーケットプレースに発行されたとき、重大な変更でない場合は API アプリが新しいバージョンに自動的に更新されることを意味します。  
- API アプリからの発信呼び出しの認証の構成 - **[設定]、[認証]** の順にクリックします。API アプリから認証を必要とする外部サービスを呼び出す場合、必要な構成値はここに入力します。たとえば、Dropbox コネクタでは、Dropbox サービスへのアクセスにクライアント ID とクライアント シークレットが必要になります。
- [RBAC](../role-based-access-control-configure.md) の構成 - **[設定]、[ユーザー]** の順にクリックします。ここで構成するユーザー アクセスでは、API アプリ固有の機能にアクセスできるユーザーのみを決定します。Web アプリの機能用に RBAC を構成するには、**[API アプリ ホスト]** ブレードを使用します。通常は、API アプリと API アプリ ホストの RBAC 設定では、同期を保つようにします。あるユーザーに API アプリへのアクセスを許可し、API アプリ ホストへのアクセスは禁止する場合、API アプリ ホストに実際に関連する **[API アプリ]** ブレードの機能は使用できなくなります。
- API 定義の表示 - **[概要]** セクションの **[API 定義]** をクリックして、API アプリで公開されるメソッドのリストを表示します。
- [Hybrid Connection Manager をインストールします](../app-service-logic/app-service-logic-hybrid-connection-manager.md)。ハイブリッド接続マネージャーを使用すると、SQL Server、SAP などのオンプレミスのシステムに接続できます。このハイブリッド接続は、Azure Service Bus を使用して接続し、Azure リソースとオンプレミスのリソースの間のセキュリティを制御します。

### [API アプリ] ブレードと [API アプリ ホスト] ブレードの両方で実行できるタスク 

**[API アプリ]** ブレードでは、基になる Web アプリに関連する多くのタスクを実行できます。実行できるタスクの例を次に示します。

* API アプリをホストする Web アプリの停止、開始、再起動。  
- **[要求およびエラー]** を選択して、よく知られている HTTP エラー コード (200、400、500 HTTP ステータス コードなど) を含むさまざまなパフォーマンス メトリックを追加。
- 応答時間、API アプリに対して実行された要求の数、受信したデータの量、送信したデータの量の表示。 
- メトリックに対して指定したしきい値を超過した場合の電子メール アラートの作成。 
- API アプリによって使用されている **CPU** 量、現在の**使用量クォータ** (MB 単位)、コスト階層に基づく最大データ使用量の表示。
- API アプリを実行した場合の潜在的なコストを判断するのに役立つ**費用の見積もり**の表示。
- アプリケーション ログとその他の IIS ログ (Web サーバー ログ、FREB ログなど) の表示。
- **[プロセス]** を選択してプロセス エクスプローラーを表示。プロセス エクスプローラーには、Web インスタンスとそのプロパティ (スレッド数、メモリ使用量など) が表示されます。

これらのタスクは、**[API アプリ ホスト]** ブレードからも実行できます。この 2 つのブレードが多くの同じ UI を共有している理由はこのためです。たとえば、**[API アプリ]** ブレードの **[停止]**、**[開始]**、**[再起動]** の各ボタンには、**[API アプリ ホスト]** ブレードの **[停止]**、**[開始]**、**[再起動]** の各ボタンとまったく同じ効果があります。同様に、**[API アプリ]** ブレードの監視情報には、**[API アプリ ホスト]** ブレードと同じ情報が表示されます。

**[API アプリ ホスト]** ブレードにはない、**[API アプリ]** ブレードのみで提供されている機能は、前のセクションに記載しています。

### [API アプリ ホスト] ブレードでのみ実行できるタスク

**[API アプリ ホスト]** ブレードは、すべての Web アプリを対象とするあらゆるタスクに使用します。

### [ゲートウェイ] ブレードでのみ実行できるタスク

**[ゲートウェイ]** ブレードは、次のタスクに使用します。

- API アプリの着信呼び出し用の認証プロバイダーの構成 - **[設定]、[ID]** の順にクリックします。ゲートウェイでリソース グループ内の API アプリの呼び出しを許可する前にユーザーを認証する必要がある場合、必要な構成値はここに入力します。詳細については、[Azure App Service での SaaS コネクタの構成とテスト](app-service-api-connnect-your-app-to-saas-connector.md)に関するトピックを参照してください。 
- [RBAC](../role-based-access-control-configure.md) の構成 - **[設定]、[ユーザー]** の順にクリックします。ここで構成するユーザー アクセスでは、すべての Web アプリで共有される機能ではなく、ゲートウェイ固有の機能にアクセスできるユーザーのみを決定します。

### [ゲートウェイ] ブレードと [ゲートウェイ ホスト] ブレードの両方で実行できるタスク 

[API アプリ] ブレードと [API アプリ ホスト] ブレードの場合と同様に、[ゲートウェイ] ブレードと [ゲートウェイ ホスト] ブレードは、UI を共有します。

### [ゲートウェイ ホスト] ブレードでのみ実行できるタスク

**[ゲートウェイ ホスト]** ブレードは、すべての Web アプリを対象とするあらゆるタスクに使用します。

## <a id="navigate"></a>API アプリとゲートウェイのブレードに移動する方法 

**[API アプリ]** ブレードに移動する方法の 1 つに、Azure ポータルの参照機能があります。ポータルのホーム ページで、**[参照]、[API Apps]** の順にクリックして、管理できるすべての API アプリを参照します。

![](./media/app-service-api-manage-in-portal/browse.png)

![](./media/app-service-api-manage-in-portal/apiappslist.png)

### [API アプリ] ブレードへの移動

**[API Apps]** 一覧のブレード内の行をクリックすると、ポータルに **[API アプリ]** ブレードが表示されます。

![](./media/app-service-api-manage-in-portal/apiappblade.png)

### [API アプリ ホスト] ブレードへの移動

**[API アプリ ホスト]** ブレードに移動するには、**[API アプリ]** ブレードの **[API アプリ ホスト]** をクリックします。

![](./media/app-service-api-manage-in-portal/apiappbladetohost.png)

![](./media/app-service-api-manage-in-portal/apiapphostbladenocallouts.png)

### [ゲートウェイ] ブレードへの移動

**[ゲートウェイ]** ブレードに移動するには、**[API アプリ]** ブレードの **[ゲートウェイ]** リンクをクリックします。
   
![](./media/app-service-api-manage-in-portal/apiappbladegotogateway.png)

![](./media/app-service-api-manage-in-portal/gatewaybladenocallout.png)

### [ゲートウェイ ホスト] ブレードへの移動

**[ゲートウェイ ホスト]** ブレードに移動するには、**[ゲートウェイ]** ブレードの **[ゲートウェイ ホスト]** リンクをクリックします。
   
![](./media/app-service-api-manage-in-portal/gatewaybladetohost.png)

![](./media/app-service-api-manage-in-portal/gatewayhost.png)

## Visual Studio のサーバー エクスプローラーでの API アプリへのアクセス

Visual Studio の**サーバー エクスプローラー**には、リモート デバッグ セッションの開始、ストリーミング ログの表示、メニュー エントリのクリックによるポータルの API アプリ ブレードの表示の機能が用意されています。

サーバー エクスプローラーで API アプリにアクセスするには、図に示すように、**[Azure]、[App Service]、[リソース グループ名]、[API アプリ名]** の順にクリックします。

![](./media/app-service-api-manage-in-portal/se.png)

## 次のステップ

この記事では、Azure ポータルを使用して API アプリの管理タスクを実行する方法について説明しました。API アプリのギャラリーからインストールする API アプリについては、「[組み込み API アプリとコネクタの管理と監視を実行する](../app-service-logic/app-service-logic-monitor-your-connectors.md)」を参照してください。

コマンド ラインを使用して API アプリを管理する方法については、この記事の左側 (幅の広いブラウザー ウィンドウの場合) または上部 (幅の狭いブラウザー ウィンドウの場合) に表示されているメニューの **[自動化]** セクションの記事を参照してください。

<!---HONumber=Sept15_HO2-->