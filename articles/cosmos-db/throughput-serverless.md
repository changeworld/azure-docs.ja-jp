---
title: Azure Cosmos DB でプロビジョニングされたスループットとサーバーレスのどちらかを選択する方法
description: ワークロードに対してプロビジョニングされたスループットとサーバーレスのどちらかを選択する方法について説明します。
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 08/19/2020
ms.openlocfilehash: d16343864d9602d644b31d34a2b66e39211b6ece
ms.sourcegitcommit: 3bdeb546890a740384a8ef383cf915e84bd7e91e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/30/2020
ms.locfileid: "93079341"
---
# <a name="how-to-choose-between-provisioned-throughput-and-serverless"></a>プロビジョニングされたスループットとサーバーレスのどちらかを選択する方法
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

Azure Cosmos DB は、[プロビジョニングされたスループット](set-throughput.md)と[サーバーレス](serverless.md)の 2 つの異なる容量モードで利用できます。 どちらのモードでもまったく同じデータベース操作を実行できますが、これらの操作に対して課金される方法は大きく異なります。 次の動画では、これらのモードの主な違いと、さまざまな種類のワークロードにどのように適合するかについて説明します。

> [!VIDEO https://www.youtube.com/embed/CgYQo6uHyt0]

> [!NOTE]
> 現在、サーバーレスは Azure Cosmos DB Core (SQL) API でのみサポートされています。

## <a name="detailed-comparison"></a>詳細な比較

| 条件 | プロビジョニング スループット | サーバーレス |
| --- | --- | --- |
| 状態 | 一般公開 | プレビュー段階 |
| 最も適しているデータ | 予測可能なパフォーマンスを必要とするミッションクリティカルなワークロード | 小規模から中規模の重要ではない低トラフィックのワークロード |
| しくみ | 各コンテナーに対して、1 秒あたりの[要求ユニット](request-units.md)数で表されるスループットの量をプロビジョニングします。 毎秒、この量の要求ユニットをデータベース操作に使用できます。 プロビジョニングされたスループットは、手動で更新することも、[自動スケール](provision-throughput-autoscale.md)で自動的に調整することもできます。 | コンテナーに対してデータベース操作を実行し、容量をプロビジョニングする必要はありません。 |
| アカウントあたりの制限 | Azure リージョンの最大数: 無制限 | Azure リージョンの最大数:1 |
| コンテナーあたりの制限 | 最大スループット: 無制限<br>最大ストレージ: 無制限 | 最大スループット:5,000 RU/秒<br>最大ストレージ:50 GB |
| パフォーマンス | SLA に記載される 99.99% から 99.999% の可用性<br>SLA に記載されるポイント読み取りと書き込み 10 ms 未満の待機時間<br>SLA に記載される 99.99% の保証スループット | SLA に記載される 99.9% から 99.99% の可用性<br>SLO に記載されるポイント読み取り 10 ms 未満、書き込み 30 ms 未満の待機時間<br>SLO に記載される 95% のバースタビリティ |
| 課金モデル | 消費された RU 数に関係なく、プロビジョニングされた RU/ 秒に対して 1 時間ごとに課金が行われます。 | データベース操作で消費される RU の量に対して時間単位で課金が行われます。 |

> [!IMPORTANT]
> サーバーレスの制限事項の一部は、サーバーレスが一般公開されるときに緩和または削除される可能性があります。 **お客様のフィードバック** を参考にして決定されます。 サーバーレス エクスペリエンスの詳細については、[azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) までお問い合わせください。

## <a name="burstability-and-expected-consumption"></a>バースタビリティと予想される消費量

状況によっては、特定のワークロードに対してプロビジョニングされたスループットとサーバーレスのどちらを選択する必要があるのかがはっきりしない可能性があります。 以下を見積もることで、これを決定できます。

- ワークロードの **バースタビリティ** 要件。1 秒間に消費する必要がある RU の最大量です
- **予想される消費量** 全体。1 か月間に消費する可能性がある RU の合計数です (これは、 [こちら](plan-manage-costs.md#estimating-serverless-costs)に記載される表を参考にして見積もることができます)

ワークロードが 1 秒あたり 5,000 RU を超えるバーストを必要とする場合は、サーバーレス コンテナーではこの制限を超えてバーストすることができないため、プロビジョニングされたスループットを選択する必要があります。 そうでない場合は、予想される消費量に基づいて、両方のモードのコストを比較できます。

**例 1** : ワークロードは、最大 10,000 RU/秒までバーストし、1 か月間に合計 20,000,000 RU を消費することが予想されます。

- プロビジョニングされたスループット モードのみが 10,000 RU/秒のスループットを実現できます

**例 2** : ワークロードは、最大 500 RU/秒までバーストし、1 か月間に合計 20,000,000 RU を消費することが予想されます。

- プロビジョニングされたスループット モードでは、500 RU/秒でコンテナーをプロビジョニングするため、$0.008 * 5 * 730 = **$29.20** の月額料金を支払うことになります
- サーバーレス モードでは、消費される RU に対する料金は $0.25 * 20 = **$5.00** になります

**例 3** : ワークロードは、最大 500 RU/秒までバーストし、1 か月間に合計 250,000,000 RU を消費することが予想されます。

- プロビジョニングされたスループット モードでは、500 RU/秒でコンテナーをプロビジョニングするため、$0.008 * 5 * 730 = **$29.20** の月額料金を支払うことになります
- サーバーレス モードでは、消費される RU に対する料金は $0.25 * 250 = **$62.50** になります

(これらの例では、ストレージ コストは考慮しておらず、2 つのモード間で同じとします)

> [!NOTE]
> 前の例で示したコストは、デモンストレーションのみを目的としています。 最新の価格情報については、[価格に関するページ](https://azure.microsoft.com/pricing/details/cosmos-db/)を参照してください。

## <a name="next-steps"></a>次のステップ

- [Azure Cosmos DB におけるスループットのプロビジョニング](set-throughput.md)について詳細を確認する
- [Azure Cosmos DB サーバーレス](serverless.md)について詳細を確認する
- [要求ユニット](request-units.md)の概念について理解を深める
