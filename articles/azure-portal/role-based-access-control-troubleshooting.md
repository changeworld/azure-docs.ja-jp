<properties 
	pageTitle="役割ベースのアクセス制御のトラブルシューティング" 
	description="役割ベースのアクセス制御でさまざまなリソース タイプを使用します。" 
	services="azure-portal"
	documentationCenter="na" 
	authors="stepsic-microsoft-com" 
	manager="terrylan" 
	editor=""/>

<tags 
	ms.service="azure-portal" 
	ms.workload="multiple" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="04/25/2015" 
	ms.author="stepsic"/>

# 役割ベースのアクセス制御のトラブルシューティング

## はじめに

[役割ベースのアクセス制御](../role-based-access-control-configure.md)は強力な機能で、Azure のリソースに対するきめ細かいアクセスを委任できます。つまり、まさに必要な権限を特定の人物に確実に付与できます。しかし、Azure リソースのリソース モデルが複雑で、どのようなアクセス許可を付与すればよいのか正確に把握しにくい場合もあります。

このドキュメントでは、Azure Portal で新しい役割を使用する場合に想定されることについて説明します。このリリースでは、* 所有者、* 共同作成者、* 閲覧者という 3 つの役割が事前に構築され、組み込まれています。

所有者と共同作成者には管理操作に対するフル アクセス許可があります。両者の違いは、共同作成者が他のユーザーやグループにアクセス権を付与できないことです。閲覧者の役割はさらに興味深いので、以下で詳しく考慮します。正確にアクセス権を付与する方法の詳細については、[この記事を参照してください](../role-based-access-control-configure.md)。

## App Service ワークロード

### 読み取りアクセス権のみ所有 

1 つの Web アプリに対する読み取りアクセス権をユーザーに付与する場合、またはそのアクセス権を付与されているのが自分だけという場合、思いがけず一部の機能が無効になっているという可能性があります。以下の管理機能には、Web アプリに対する**書き込み**アクセス権 (共同作成者または所有者) が必要なので、読み取り専用のシナリオでは利用できません。
 
1. コマンド (開始や停止など)
2. 一般的な構成、スケール設定、バックアップ設定、監視設定などの設定の変更。
3. 発行資格情報およびその他の機密情報 (アプリケーション設定や接続文字列など) へのアクセス。
4. ストリーミング ログ
5. 診断ログの構成
6. コンソール (コマンド プロンプト)
7. アクティブな最新のデプロイ (ローカル Git の継続的デプロイの場合)
8. 所要時間の見積もり
9. Web テスト
10. 仮想ネットワーク (書き込みアクセス権を持つユーザーが仮想ネットワークを事前に構成している場合のみ閲覧者が参照できる)。
 
これらのいずれかのタイルにアクセスできない場合、Web アプリに対する共同作成者アクセス権が必要です。

### 関連リソースの処理
 
相互作用する数種類のリソースがあると、Web アプリは複雑になります。複数の Web サイトが対になっている代表的なリソース グループを以下に示します。

![Web アプリ リソース グループ](./media/role-based-access-control-troubleshooting/Website-resource-model.png)

結果として、Web サイトのみに対するアクセス権を付与すると、Web サイト ブレード上の多数の機能が完全に使用できなくなります。
 
1. 以下の項目には、Web サイトに対応する **アプリ サービス プラン**に対するアクセス権が必要です。  
    * Web アプリの料金レベル (Free や Standard など) の表示。
    * スケールの構成 (つまり、インスタンスの数、仮想マシンのサイズ、自動スケールの設定)。
    * クォータ (ストレージ、帯域幅、CPU など)。
2. 以下の項目には、Web サイトが含まれる**リソース グループ**全体に対するアクセス権が必要です。  
    * SSL の証明書とバインディング (SSL 証明書は同じリソース グループや地理的な場所にあるサイト間で共有できるため)。
    * アラート ルール
    * 自動スケールの設定
    * Application Insights コンポーネント
    * Web テスト

## 仮想マシンのワークロード

Web アプリと同様、仮想マシン ブレード上の機能にも、仮想マシンかリソース グループ内の他のリソースに対する書き込みアクセス権が必要なものがあります。

仮想マシンには * ドメイン名、* 仮想ネットワーク、* ストレージ アカウント、* アラート ルールという関連リソースがあります。

1. 以下の項目には、仮想マシンに対する**書き込み**アクセス権が必要です。  
    * エンドポイント
    * IP アドレス
    * ディスク
    * 拡張機能
2. 以下には、仮想マシンと、その仮想マシンが含まれる**リソース グループ** (とドメイン名) の両方に対する書き込みアクセス権が必要です。  
    * 可用性セット
    * 負荷分散セット
    * アラート ルール
    
これらのいずれかのタイルにアクセスできない場合、管理者に問い合わせてリソース グループに対する共同作成者アクセス権を得る必要があります。

<!---HONumber=July15_HO4-->