---
title: Project Acoustics の設計プロセスの概要
titlesuffix: Azure Cognitive Services
description: このドキュメントでは、Project Acoustics ワークフローの全 3 フェーズで設計の意図を表現する方法について説明します。
services: cognitive-services
author: kegodin
manager: cgronlun
ms.service: cognitive-services
ms.component: acoustics
ms.topic: conceptual
ms.date: 08/17/2018
ms.author: kegodin
ms.openlocfilehash: 46e2e276086f836ff881fde1db6462f6e7788e22
ms.sourcegitcommit: 7824e973908fa2edd37d666026dd7c03dc0bafd0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/10/2018
ms.locfileid: "48901364"
---
# <a name="design-process-overview"></a>設計プロセスの概要
Project Acoustics ワークフローの全 3 フェーズ (ベイク前のシーン設定、音源配置、ベイク後設計) で設計の意図を表現できます。 プロセスでは、リバーブ ボリュームの配置に関連したマークアップはそれほど必要ありませんが、シーンの聞こえ方に対するデザイナーの制御は維持されています。

## <a name="pre-bake-design"></a>ベイク前の設計
ベイク前のシーン設定プロセスでは、音波シミュレーションに使用されるシーンとメタデータを生成します。これには、閉鎖、反射、残響を提供するためにシミュレーションに参加させるシーン要素の選択が含まれます。 シーンのメタデータは、各シーン要素の音響マテリアルの選択です。 音響マテリアルは、各サーフェスから反射される音エネルギーの量を制御します。

すべてのサーフェスの既定の吸収係数は 0.04 であり、これは高い反射率です。 シーン全体を通してさまざまなマテリアルの吸収係数を調整することによって、美的効果やゲームプレイ効果を達成できます。これは、シーンのある領域から別の領域への遷移がリスナーに聞こえるときに、リスナーにとって特に顕著です。 たとえば、暗くて残響の多い部屋から、明るくて残響のない屋外のシーンに遷移すると、遷移の影響が強まります。 この効果を達成するには、屋外シーンのマテリアルの吸収係数をさらに高く調整します。

室内の特定のマテリアルの残響時間はその吸収係数に反比例し、ほとんどのマテリアルの吸収値は 0.01 ～ 0.20 の範囲です。 吸収係数がこの範囲外の場合、非常に吸収性が高いマテリアルです。

![リバーブ時間グラフ](media/ReverbTimeGraph.png)

事前ベイクのコントロールについては、[ベイク UI のチュートリアル](bake-ui-walkthrough.md)で詳しく説明しています。

## <a name="sound-source-placement"></a>音源配置
実行時にボクセルとプローブ ポイントを表示すると、ボクセル化されたジオメトリ内に音源が滞留する問題のデバッグに役立ちます。 ボクセル グリッドとプローブ ポイントの表示を切り替えるには、シーン ビューの右上にある [Gizmos] メニューで、対応するチェック ボックスをオンにします。 音源が壁ボクセルの中にある場合、外のボクセルに移動します。

![[Gizmos] メニュー](media/GizmosMenu.png)  

ボクセル表示は、ゲーム内の視覚的構成要素に変換が適用されているかどうかの判別に役立ちます。 適用されている場合、**Acoustics Manager** をホストしている GameObject に同じ変換を適用します。

### <a name="voxel-size-discrepancies"></a>ボクセル サイズの相違点
どのシーン メッシュが音響のベイク処理に参加しているかを示すために使用されるボクセルのサイズは、デザイン時と実行時のビューで異なることに注意してください。 この違いは、選択したシミュレーション頻度の品質/粒度には影響しません。どちらかといえばボクセル化シーンのランタイム使用の副産物です。 実行時に、シミュレーション ボクセルはソースの場所間の補間をサポートするために「調整」されます。 これにより、設計時の音源の配置を、シミュレーション ボクセル サイズが許可するよりもシーン メッシュの近い位置にできます。音響的に処理されるメッシュを含むボクセル内の音源は音を発生させないからです。

Unity プラグインによって視覚化されたものとして、デザイン (ベイク前) ボクセルとランタイム (ベイク後) ボクセルの違いを示す 2 つのイメージを次に示します。

デザイン時のボクセル:

![VoxelsDesignTime](media/VoxelsDesignTime.png)

ランタイム ボクセル:

![VoxelsRuntime](media/VoxelsRuntime.png)

ボクセル メッシュが正確にアーキテクチャ/構造シーン メッシュを表すかどうかについての判断は、調整されたボクセルのランタイム視覚化ではなく、デザイン モード ボクセルを使用して行う必要があります。

## <a name="post-bake-design"></a>ベイク後設計
ベイク結果は、シーン全体のソースとリスナーの全位置ペアの閉鎖および残響パラメーターとして ACE ファイルに保存されます。 この物理的に正確な結果はそのままプロジェクトに使用でき、設計の出発点に適しています。 ベイク後設計プロセスでは、ベイク結果パラメーターを実行時に変換するための規則を指定します。

### <a name="distance-based-attenuation"></a>距離ベースの減衰
**Microsoft Acoustics** Unity 立体化プラグインによって提供されるオーディオ DSP は、Unity Editor に組み込まれているソース単位かつ距離ベースの減衰を尊重します。 距離ベースの減衰のコントロールは、音源の **[Inspector]** パネルで、**[3D Sound Settings]** 下の **[Audio Source]** コンポーネント内にあります。

![距離減衰](media/distanceattenuation.png)

Acoustics は、プレイヤーの位置を中心とした「シミュレーション リージョン」ボックス内の計算を実行します。 音源がプレーヤーから距離があり、このシミュレーション リージョンの外部にある場合、ボックス内のジオメトリのみがサウンド伝達 (オクルージョンを引き起こすなど) に影響します。これはオクルダーがプレーヤーの近辺にあるときに非常に良く機能します。 ただし、プレーヤーがオープン スペースにあり、オクルダーが離れた音源の近くにある場合に、サウンドできますになる非現実的にディスオクルージョンされることがあります。 推奨される回避策は、そのような場合にサウンド減衰が約 45 m (プレーヤーからボックスの端までの既定の水平方向の距離) で 0 になるようにすることです。

### <a name="tuning-scene-parameters"></a>シーン パラメーターの調整
すべてのソースのパラメーターを調整するには、Unity の**オーディオ ミキサー**でチャンネル ストリップをクリックし、**[Acoustics Mixer]** エフェクトでパラメーターを調整します。

![ミキサーのカスタマイズ](media/MixerParameters.png)

### <a name="tuning-source-parameters"></a>ソース パラメーターの調整
**AcousticsSourceCustomization** スクリプトをソースにアタッチすることで、そのソースのパラメーターを調整できます。 スクリプトをアタッチするには、**[Inspector]** パネルの下部にある **[Add Component]** をクリックし、**[Scripts] > [Acoustics Adjust]** に移動します。 スクリプトには、次の 6 つのコントロールがあります。

![AcousticsAdjust](media/AcousticsAdjust.png)

* **Enable Acoustics** - このソースに音響を適用するかどうかを制御します。 チェックしない場合、ソースは HRTF で立体化されますが、音響はありません。つまり、障害も閉鎖もなく、レベルや減衰時間などの動的な残響パラメーターもありません。 ただし、残響は固定のレベルと減衰時間で適用されます。
* **Occlusion** - 音響システムによって計算されたオクルージョン dB レベルに乗数を適用します。 この乗数が 1 より大きい場合、オクルージョンは誇張され、値が 1 未満の場合はオクルージョン効果はわずかになり、値 0 だとオクルージョンは無効になります。
* **Transmission (dB)** -ジオメトリでの転送 (dB) による減衰を設定します。 このスライダーを最下位のレベルに設定すると、転送は無効になります。 Acoustics は、シーン ジオメトリ (ポータリング) の周囲に到着すると、初期の乾いたオーディオを空間化します。 転送により、視線方向に空間化される追加の乾いたオーディオが到着します。 ソースの距離減衰曲線も適用されることに注意してください。
* **Wetness (dB)** -ソースからの距離に応じてリバーブの強さを dB で調整します。 正の値は残響を大きくし、負の値はより乾いた音にします。 曲線エディターを起動するには、曲線制御 (緑の線) をクリックします。 左クリックによりポイントを追加し、それらのポイントをドラッグして目的の関数を形成することで曲線を変更します。 x 軸はソースからの距離であり、y 軸は dB 単位のリバーブ調整です。 曲線の編集の詳細については、[Unity のマニュアル](https://docs.unity3d.com/Manual/EditingCurves.html)を参照してください。 曲線を既定にリセットするには、**[Wetness]** を右クリックして **[Reset]** を選択します。
* **Decay Time Scale** - 減衰時間の乗数を調整します。 たとえば、ベイク結果が 750 ミリ秒の減衰時間を指定する一方で、この値が 1.5 に設定されている場合、ソースに適用される減衰時間は 1,125 ミリ秒です。
* **Outdoorness** - ソースの残響が「屋外」でどのように響くかの、音響システムの見積もりに基づいて追加の調整を行います。 これを 1 に設定すると、ソースは常に完全に屋外での響きになります。-1 に設定するとソースは屋内での響きになります。

ソースが異なれば、特定の美的またはゲームプレイ効果を達成するために必要な設定も異なる場合があります。 会話は 1 つの例です。 人間の耳は音声の残響に波長が合っていますが、多くの場合、ゲームプレイのために会話が理解できる必要があります。 会話を非物語世界にしなくてもこれを次の組み合わせによって説明できます。**[Wetness]** を下方向に動かし、**[Perceptual Distance Warp]** パラメーターを下記の説明に従って調整し、壁を通って伝わるいくらかのドライ オーディオ ブーストのために **[Transmission]** を追加し、**[Occlusion]** を 1 から引き下げて、ポータルからさらにサウンドが到達するようにします。

**AcousticsAdjustExperimental** スクリプトをソースに添付すると、そのソースの追加の実験的なチューニング パラメーターが有効になります。 スクリプトを添付するには、**[Inspector]** パネルの下部にある **[Add Component]** をクリックし、**[Scripts] > [Acoustics Adjust Experimental]** に移動します。 現在、次の 1 つの実験コントロールがあります。

![AcousticsAdjustExperimental](media/AcousticsAdjustExperimental.png)

* **Perceptual Distance Warp**-ドライ ウェット比率の計算に使用される距離に指数ワープを適用します。 音響システムは、スペース全体でのウェット レベルを計算します。これは距離に応じてならだかに変化し、知覚距離の手がかりを提供します。1 より大きいワープ値を指定すると、距離関連のリバーブ レベルを増すことでこの効果が誇張され、サウンドは「遠くに」聞こえます。一方ワープ値を 1 未満にすると、距離ベースのリバーブの変化はわずかになり、サウンドはより「近くにある」ように聞こえます。

