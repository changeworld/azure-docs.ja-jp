---
title: Azure Percept DK を無線で更新する
description: Azure Percept DK の更新プログラムを無線で受信する方法について説明します
author: mimcco
ms.author: mimcco
ms.service: azure-percept
ms.topic: how-to
ms.date: 02/18/2021
ms.custom: template-how-to
ms.openlocfilehash: b8f9e6f4bc091abbd1bb08ecbd649c1411e5ab20
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2021
ms.locfileid: "102095393"
---
# <a name="update-your-azure-percept-dk-over-the-air"></a>Azure Percept DK を無線で更新する

Device Update for IoT Hub を使用して無線で Azure Percept DK のキャリア ボードを更新する方法について学習するには、このガイドに従ってください。

## <a name="import-your-update-file-and-manifest-file"></a>更新ファイルとマニフェスト ファイルをインポートします。

> [!NOTE]
> 既に更新プログラムをインポートしてある場合は、「**デバイス更新グループを作成する**」に直接進むことができます。

1. Azure Percept デバイスに使用している Azure IoT Hub に移動します。 左側のメニュー パネルで、 **[デバイスの自動管理]** の下にある **[デバイスの更新プログラム]** を選択します。
 
1. 画面の上部に複数のタブが表示されます。 **[更新]** タブを選択します。
 
1. **[Ready to Deploy]\(デプロイの準備完了\)** ヘッダーの下にある **[+ Import New Update]\(+ 新しい更新プログラムのインポート\)** を選択します。
 
1. **[Select Import Manifest File]\(インポート マニフェスト ファイルの選択\)** および **[Select Update Files]\(更新ファイルの選択\)** の下のボックスをクリックして、適切なマニフェスト ファイル (.json) および 1 つの更新ファイル (.swu) を選択します。 Azure Percept デバイス用のこれらの更新ファイルは、[こちら](https://go.microsoft.com/fwlink/?linkid=2155625)にあります。
 
1. **[ストレージ コンテナーの選択]** の下にあるフォルダー アイコンまたはテキスト ボックスを選択し、適切なストレージ アカウントを選択します。
 
1. ストレージ コンテナーを既に作成してある場合は、それを再利用できます。 そうでない場合は、 **[+ コンテナー]** を選択して、OTA 更新プログラム用の新しいストレージ コンテナーを作成します。 使用するコンテナーを選択し、 **[選択]** をクリックします。
 
    >[!Note]
    >コンテナーがない場合は、コンテナーを作成するように求められます。
 
1. **[送信]** を選択してインポート プロセスを開始します。 送信プロセスには約 4 分かかります。
 
    >[!Note]
    >選択したストレージ コンテナーにアクセスするために、クロス オリジン要求 (CORS) ルールの追加を求められる場合があります。 **[Add rule and retry]\(ルールを追加して再試行\)** を選択して続行します。
 
    >[!Note]
    >イメージのサイズによっては、 **[送信中]** ページが表示されることがあります。 次のステップが表示されるまでに、最大 5 分間かかります。
    
1. インポート プロセスが開始され、 **[デバイスの更新プログラム]** ページの **[Import History]\(インポートの履歴\)** タブにリダイレクトされます。 インポート プロセスが完了するまでの進行状況を監視するには、 **[最新の情報に更新]** をクリックします。 更新プログラムのサイズによっては、これに数分以上かかることがあります (ピーク時には、インポート サービスに最大で 1 時間かかると想定してください)。

1. [状態] 列にインポートが正常に完了したと表示されたら、 **[Ready to Deploy]\(デプロイの準備完了\)** タブを選択し、 **[最新の情報に更新]** をクリックします。 インポートされた更新プログラムが一覧に表示されます。
 
## <a name="create-a-device-update-group"></a>デバイス更新グループを作成する
Device Update for IoT Hub では、Azure Percept DK の特定のグループに対する更新を対象にすることができます。 グループを作成するには、Azure IoT Hub 内のデバイスの対象セットにタグを追加する必要があります。

> [!NOTE]
> 既にグループを作成してある場合は、次の手順に直接進むことができます。

グループ タグの要件:
- 予約済みの値である **Uncategorized** を除き、タグには任意の値を追加できます。
- 255 文字を超えるタグ値は指定できません。
- タグ値に含めることができる特殊文字は、"."、"-"、"_"、"~" だけです。
- タグ名およびグループ名では、大文字と小文字が区別されます。
- デバイスに設定できるタグは 1 つだけです。 デバイスにタグを後から追加すると、前のタグはオーバーライドされます。
- デバイスは 1 つのグループにのみ属することができます。

1. デバイスにタグを追加します。
    1. 左側のナビゲーション ウィンドウの **[IoT Edge]** で Azure Percept DK を見つけて、その **[デバイス ツイン]** に移動します。
    1. 次のように、新しい **Device Update for IoT Hub** タグ値を追加します (```<CustomTagValue>``` を AzurePerceptGroup1 などの実際の値に変更します)。 デバイス ツインの [JSON ドキュメント タグ](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-device-twins#device-twins)の詳細についてご確認ください。

    ```
    "tags": {
    "ADUGroup": "<CustomTagValue>"
    },
    ```

 
1. **[保存]** をクリックして、書式の問題があれば解決します。
 
1. 既存の Azure IoT Hub タグを選択して、グループを作成します。
    1. Azure IoT Hub ページに戻ります。
    1. 左側のメニュー パネルで、 **[デバイスの自動管理]** の下にある **[デバイスの更新プログラム]** を選択します。
    1. **[グループ]** タブを選択します。このページには、Device Update に接続されている、グループ化されていないデバイスの数が表示されます。
    1. **[+ 追加]** を選択して、新しいグループを作成します。
    1. 一覧から IoT Hub タグを選択し、 **[送信]** をクリックします。
    1. グループが作成されると、更新のコンプライアンス チャートおよびグループの一覧が更新されます。 チャートには、さまざまなコンプライアンス対応状態 (**On latest update (最新の更新状態)** 、**New updates available (利用可能な新しい更新がある)** 、**Updates in progress (更新の進行中)** 、および **Not yet grouped (まだグループ化されていない)** ) にあるデバイスの数が表示されます。
 

## <a name="deploy-an-update"></a>更新プログラムをデプロイする
1. 新たに作成されたグループと共に、 **[使用可能な更新プログラム]** の下の一覧に新しい更新プログラムが表示されます (最新の情報に更新しなければならない場合があります)。 更新プログラムを選択します。
 
1. 対象デバイス グループとして、適切なデバイス グループが選択されていることを確認します。 デプロイの **[開始日]** と **[開始時刻]** を選択し、 **[デプロイの作成]** をクリックします。 

    >[!CAUTION]
    >開始時刻として過去の時刻を設定すると、すぐにデプロイがトリガーされます。
 
1. コンプライアンス チャートを確認します。 更新が進行中であると表示されます。
 
1. 更新が完了すると、コンプライアンス チャートに新しい更新状態が反映されます。
 
1. **[デバイスの更新プログラム]** ページの上部の **[デプロイ]** タブを選択します。
 
1. デプロイの詳細を表示するには、そのデプロイを選択します。 **[状態]** が **[成功]** に変わるまで、 **[最新の情報に更新]** をクリックしなければならない場合があります。

## <a name="next-steps"></a>次のステップ

これで、開発キットが正常に更新されました。 開発キットを使用して開発と操作を続けることができます。