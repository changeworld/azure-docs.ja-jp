---
title: デバッグ セッションの概念 (プレビュー)
titleSuffix: Azure Cognitive Search
description: Azure portal を介してアクセスされる、デバッグ セッションでは、エラーを特定して修正し、変更を確認し、AI エンリッチメント パイプラインでスキルセットに変更をプッシュできる環境などの IDE が提供されます。 デバッグ セッションはプレビュー段階です。
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 10/05/2020
ms.openlocfilehash: f666cc2f9d11b1e05d11ba266897e6fca3cd287e
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/29/2021
ms.locfileid: "92057622"
---
# <a name="debug-sessions-in-azure-cognitive-search"></a>Azure Cognitive Search でのデバッグ セッション

デバッグ セッションは、Azure portal の既存のスキルセットと連動するビジュアル エディターです。 デバッグ セッション内では、エラーを特定して解決し、変更を確認し、AI エンリッチメント パイプラインで運用スキルセットに変更をプッシュすることができます。

> [!Important]
> デバッグ セッションは、サービス レベル アグリーメントなしで提供されるプレビュー機能です。運用環境のワークロードに対してはお勧めできません。 詳しくは、[Microsoft Azure プレビューの追加使用条件](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)に関するページをご覧ください。
>

## <a name="using-debug-sessions"></a>デバッグ セッションの使用

セッションを開始すると、サービスによって、スキルセット、インデクサー、およびインデックスのコピーが作成されます。そこでは、スキルセットをテストするために 1 つのドキュメントが使用されます。 セッション内で行われた変更は、セッションに保存されます。 デバッグ セッション内で行われた変更は、その変更がコミットされない限り、運用スキルセットには影響しません。 変更をコミットすると、運用スキルセットが上書きされます。

デバッグ セッション中に、スキルセットを編集し、特定のドキュメントのコンテキストでエンリッチメント ツリー内の各ノードを検査および確認することができます。 エンリッチメント パイプラインの問題が解決されたら、変更をセッションに保存し、運用環境でスキルセットにコミットすることができます。 

エンリッチメント パイプラインにエラーがない場合は、デバッグ セッションを使用してドキュメントを段階的にエンリッチし、変更をコミットする前に各変更をテストして確認することができます。

## <a name="creating-a-debug-session"></a>デバッグ セッションの作成

デバッグ セッションを開始するには、データ ソース、スキルセット、インデクサー、およびインデックスを含む既存の AI エンリッチメント パイプラインが必要です。 デバッグ セッションを構成するには、セッションに名前を付け、インデクサーの実行中にスキルの実行をキャッシュするために使用される汎用ストレージ アカウントを指定する必要があります。 また、実行するインデクサーを選択する必要があります。 インデクサーには、データ ソース、スキルセット、およびインデックスへの参照が格納されています。 デバッグ セッションは、データ ソース内の最初のドキュメントに既定で設定されます。または、データ ソース内のドキュメントを指定してステップスルーすることもできます。

> :::image type="content" source="media/cognitive-search-debug/debug-session-new.png" alt-text="デバッグ セッションの作成":::

## <a name="debug-session-features"></a>デバッグ セッションの機能

デバッグ セッションは、選択されたドキュメントに対してスキルセットを実行することで開始されます。 デバッグ セッションでは、スキルセット内の各操作に関連付けられた追加のメタデータが記録されます。 パイプラインのスキルの実行で作成されたメタデータによって、次の一連の機能が通知されます。これらを使用すると、スキルセットに関する問題を特定して修正するのに役立ちます。

## <a name="ai-enrichments"></a>AI エンリッチメント

スキルが実行されるにつれ、ドキュメントを表す、エンリッチメントのツリーが大きくなります。 ツリーを使用して、スキルまたはエンリッチメントの出力を視覚化することで、実行されたすべてのエンリッチメントを包括的に確認できます。 ドキュメント全体を確認し、エンリッチメント ツリーの各ノードを調べることができます。 このパースペクティブにより、オブジェクトを形成しやすくなります。 この形式では、ツリー内の各ノードの種類、パス、および内容についての視覚的な手掛かりも得られます。

## <a name="skill-graph"></a>スキル グラフ

**[スキル グラフ]** ビューは、スキルセットを階層的に視覚化したものです。 グラフは、スキルが実行される順に上から下に示されます。 他のスキルの出力に依存するスキルは、グラフの下の方に示されます。 階層内の同じレベルのスキルを並列して実行することができます。 

グラフでスキルを選択すると、それに接続されているスキル、その入力を作成するノード、およびその出力を受け入れるノードが強調表示されます。 各スキル ノードでは、その種類、エラーまたは警告、および実行回数が表示されます。 **[スキル グラフ]** では、デバッグまたは強化するスキルを選択します。 スキルを選択すると、その詳細がグラフの右側のスキルの詳細ペインに表示されます。

> :::image type="content" source="media/cognitive-search-debug/skills-graph.png" alt-text="スキル グラフ":::

## <a name="skill-details"></a>スキルの詳細

スキルの詳細ペインには、特定のスキルを操作するための一連の領域が表示されます。その場合、スキルは **[スキル グラフ]** で強調表示されます。 スキルの設定の詳細を確認して編集することができます。 スキルの JSON 定義が指定されます。 スキルの実行およびエラーと警告の詳細も表示されます。 **[スキルの設定]** タブと **スキルの JSON エディター** を使用して、スキルを直接編集することができます。 [`</>`](#expression-evaluator) では、スキルの入力と出力の式を表示および編集するためのウィンドウが開きます。

スキルの設定ウィンドウの入れ子になった入力コントロールを使用して、プロジェクション用の複雑な図形、複合型フィールドの出力フィールド、またはスキルへの入力を構築できます。 **式エバリュエーター** と共に使用すると、入れ子になった入力で簡単なテストと確認の式ビルダーが提供されます。

## <a name="skill-execution-history"></a>スキルの実行履歴

スキルは、1 つのドキュメントのスキルセットで複数回実行できます。 たとえば、OCR スキルは、各ドキュメントから抽出されたイメージごとに 1 回実行されます。 スキルの詳細ペインの **[実行]** タブには、スキルの実行履歴が表示されます。これにより、スキルの各呼び出しをより深く調べることができます。 

実行履歴を使用すると、特定のエンリッチメントを、それを生成したスキルまでさかのぼって追跡できます。 スキルの入力をクリックすると、その入力を生成したスキルに移動します。 これにより、ダウンストリーム スキルで発生する可能性がある問題の根本原因を特定できます。 

潜在的な問題が特定されると、実行履歴には、特定の入力を生成したスキルへのリンクが表示され、スタックトレースのような機能が提供されます。 入力に関連付けられているスキルをクリックすると、バグを修正したり、特定の問題を追跡したりするスキルに移動します。

カスタム スキルを構築する場合や、カスタム スキルでエラーをデバッグする場合、実行履歴でスキル呼び出しの要求を生成するオプションがあります。

## <a name="enriched-data-structure"></a>エンリッチ処理されたデータ構造

**[エンリッチ処理されたデータ構造]** ペインには、スキルセットを介してドキュメントのエンリッチメントが表示され、各エンリッチメントのコンテキストと元のスキルの詳細が示されます。 **[式エバリュエーター]** を使用して、各エンリッチメントの内容を表示することもできます。

> :::image type="content" source="media/cognitive-search-debug/enriched-data-structure-display.png" alt-text="エンリッチ処理されたデータ構造":::

## <a name="expression-evaluator"></a>式エバリュエーター

**[式エバリュエーター]** では、任意のパスの値をすばやく見ることができます。 これにより、スキルやプロジェクションの入力またはコンテキストを更新する前に、パスを編集し、結果をテストできます。

## <a name="errorswarnings"></a>エラー/警告

このウィンドウには、デバッグ セッションでドキュメントに対してスキルセットが実行されるときに生成されるすべてのエラーと警告が表示されます。

## <a name="limitations"></a>制限事項

デバッグ セッションは、一般提供されているすべてのデータ ソースとほとんどのプレビュー データ ソースで機能します。 Cosmos DB の MongoDB API (プレビュー) および Cassandra API (プレビュー) は現在、サポートされていません。

## <a name="next-steps"></a>次のステップ

これでデバッグ セッションの要素について理解できたので、ハンズオン エクスペリエンスのチュートリアルを試してみましょう。

> [!div class="nextstepaction"]
> [デバッグ セッション機能の探索に関するチュートリアル](./cognitive-search-tutorial-debug-sessions.md)