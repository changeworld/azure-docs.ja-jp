---
title: IBM DB2 リソースにアクセスして管理する
description: Azure Logic Apps を使用して、自動化されたワークフローを構築することで、IBM DB2 リソースを読み取り、編集、更新、および管理します
services: logic-apps
ms.suite: integration
ms.reviewer: plarsen, logicappspm
ms.topic: conceptual
ms.date: 08/23/2018
tags: connectors
ms.openlocfilehash: 0f6e32056783a816d847db191de4fcdae2616ab7
ms.sourcegitcommit: f4f626d6e92174086c530ed9bf3ccbe058639081
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/25/2019
ms.locfileid: "75446176"
---
# <a name="access-and-manage-ibm-db2-resources-by-using-azure-logic-apps"></a>Azure Logic Apps を使用して IBM DB2 リソースにアクセスして管理する

[Azure Logic Apps](../logic-apps/logic-apps-overview.md) および [IBM DB2 コネクタ](/connectors/db2/)を使用すると、DB2 データベースに格納されたリソースに基づいて、自動化されたタスクとワークフローを作成できます。 ワークフローをデータベース内のリソースに接続して、データベース テーブルの読み取りや一覧表示、行の追加、行の変更、行の削除などを行うことができます。 データベースからの応答を取得して、出力を他のアクションで使用できるようにするアクションをロジック アプリに組み込むことができます。

この記事では、様々なデータベース操作を実行するロジック アプリを作成する方法を説明します。 ロジック アプリを初めて使用する場合は、「[Azure Logic Apps とは](../logic-apps/logic-apps-overview.md)」を参照してください。

## <a name="supported-platforms-and-versions"></a>サポートされているプラットフォームとバージョン

DB2 コネクタには、TCP/IP ネットワーク経由でリモート DB2 サーバーと通信する Microsoft クライアントが含まれています。 このコネクタを使用して、Azure 仮想化で実行されている IBM DB2 for Windows などのクラウド データベースにアクセスできます。 また、[オンプレミス データ ゲートウェイをインストールして設定](../logic-apps/logic-apps-gateway-connection.md)すれば、オンプレミス DB2 データベースにもアクセスできます。

IBM DB2 コネクタでは、次の IBM DB2 のプラットフォームとバージョンに加え、分散型リレーショナル データベース アーキテクチャ (DRDA) SQL アクセス マネージャー (SQLAM) バージョン 10 および 11 に対応している IBM DB2 互換製品をサポートしています。

| プラットフォーム | Version | 
|----------|---------|
| IBM DB2 for z/OS | 11.1、10.1 |
| IBM DB2 for i | 7.3、7.2、7.1 |
| IBM DB2 for LUW | 11、10.5 |
|||

## <a name="supported-database-operations"></a>サポートされるデータベース操作

IBM DB2 コネクタでサポートされる次のデータベース操作は、コネクタの対応するアクションにマップされています。

| データベース操作 | コネクタ アクション |
|--------------------|------------------|
| データベース テーブルの一覧表示 | テーブルを取得する |
| SELECT を使用した 1 つの行の読み取り | 行を取得する |
| SELECT を使用したすべての行の読み取り | 行を取得する |
| INSERT を使用した 1 つの行の追加 | 行を挿入する |
| UPDATE を使用した 1 つの行の編集 | 行を更新する |
| DELETE を使用した 1 つの行の削除 | 行を削除する |
|||

## <a name="prerequisites"></a>前提条件

* Azure サブスクリプション。 Azure サブスクリプションがない場合は、[無料の Azure アカウントにサインアップ](https://azure.microsoft.com/free/)してください。

* IBM DB2 データベース (クラウドベースまたはオンプレミス)

* [ロジック アプリの作成方法](../logic-apps/quickstart-create-first-logic-app-workflow.md)に関する基本的な知識

* DB2 データベースにアクセスするためのロジック アプリ。 このコネクタではアクションのみが提供されるため、ロジック アプリを開始するには、**繰り返し**トリガーなどのトリガーを別に選択してください。
この記事の例では、**Recurrence** トリガーを使用します。

<a name="add-db2-action"></a>

## <a name="add-db2-action---get-tables"></a>DB2 アクションを追加する - テーブルの取得

1. [Azure Portal](https://portal.azure.com) のロジック アプリ デザイナーでロジック アプリを開きます (まだ開いていない場合)。

1. トリガーで、 **[新しいステップ]** を選択します。

1. 検索ボックスに、フィルターとして「db2」と入力します。 この例では、アクション一覧の下で **[テーブルの取得 (プレビュー)]** アクションを選択します。

   ![選択アクション](./media/connectors-create-api-db2/select-db2-action.png)

   ここで、DB2 データベースの接続の詳細を指定するように求められます。

1. 手順に従って、[クラウド データベース](#cloud-connection)または[オンプレミス データベース](#on-premises-connection)の接続を作成します。

<a name="cloud-connection"></a>

## <a name="connect-to-cloud-db2"></a>クラウド DB2 に接続する

接続を設定するには、求められたら次に示す接続の詳細を指定し、 **[作成]** を選択して、ロジック アプリを保存します。

| プロパティ | 必須 | [説明] |
|----------|----------|-------------|
| **オンプレミスのゲートウェイ経由で接続** | いいえ | オンプレミス接続にのみ適用されます。 |
| **Connection Name** | はい | 「MyLogicApp-DB2-connection」など、接続の名前 |
| **[サーバー]** | はい | 「myDB2server.cloudapp.net:50000」など、DB2 サーバーのアドレスまたはエイリアスとコロンとポート番号 <p><p>**注**:この値は、IPv4 または IPv6 形式の TCP/IP アドレスまたはエイリアスを表す文字列の後に、コロンと TCP/IP ポート番号が続きます。 |
| **[データベース]** | はい | データベースの名前 <p><p>**注**:この値は、DRDA リレーショナル データベース名 (RDBNAM) を表す文字列です。 <p>- DB2 for z/OS は、16 バイトの文字列を受け入れます (database は "IBM DB2 for z/OS" の場所です)。 <br>- DB2 for i は、18 バイトの文字列を受け入れます (database は "IBM DB2 for i" リレーショナル データベースです)。 <br>- DB2 for LUW は、8 バイトの文字列を受け入れます。 |
| **ユーザー名** | はい | データベースのユーザー名 <p><p>**注**:この値の文字列は次のようにデータベースごとに長さが異なります。 <p><p>- DB2 for z/OS は、8 バイトの文字列を受け入れます。 <br>- DB2 for i は、10 バイトの文字列を受け入れます。 <br>- DB2 for Linux または DB2 for UNIX は、8 バイトの文字列を受け入れます。 <br>- DB2 for Windows は、30 バイトの文字列を受け入れます。 |
| **パスワード** | はい | データベースのパスワード |
||||

次に例を示します。

![クラウドベース データベースの接続の詳細情報](./media/connectors-create-api-db2/create-db2-cloud-connection.png)

<a name="on-premises-connection"></a>

## <a name="connect-to-on-premises-db2"></a>オンプレミスの DB2 に接続する

接続を作成する前に、オンプレミス データ ゲートウェイをインストールしておく必要があります。 それ以外の場合、接続の設定を完了できません。 インストールされたゲートウェイがある場合は、接続の詳細の指定に進み、 **[作成]** を選択します。

| プロパティ | 必須 | [説明] |
|----------|----------|-------------|
| **オンプレミスのゲートウェイ経由で接続** | はい | オンプレミス接続を行う場合に適用され、オンプレミス接続のプロパティを表示します。 |
| **Connection Name** | はい | 「MyLogicApp-DB2-connection」など、接続の名前 | 
| **[サーバー]** | はい | 「myDB2server:50000」など、DB2 サーバーのアドレスまたはエイリアスとコロンとポート番号 <p><p>**注**:この値は、IPv4 または IPv6 形式の TCP/IP アドレスまたはエイリアスを表す文字列の後に、コロンと TCP/IP ポート番号が続きます。 |
| **[データベース]** | はい | データベースの名前 <p><p>**注**:この値は、DRDA リレーショナル データベース名 (RDBNAM) を表す文字列です。 <p>- DB2 for z/OS は、16 バイトの文字列を受け入れます (database は "IBM DB2 for z/OS" の場所です)。 <br>- DB2 for i は、18 バイトの文字列を受け入れます (database は "IBM DB2 for i" リレーショナル データベースです)。 <br>- DB2 for LUW は、8 バイトの文字列を受け入れます。 |
| **認証** | はい | [基本] など、接続の認証の種類 <p><p>**注**:基本、または Windows (Kerberos) を含む一覧からこの値を選択します。 |
| **ユーザー名** | はい | データベースのユーザー名 <p><p>**注**:この値の文字列は次のようにデータベースごとに長さが異なります。 <p><p>- DB2 for z/OS は、8 バイトの文字列を受け入れます。 <br>- DB2 for i は、10 バイトの文字列を受け入れます。 <br>- DB2 for Linux または DB2 for UNIX は、8 バイトの文字列を受け入れます。 <br>- DB2 for Windows は、30 バイトの文字列を受け入れます。 |
| **パスワード** | はい | データベースのパスワード |
| **ゲートウェイ** | はい | インストールされているオンプレミス データ ゲートウェイの名前 <p><p>**注**:この値を一覧から選択します。一覧には Azure サブスクリプションおよびリソース グループにインストールされているすべてのデータ ゲートウェイが含まれています。 |
||||

次に例を示します。

![オンプレミス データベースの接続の詳細情報](./media/connectors-create-api-db2/create-db2-on-premises-connection.png)

### <a name="view-output-tables"></a>出力テーブルを表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

   ![実行履歴を表示する](./media/connectors-create-api-db2/run-history.png)

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[テーブルの取得]** アクションを展開します。

   ![アクションを展開する](./media/connectors-create-api-db2/expand-action-step.png)

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力にはテーブルの一覧が含まれます。

   ![出力テーブルを表示する](./media/connectors-create-api-db2/db2-connector-get-tables-outputs.png)

## <a name="get-row"></a>行を取得する

DB2 データベース テーブルの 1 レコードをフェッチするには、ロジック アプリで **[1 行を取得]** アクションを使用します。 このアクションは DB2 `SELECT WHERE` ステートメント (たとえば `SELECT FROM AREA WHERE AREAID = '99999'`) を実行します。

1. ロジック アプリで前に DB2 アクションを使用したことがない場合は、「[DB2 アクションを追加する -テーブルの取得](#add-db2-action)」セクションで手順を確認して、代わりに **[1 行を取得]** アクションを追加してから、ここに戻って続行します。

   **[1 行を取得]** アクションを追加すると、例のロジック アプリは次のように表示されます。

   ![[1 行を取得] アクション](./media/connectors-create-api-db2/db2-get-row-action.png)

1. 必須のプロパティ (*) すべての値を指定します。 テーブルを選択すると、アクションによって、そのテーブルのレコードに固有の関連プロパティが表示されます。

   | プロパティ | 必須 | [説明] |
   |----------|----------|-------------|
   | **[テーブル名]** | はい | 必要なレコードが含まれるテーブル (この例では "AREA") |
   | **[区分 ID]** | はい | 必要なレコードの ID (この例では "99999") |
   ||||

   ![テーブルの選択](./media/connectors-create-api-db2/db2-get-row-action-select-table.png)

1. 操作が完了したら、デザイナーのツールバーで、 **[保存]** を選択します。

### <a name="view-output-row"></a>出力行を表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[1 行を取得]** アクションを展開します。

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力には、指定した行が含まれます。

   ![出力行を表示する](./media/connectors-create-api-db2/db2-connector-get-row-outputs.png)

## <a name="get-rows"></a>行を取得する

DB2 データベース テーブルのすべてのレコードをフェッチするには、ロジック アプリで **[複数行を取得]** アクションを使用します。 このアクションは DB2 `SELECT` ステートメント (たとえば `SELECT * FROM AREA`) を実行します。

1. ロジック アプリで前に DB2 アクションを使用したことがない場合は、「[DB2 アクションを追加する -テーブルの取得](#add-db2-action)」セクションで手順を確認して、代わりに **[複数行を取得]** アクションを追加してから、ここに戻って続行します。

   **[複数行を取得]** アクションを追加すると、例のロジック アプリは次のように表示されます。

   ![[複数行を取得] アクション](./media/connectors-create-api-db2/db2-get-rows-action.png)

1. **テーブル名** 一覧を開き、必要なテーブル (この例では "AREA") を選択します。

   ![テーブルの選択](./media/connectors-create-api-db2/db2-get-rows-action-select-table.png)

1. 結果に対してフィルターまたはクエリを指定するには、 **[詳細オプションを表示する]** を選択します。

1. 操作が完了したら、デザイナーのツールバーで、 **[保存]** を選択します。

### <a name="view-output-rows"></a>出力行を表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[複数行を取得]** アクションを展開します。

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力には、指定したテーブルのすべてのレコードが含まれます。

   ![出力行を表示する](./media/connectors-create-api-db2/db2-connector-get-rows-outputs.png)

## <a name="insert-row"></a>行を挿入する

DB2 データベース テーブルに 1 レコードを追加するには、ロジック アプリで **[行の挿入]** アクションを使用します。 このアクションは DB2 `INSERT` ステートメント (たとえば `INSERT INTO AREA (AREAID, AREADESC, REGIONID) VALUES ('99999', 'Area 99999', 102)`) を実行します。

1. ロジック アプリで前に DB2 アクションを使用したことがない場合は、「[DB2 アクションを追加する -テーブルの取得](#add-db2-action)」セクションで手順を確認して、代わりに **[行の挿入]** アクションを追加してから、ここに戻って続行します。

   **[行の挿入]** アクションを追加すると、例のロジック アプリは次のように表示されます。

   ![[行の挿入] アクション](./media/connectors-create-api-db2/db2-insert-row-action.png)

1. 必須のプロパティ (*) すべての値を指定します。 テーブルを選択すると、アクションによって、そのテーブルのレコードに固有の関連プロパティが表示されます。

   この例ではプロパティは以下のとおりです。

   | プロパティ | 必須 | [説明] |
   |----------|----------|-------------|
   | **[テーブル名]** | はい | レコードを追加するテーブル (たとえば "AREA") |
   | **[区分 ID]** | はい | 追加する区分の ID (たとえば "99999") |
   | **[Area description]\(区分の説明\)** | はい | 追加する区分の説明 (たとえば "Area 99999") |
   | **[Region ID]\(リージョン ID\)** | はい | 追加するリージョンの ID (たとえば "102") |
   |||| 

   次に例を示します。

   ![テーブルの選択](./media/connectors-create-api-db2/db2-insert-row-action-select-table.png)

1. 操作が完了したら、デザイナーのツールバーで、 **[保存]** を選択します。

### <a name="view-insert-row-outputs"></a>[行の挿入] の出力を表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[行の挿入]** アクションを展開します。

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力には、指定したテーブルに追加したレコードが含まれます。

   ![挿入された行を含む出力の表示](./media/connectors-create-api-db2/db2-connector-insert-row-outputs.png)

## <a name="update-row"></a>行を更新する

DB2 データベース テーブルの 1 レコードを更新するには、ロジック アプリで **[行の更新]** アクションを使用します。 このアクションは DB2 `UPDATE` ステートメント (たとえば `UPDATE AREA SET AREAID = '99999', AREADESC = 'Updated 99999', REGIONID = 102)`) を実行します。

1. ロジック アプリで前に DB2 アクションを使用したことがない場合は、「[DB2 アクションを追加する -テーブルの取得](#add-db2-action)」セクションで手順を確認して、代わりに **[行の更新]** アクションを追加してから、ここに戻って続行します。

   **[行の更新]** アクションを追加すると、例のロジック アプリは次のように表示されます。

   ![[行の更新] アクション](./media/connectors-create-api-db2/db2-update-row-action.png)

1. 必須のプロパティ (*) すべての値を指定します。 テーブルを選択すると、アクションによって、そのテーブルのレコードに固有の関連プロパティが表示されます。

   この例ではプロパティは以下のとおりです。

   | プロパティ | 必須 | [説明] |
   |----------|----------|-------------|
   | **[テーブル名]** | はい | レコードを更新するテーブル (たとえば "AREA") |
   | **[行 ID]** | はい | 更新するレコードの ID (たとえば "99999") |
   | **[区分 ID]** | はい | 新しい区分 ID (たとえば "99999") |
   | **[Area description]\(区分の説明\)** | はい | 新しい区分の説明 (たとえば "Updated 99999") |
   | **[Region ID]\(リージョン ID\)** | はい | 新しいリージョン ID (たとえば "102") |
   ||||

   次に例を示します。

   ![テーブルの選択](./media/connectors-create-api-db2/db2-update-row-action-select-table.png)

1. 操作が完了したら、デザイナーのツールバーで、 **[保存]** を選択します。

### <a name="view-update-row-outputs"></a>[行の更新] の出力を表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[行の更新]** アクションを展開します。

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力には、指定したテーブルで更新されたレコードが含まれます。

   ![更新された行を含む出力の表示](./media/connectors-create-api-db2/db2-connector-update-row-outputs.png)

## <a name="delete-row"></a>行を削除する

DB2 データベース テーブルから 1 レコードを削除するには、ロジック アプリで **[行の削除]** アクションを使用します。 このアクションは DB2 `DELETE` ステートメント (たとえば `DELETE FROM AREA WHERE AREAID = '99999'`) を実行します。

1. ロジック アプリで前に DB2 アクションを使用したことがない場合は、「[DB2 アクションを追加する -テーブルの取得](#add-db2-action)」セクションで手順を確認して、代わりに **[行の削除]** アクションを追加してから、ここに戻って続行します。

   **[行の削除]** アクションを追加すると、例のロジック アプリは次のように表示されます。

   ![[行の削除] アクション](./media/connectors-create-api-db2/db2-delete-row-action.png)

1. 必須のプロパティ (*) すべての値を指定します。 テーブルを選択すると、アクションによって、そのテーブルのレコードに固有の関連プロパティが表示されます。

   この例ではプロパティは以下のとおりです。

   | プロパティ | 必須 | [説明] |
   |----------|----------|-------------|
   | **[テーブル名]** | はい | レコードを削除するテーブル (たとえば "AREA") |
   | **[行 ID]** | はい | 削除するレコードの ID (たとえば "99999") |
   ||||

   次に例を示します。

   ![テーブルの選択](./media/connectors-create-api-db2/db2-delete-row-action-select-table.png)

1. 操作が完了したら、デザイナーのツールバーで、 **[保存]** を選択します。

### <a name="view-delete-row-outputs"></a>[行の削除] の出力を表示する

ロジック アプリを手動で実行するには、デザイナーのツール バーで **[実行]** を選択します。 ロジック アプリの実行が終了した後で、実行の出力を表示できます。

1. ロジック アプリのメニューで、 **[概要]** を選択します。

1. **[概要]** の下の **[実行の履歴]** セクションで、最新の実行を選択します。これは一覧の一番上にあります。

1. **[ロジック アプリの実行]** で、ロジック アプリの各ステップのステータス、入力、出力を確認できます。
**[行の削除]** アクションを展開します。

1. 入力を表示するには、 **[未加工入力の表示]** を選択します。

1. 出力を表示するには、 **[未加工出力の表示]** を選択します。

   出力には、指定したテーブルから削除したレコードは含まれません。

   ![削除された行が含まれない出力の表示](./media/connectors-create-api-db2/db2-connector-delete-row-outputs.png)

## <a name="connector-reference"></a>コネクタのレファレンス

コネクタの Open API (以前の Swagger) ファイルによって記述される、トリガー、アクション、制限などの技術的詳細については、[コネクタのリファレンス ページ](/connectors/db2/)を参照してください。

## <a name="next-steps"></a>次のステップ

* 他の[Logic Apps コネクタ](../connectors/apis-list.md)を確認します。
