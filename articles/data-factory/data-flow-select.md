---
title: マッピング データ フローの選択変換
description: Azure Data Factory のマッピング データ フローの選択変換
author: kromerm
ms.author: makromer
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 02/12/2019
ms.openlocfilehash: a255d89aa4850d1249f1af9bdd0cb43b0826914f
ms.sourcegitcommit: a5ebf5026d9967c4c4f92432698cb1f8651c03bb
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/08/2019
ms.locfileid: "74930244"
---
# <a name="mapping-data-flow-select-transformation"></a>マッピング データ フローの選択変換


この変換は、列を選択する (行数を減らす) ため、列とストリームの名前をエイリアス化するため、および列の並べ替えを行うために使用します。

## <a name="how-to-use-select-transformation"></a>選択変換の使用方法
選択変換では、ストリーム全体またはそのストリーム内の列をエイリアス化して別の名前 (エイリアス) を割り当てておき、それらの新しい名前をデータ フロー内で参照できるようにします。 この変換は、自己結合シナリオで役に立ちます。 ADF の Data Flow 内で自己結合を実装する方法は、ストリームを指定し、"新しいブランチ" を分岐させ、その直後に "選択" 変換を追加することです。 これで、そのストリームには、元のストリームに結合するために使用できる新しい名前が付けられます (自己結合が作成されます)。

![自己結合](media/data-flow/selfjoin.png "自己結合")

上の図では、先頭に選択変換があります。 これは、元のストリームを "OrigSourceBatting" にエイリアス化しています。 下部の強調表示されている結合変換で、この選択エイリアス ストリームを右側の結合として使用して、内部結合の右側と左側の両方で同じキーを参照できるようになっていることがわかります。

選択変換は、データ フローから列を選択解除する方法としても使用できます。 たとえば、シンクに 6 つの列が定義されているが、特定の 3 つの列のみを選択して変換した後、シンクにフローする場合は、選択変換を使用してこれら 3 つの列のみを選択できます。

![選択変換](media/data-flow/newselect1.png "エイリアスの選択")

## <a name="options"></a>オプション
* "選択" 変換の既定の設定は、受信するすべての列を処理し、それらの元の名前を保持することです。 選択変換の名前を設定することで、ストリームをエイリアス化できます。
* 個々の列をエイリアス化する場合は、[すべて選択] をオフにし、下部にある列マッピングを使用します。
* 入力または出力メタデータから重複している列を排除するには、[Skip Duplicates]\(重複をスキップ\) を選択します。

![重複のスキップ](media/data-flow/select-skip-dup.png "重複のスキップ")

* 重複のスキップを選択すると、[Inspect]\(検査\) タブに結果が表示されます。ADF では列の最初の出現が保持され、ユーザーにはそれ以降の同じ列の出現がフローから削除されたように見えます。

> [!NOTE]
> マッピング ルールを消去するには、 **[リセット]** を押します。

## <a name="mapping"></a>マッピング
既定では、選択変換によってすべての列が自動的にマップされ、すべての着信列が出力の同じ名前に渡されます。 [Select Settings]\(選択の設定\) で設定されている出力ストリーム名によって、ストリームの新しいエイリアス名が定義されます。 "選択" の "自動マップ" 設定をそのまま使用した場合、すべての列が同じであるストリーム全体に別名を付けることができます。

![選択変換のルール](media/data-flow/rule2.png "ルールベースのマッピング")

列の別名の作成、削除、名前の変更、または順序の変更を行う場合は、最初に "自動マップ" をオフにする必要があります。 既定では、"すべての入力列" という名前の既定のルールが自動的に入力されます。 すべての着信列が常に出力で同じ名前にマップされるようにする場合は、このルールをそのままにしておくことができます。

ただし、カスタム ルールを追加する場合は、[マッピングの追加] をクリックします。 フィールドのマッピングでは、マップして別名を作成する受信列と送信列の名前の一覧が表示されます。 [ルールベースのマッピング] を選択して、パターン マッチング ルールを作成します。

## <a name="rule-based-mapping"></a>ルールベースのマッピング
ルールベースのマッピングを選択することは、ADF に対して、受信パターン ルールに一致するように一致式を評価し、送信フィールド名を定義するように指示することになります。 フィールドとルールベースの両方のマッピングの任意の組み合わせを追加することもできます。 フィールド名は、ソースからの受信メタデータに基づいて、実行時に ADF によって生成されます。 生成されたフィールドの名前は、デバッグ中に表示することも、データ プレビュー ウィンドウを使用して表示することもできます。

パターン マッチングの詳細については、[列パターンに関するドキュメント](concepts-data-flow-column-pattern.md)を参照してください。

## <a name="next-steps"></a>次の手順
* 選択を使用して列の名前変更、並べ替え、およびエイリアス化を実行した後、[シンク変換](data-flow-sink.md)を使用してデータをデータストアに格納します。
