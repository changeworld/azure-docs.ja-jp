---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/30/2021
ms.locfileid: "103466167"
---
このカテゴリには **24 個** の推奨事項があります。

|推奨 |Description |重大度 |
|---|---|---|
|Azure Defender for container registries を有効にする必要がある |セキュリティで保護されたコンテナー化されたワークロードを構築するには、基になっているイメージに既知の脆弱性がないことを確認します。<br>Azure Defender for container registries では、プッシュされた各コンテナー イメージのセキュリティ脆弱性をご自身のレジストリからスキャンし、各イメージの詳細な結果を公開します。<br>コンテナーのセキュリティ態勢を改善し、コンテナーを攻撃から保護するには、コンテナー レジストリ用 Azure Defender を有効にします。<br><br>重要:この推奨事項の修復によって、コンテナー レジストリを保護するための料金が発生します。 このサブスクリプションにコンテナー レジストリがない場合、料金は発生しません。<br>今後、このサブスクリプションにコンテナー レジストリを作成すると、それらは自動的に保護され、その時点で料金が発生します。<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>コンテナー レジストリ用 Azure Defender の詳細をご覧ください。</a><br />(関連ポリシー:[コンテナー レジストリ用 Azure Defender を有効にする必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)) |高 |
|Azure Defender for Kubernetes を有効にする必要がある |Azure Defender for Kubernetes では、コンテナー化された環境に対するリアルタイムの脅威の防止が提供され、疑わしいアクティビティに対してはアラートが生成されます。<br>ユーザーは、この情報を使用して、迅速にセキュリティの問題を修復し、コンテナーのセキュリティを強化することができます。<br><br>重要:この推奨事項の修復によって、Kubernetes クラスターを保護するための料金が発生します。 このサブスクリプションに Kubernetes クラスターがない場合、料金は発生しません。<br>今後、このサブスクリプションに Kubernetes クラスターを作成すると、それらは自動的に保護され、その時点で料金が発生します。<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Azure Defender for Kubernetes の詳細をご覧ください。</a><br />(関連ポリシー:[Azure Defender for Kubernetes を有効にする必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)) |高 |
|Kubernetes 用の Azure Policy アドオンをクラスターにインストールして有効にする必要がある |Kubernetes 用の Azure Policy アドオンでは、<a target="_blank" href="https://www.openpolicyagent.org/">Open Policy Agent</a> (OPA) 用のアドミッション コントローラー Webhook である <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">Gatekeeper</a> v3 を拡張して、一元化された一貫した方法で、大規模な強制と保護をクラスターに適用します。<p>Security Center では、クラスター内のセキュリティ機能とコンプライアンスを監査および適用するためにこのアドオンが必要です。 <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes">詳細をご覧ください</a>。</p><p>Kubernetes v1.14.0 以降が必要です。</p><br />(関連ポリシー:[Kubernetes Service (AKS) 用の Azure Policy アドオンをクラスターにインストールして有効にする必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d)) |高 |
|コンテナーの CPU とメモリの制限を強制する必要がある |CPU とメモリの制限を適用すると、リソース枯渇攻撃 (サービス拒否攻撃の一種) を防ぐことができます。<p>コンテナーに制限を設定し、設定された制限を超えてリソースがコンテナーで使用されないように、ランタイムによって防ぐことをお勧めします。</p><br />(関連ポリシー:[コンテナーの CPU およびメモリのリソース制限が、Kubernetes クラスター内の指定された制限を超えないようにする](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)) |中 |
|コンテナー イメージは信頼されたレジストリからのみデプロイする必要がある |Kubernetes クラスターで実行されているイメージは、監視対象になっている既知のコンテナー イメージ レジストリのものである必要があります。 信頼できるレジストリにより、不明な脆弱性、セキュリティの問題、悪意のあるイメージが持ち込まれる可能性が制限され、クラスターが危険にさらされるリスクが減ります。<br />(関連ポリシー:[Kubernetes クラスター内で許可されたコンテナー イメージのみを実行する](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |高 |
|コンテナー レジストリは、カスタマー マネージド キー (CMK) を使用して暗号化する必要がある |カスタマー マネージド キーを使用して、レジストリのコンテンツ保存時の暗号化を管理します。 既定では、データはサービス マネージド キーを使用して保存時に暗号化されますが、規制コンプライアンス標準を満たすためには一般に、カスタマー マネージド キー (CMK) が必要です。 CMK を使用すると、自分が作成して所有する Azure Key Vault キーを使用してデータを暗号化できます。 ローテーションや管理など、キーのライフサイクルを完全に制御し、責任を負うことになります。 CMK 暗号化の詳細については、https://aka.ms/acr/CMK を参照してください。<br />(関連ポリシー:[コンテナー レジストリは、カスタマー マネージド キー (CMK) を使用して暗号化する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580) |Medium |
|コンテナー レジストリでは無制限のネットワーク アクセスを許可しない |既定では、Azure コンテナー レジストリは、任意のネットワーク上のホストからのインターネット経由の接続を受け入れます。 潜在的な脅威からレジストリを保護するには、特定のパブリック IP アドレスまたはアドレス範囲のみからのアクセスを許可します。 レジストリに IP またはファイアウォール規則、あるいは構成済みの仮想ネットワークがない場合は、異常なリソースとして表示されます。 Container Registry ネットワーク規則の詳細については、https://aka.ms/acr/portal/public-network と https://aka.ms/acr/vnet を参照してください。<br />(関連ポリシー:[コンテナー レジストリでは無制限のネットワーク アクセスを許可しない](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71)) |Medium |
|コンテナー レジストリではプライベート リンクを使用する必要がある |Azure Private Link を使用すると、接続元または接続先にパブリック IP アドレスを使用せずに、仮想ネットワークを Azure サービスに接続できます。 プライベート リンク プラットフォームでは、Azure バックボーン ネットワークを介してコンシューマーとサービスの間の接続が処理されます。サービス全体ではなく、コンテナー レジストリにプライベート エンドポイントをマッピングすることで、データ漏洩のリスクからも保護されます。 詳細については、https://aka.ms/acr/private-link を参照してください。<br />(関連ポリシー:[コンテナー レジストリではプライベート リンクを使用する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Medium |
|特権エスカレーションを含むコンテナーは避ける必要がある |お使いの Kubernetes クラスターでは、ルートへの特権エスカレーションでコンテナーを実行しないでください。<br>プロセスが親プロセスよりも多くの特権を取得できるかどうかは、AllowPrivilegeEscalation 属性によって制御されます。<br />(関連ポリシー:[Kubernetes クラスターでコンテナーの特権エスカレーションを許可しない](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |中 |
|機密性の高いホストの名前空間を共有するコンテナーは避ける必要がある |コンテナー外の特権エスカレーションから保護するには、Kubernetes クラスター内の機密性の高いホストの名前空間 (ホスト プロセス ID とホスト IPC) へのポッド アクセスを回避します。<br />(関連ポリシー:[Kubernetes クラスター コンテナーはホスト プロセス ID またはホスト IPC 名前空間を共有しない](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |中 |
|コンテナーは許可されたポートでのみリッスンする必要がある |Kubernetes クラスターの攻撃面を減らすために、コンテナーのアクセスを構成済みポートに制限して、クラスターへのアクセスを制限します。<br />(関連ポリシー:[コンテナーが Kubernetes クラスター内の許可されたポートでのみリッスンするようにする](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |中 |
|コンテナーで不変 (読み取り専用) のルート ファイル システムを適用する必要がある |お使いの Kubernetes クラスターでは、読み取り専用のルート ファイル システムを使用してコンテナーを実行してください。 不変のファイル システムは、PATH に追加された悪意のあるバイナリによる実行時の変更から、コンテナーを保護します。<br />(関連ポリシー:[Kubernetes クラスター コンテナーを読み取り専用のルート ファイル システムで実行する](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |中 |
|Kubernetes クラスターは HTTPS 経由でのみアクセス可能である必要がある |HTTPS を使用すると、認証が確実に実行され、転送中のデータがネットワーク層の傍受攻撃から保護されます。 この機能は、Kubernetes Service (AKS) と、AKS Engine および Azure Arc 対応 Kubernetes のプレビューで現在一般提供されています。 詳細については、https://aka.ms/kubepolicydoc を参照してください。<br />(関連ポリシー: [Kubernetes クラスターで HTTPS イングレスを強制する](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |高 |
|Kubernetes Services Management API サーバーは、制限付きアクセスで構成されている必要がある |許可されたネットワーク、マシン、またはサブネットのアプリケーションしかクラスターにアクセスできないようにするには、Kubernetes Service Management API サーバーへのアクセスを制限します。 許可された IP 範囲を定義するか、または API サーバーをプライベート クラスター (<a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a> を参照) として設定することにより、アクセスを制限することができます。<br />(関連ポリシー:[Kubernetes Services では許可された IP 範囲を定義する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |高 |
|Kubernetes Service を脆弱性のない Kubernetes バージョンにアップグレードする必要がある |現在の Kubernetes バージョンの既知の脆弱性から保護するため、Kubernetes Service クラスターを新しい Kubernetes バージョンにアップグレードしてください。 Kubernetes バージョン 1.11.9 以上、1.12.7 以上、1.13.5 以上、1.14.0 以上では、脆弱性 <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> にパッチが適用されています。<br />(関連ポリシー:[Kubernetes Service を脆弱性のない Kubernetes バージョンにアップグレードする必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c)) |高 |
|コンテナーで最小限の特権を持つ Linux 機能を適用する必要がある |コンテナーの攻撃面を減らすには、Linux の機能を制限し、ルート ユーザーのすべての特権をコンテナーに付与するのではなく、特定の特権を付与してください。 すべての機能を削除してから、必要なものを追加することをお勧めします。<br />(関連ポリシー:[Kubernetes クラスター コンテナーでは、許可されている機能のみを使用する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |中 |
|コンテナーの AppArmor プロファイルのオーバーライドまたは無効化を制限する必要がある |お使いの Kubernetes クラスターで実行されているコンテナーは、許可されている AppArmor プロファイルのみに制限してください。<br>;AppArmor (Application Armor) は、オペレーティング システムとそのアプリケーションをセキュリティの脅威から保護する Linux セキュリティ モジュールです。 これを使用するには、システム管理者が AppArmor セキュリティ プロファイルを各プログラムに関連付けます。<br />(関連ポリシー:[Kubernetes クラスター コンテナーでは、許可されている AppArmor プロファイルのみを使用する](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |高 |
|特権コンテナーの使用を避ける |無制限のホスト アクセスを制限するには、できる限り特権コンテナーは使わないようにします。<p>特権コンテナーには、ホスト マシンのすべてのルート機能が含まれています。 これらは攻撃のエントリ ポイントとして使用されたり、侵害されたアプリケーション、ホスト、ネットワークに悪意のあるコードやマルウェアを拡散させるために使用されたりする可能性があります。</p><br />(関連ポリシー:[Kubernetes クラスターで特権コンテナーを許可しない](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |中 |
|Kubernetes Services ではロールベースのアクセス制御を使用する必要がある |ユーザーが実行できるアクションに関して詳細なフィルター処理を行うために、ロールベースのアクセス制御 (RBAC) を使用して、Kubernetes Service クラスター内のアクセス許可を管理し、関連する承認ポリシーを構成します。 詳細については、<a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>Azure のロールベースのアクセス制御</a>に関するページを参照してください。<br />(関連ポリシー:[Kubernetes Services ではロールベースのアクセス制御 (RBAC) を使用する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |高 |
|コンテナーをルート ユーザーとして実行しない |お使いの Kubernetes クラスターでは、ルート以外のユーザーとしてコンテナーを実行してください。 コンテナー内でプロセスをルート ユーザーとして実行すると、それはホスト上のルートとして実行されます。 侵害が発生した場合、攻撃者はコンテナーのルート権限を持つことになり、構成ミスを悪用しやすくなります。<br />(関連ポリシー:[Kubernetes クラスターのポッドとコンテナーは、承認されたユーザーおよびグループ ID のみを使用して実行する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |高 |
|サービスは許可されたポートでのみリッスンする必要がある |Kubernetes クラスターの攻撃面を減らすために、サービスのアクセスを構成済みポートに制限して、クラスターへのアクセスを制限します。<br />(関連ポリシー:[サービスが Kubernetes クラスター内の許可されたポートでのみリッスンするようにする](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |中 |
|ホスト ネットワークとポートの使用を制限する必要がある |ポッドのアクセスを、Kubernetes クラスター内のホスト ネットワークおよび許容されるホスト ポート範囲に制限します。 hostNetwork 属性を有効にして作成されたポッドの間では、ノードのネットワーク領域が共有されます。 セキュリティ侵害を受けたコンテナーによってネットワーク トラフィックがスニッフィングされるのを防ぐため、ホスト ネットワークにはポッドを配置しないことをお勧めします。 コンテナー ポートをノード ネットワークに公開する必要があり、Kubernetes Service ノード ポートを使用してもニーズが満たされない場合は、ポッド仕様のコンテナーに対して hostPort を指定することもできます。<br />(関連ポリシー:[Kubernetes クラスター ポッドは、承認されたホスト ネットワークとポート範囲のみを使用する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |中 |
|ポッドの HostPath ボリューム マウントの使用を既知のリストに制限して、侵害されたコンテナーからのノード アクセスを制限する必要がある |Kubernetes クラスター内のポッドの HostPath ボリューム マウントを、構成済みの許可されているホスト パスに制限することをお勧めします。 侵害が発生した場合は、コンテナーからのコンテナー ノード アクセスを制限する必要があります。<br />(関連ポリシー:[Kubernetes クラスター ポッドの hostPath ボリュームでは、許可されているホスト パスのみを使用する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Medium |
|Azure Container Registry イメージの脆弱性を修復する必要がある (Qualys を利用) |コンテナー イメージの脆弱性評価では、レジストリをスキャンしてセキュリティの脆弱性を調べ、各イメージの詳細な調査結果を公開します。 脆弱性を解決することで、お使いのコンテナーのセキュリティ体制が大幅に向上し、それらを攻撃から保護できます。<br />(関連ポリシー:[Azure Container Registry イメージの脆弱性を修復する必要がある](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |高 |
|||
